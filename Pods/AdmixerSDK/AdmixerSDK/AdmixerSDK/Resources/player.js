/*! For license information please see player-sdk-bundle.js.LICENSE.txt */
!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=100)}([function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function r(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(0),r=i(30),s=i(60),o=i(6),a=i(44),c=i(17),u=i(40),h=function(t){function e(i,n,r){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s.a;break;case 1:if(!i){o.destination=s.a;break}if("object"===typeof i){i instanceof e?(o.syncErrorThrowable=i.syncErrorThrowable,o.destination=i,i.add(o)):(o.syncErrorThrowable=!0,o.destination=new l(o,i));break}default:o.syncErrorThrowable=!0,o.destination=new l(o,i,n,r)}return o}return n.a(e,t),e.prototype[a.a]=function(){return this},e.create=function(t,i,n){var r=new e(t,i,n);return r.syncErrorThrowable=!1,r},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(o.a),l=function(t){function e(e,i,n,o){var a,c=t.call(this)||this;c._parentSubscriber=e;var u=c;return Object(r.a)(i)?a=i:i&&(a=i.next,n=i.error,o=i.complete,i!==s.a&&(u=Object.create(i),Object(r.a)(u.unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=a,c._error=n,c._complete=o,c}return n.a(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,i=c.a.useDeprecatedSynchronousErrorHandling;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;Object(u.a)(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};c.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),c.a.useDeprecatedSynchronousErrorHandling)throw t;Object(u.a)(t)}},e.prototype.__tryOrSetError=function(t,e,i){if(!c.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(e){return c.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Object(u.a)(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(h)},function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return u}));var n=i(0),r=i(1),s=i(3),o=i(39),a=function(t){function e(e){var i=t.call(this)||this;return i.parent=e,i}return n.a(e,t),e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(r.a),c=(r.a,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.a(e,t),e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(r.a));r.a;function u(t,e){if(!e.closed){if(t instanceof s.a)return t.subscribe(e);var i;try{i=Object(o.a)(t)(e)}catch(t){e.error(t)}return i}}},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(58),r=i(1),s=i(44),o=i(60);var a=i(26),c=i(42),u=i(17),h=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var n=this.operator,a=function(t,e,i){if(t){if(t instanceof r.a)return t;if(t[s.a])return t[s.a]()}return t||e||i?new r.a(t,e,i):new r.a(o.a)}(t,e,i);if(n?a.add(n.call(a,this.source)):a.add(this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Object(n.a)(t)&&t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=l(e))((function(e,n){var r;r=i.subscribe((function(e){try{t(e)}catch(t){n(t),r&&r.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[a.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Object(c.b)(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=l(t))((function(t,i){var n;e.subscribe((function(t){return n=t}),(function(t){return i(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},function(t,e,i){"use strict";i.r(e),i.d(e,"Observable",(function(){return n.a})),i.d(e,"ConnectableObservable",(function(){return r.a})),i.d(e,"GroupedObservable",(function(){return s.a})),i.d(e,"observable",(function(){return o.a})),i.d(e,"Subject",(function(){return a.a})),i.d(e,"BehaviorSubject",(function(){return c.a})),i.d(e,"ReplaySubject",(function(){return u.a})),i.d(e,"AsyncSubject",(function(){return h.a})),i.d(e,"asap",(function(){return l.a})),i.d(e,"asapScheduler",(function(){return l.b})),i.d(e,"async",(function(){return d.a})),i.d(e,"asyncScheduler",(function(){return d.b})),i.d(e,"queue",(function(){return p.a})),i.d(e,"queueScheduler",(function(){return p.b})),i.d(e,"animationFrame",(function(){return y})),i.d(e,"animationFrameScheduler",(function(){return v})),i.d(e,"VirtualTimeScheduler",(function(){return w})),i.d(e,"VirtualAction",(function(){return S})),i.d(e,"Scheduler",(function(){return _.a})),i.d(e,"Subscription",(function(){return E.a})),i.d(e,"Subscriber",(function(){return T.a})),i.d(e,"Notification",(function(){return A.a})),i.d(e,"NotificationKind",(function(){return A.b})),i.d(e,"pipe",(function(){return x.a})),i.d(e,"noop",(function(){return C.a})),i.d(e,"identity",(function(){return k.a})),i.d(e,"isObservable",(function(){return O})),i.d(e,"ArgumentOutOfRangeError",(function(){return M.a})),i.d(e,"EmptyError",(function(){return P.a})),i.d(e,"ObjectUnsubscribedError",(function(){return j.a})),i.d(e,"UnsubscriptionError",(function(){return R.a})),i.d(e,"TimeoutError",(function(){return I.a})),i.d(e,"bindCallback",(function(){return U})),i.d(e,"bindNodeCallback",(function(){return F})),i.d(e,"combineLatest",(function(){return G.b})),i.d(e,"concat",(function(){return z.a})),i.d(e,"defer",(function(){return X.a})),i.d(e,"empty",(function(){return Y.b})),i.d(e,"forkJoin",(function(){return J})),i.d(e,"from",(function(){return Q.a})),i.d(e,"fromEvent",(function(){return et})),i.d(e,"fromEventPattern",(function(){return nt})),i.d(e,"generate",(function(){return rt})),i.d(e,"iif",(function(){return ot})),i.d(e,"interval",(function(){return ct})),i.d(e,"merge",(function(){return ht.a})),i.d(e,"never",(function(){return dt})),i.d(e,"of",(function(){return pt.a})),i.d(e,"onErrorResumeNext",(function(){return ft})),i.d(e,"pairs",(function(){return mt})),i.d(e,"partition",(function(){return wt})),i.d(e,"race",(function(){return St.a})),i.d(e,"range",(function(){return _t})),i.d(e,"throwError",(function(){return Tt.a})),i.d(e,"timer",(function(){return At.a})),i.d(e,"using",(function(){return xt})),i.d(e,"zip",(function(){return Ct.b})),i.d(e,"scheduled",(function(){return kt.a})),i.d(e,"EMPTY",(function(){return Y.a})),i.d(e,"NEVER",(function(){return lt})),i.d(e,"config",(function(){return Ot.a}));var n=i(3),r=i(70),s=i(68),o=i(26),a=i(8),c=i(71),u=i(51),h=i(35),l=i(43),d=i(9),p=i(64),f=i(0),m=i(36),b=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.scheduler=e,n.work=i,n}return f.a(e,t),e.prototype.requestAsyncId=function(e,i,n){return void 0===n&&(n=0),null!==n&&n>0?t.prototype.requestAsyncId.call(this,e,i,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame((function(){return e.flush(null)}))))},e.prototype.recycleAsyncId=function(e,i,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,i,n);0===e.actions.length&&(cancelAnimationFrame(i),e.scheduled=void 0)},e}(m.a),g=i(34),v=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f.a(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,i=this.actions,n=-1,r=i.length;t=t||i.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<r&&(t=i.shift()));if(this.active=!1,e){for(;++n<r&&(t=i.shift());)t.unsubscribe();throw e}},e}(g.a))(b),y=v,w=function(t){function e(e,i){void 0===e&&(e=S),void 0===i&&(i=Number.POSITIVE_INFINITY);var n=t.call(this,e,(function(){return n.frame}))||this;return n.maxFrames=i,n.frame=0,n.index=-1,n}return f.a(e,t),e.prototype.flush=function(){for(var t,e,i=this.actions,n=this.maxFrames;(e=i[0])&&e.delay<=n&&(i.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=i.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(g.a),S=function(t){function e(e,i,n){void 0===n&&(n=e.index+=1);var r=t.call(this,e,i)||this;return r.scheduler=e,r.work=i,r.index=n,r.active=!0,r.index=e.index=n,r}return f.a(e,t),e.prototype.schedule=function(i,n){if(void 0===n&&(n=0),!this.id)return t.prototype.schedule.call(this,i,n);this.active=!1;var r=new e(this.scheduler,this.work);return this.add(r),r.schedule(i,n)},e.prototype.requestAsyncId=function(t,i,n){void 0===n&&(n=0),this.delay=t.frame+n;var r=t.actions;return r.push(this),r.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,i){void 0===i&&(i=0)},e.prototype._execute=function(e,i){if(!0===this.active)return t.prototype._execute.call(this,e,i)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(m.a),_=i(65),E=i(6),T=i(1),A=i(21),x=i(42),C=i(25),k=i(18);function O(t){return!!t&&(t instanceof n.a||"function"===typeof t.lift&&"function"===typeof t.subscribe)}var M=i(29),P=i(31),j=i(27),R=i(45),I=i(73),D=i(11),L=i(58),N=i(10),V=i(13);function U(t,e,i){if(e){if(!Object(V.a)(e))return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return U(t,i).apply(void 0,n).pipe(Object(D.a)((function(t){return Object(N.a)(t)?e.apply(void 0,t):e(t)})))};i=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var s,o=this,a={context:o,subject:s,callbackFunc:t,scheduler:i};return new n.a((function(n){if(i){var r={args:e,subscriber:n,params:a};return i.schedule($,0,r)}if(!s){s=new h.a;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.next(t.length<=1?t[0]:t),s.complete()}]))}catch(t){Object(L.a)(s)&&s.error(t)}}return s.subscribe(n)}))}}function $(t){var e=this,i=t.args,n=t.subscriber,r=t.params,s=r.callbackFunc,o=r.context,a=r.scheduler,c=r.subject;if(!c){c=r.subject=new h.a;try{s.apply(o,i.concat([function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=t.length<=1?t[0]:t;e.add(a.schedule(B,0,{value:n,subject:c}))}]))}catch(t){c.error(t)}}this.add(c.subscribe(n))}function B(t){var e=t.value,i=t.subject;i.next(e),i.complete()}function F(t,e,i){if(e){if(!Object(V.a)(e))return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return F(t,i).apply(void 0,n).pipe(Object(D.a)((function(t){return Object(N.a)(t)?e.apply(void 0,t):e(t)})))};i=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var s={subject:void 0,args:e,callbackFunc:t,scheduler:i,context:this};return new n.a((function(n){var r=s.context,o=s.subject;if(i)return i.schedule(W,0,{params:s,subscriber:n,context:r});if(!o){o=s.subject=new h.a;try{t.apply(r,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.shift();i?o.error(i):(o.next(t.length<=1?t[0]:t),o.complete())}]))}catch(t){Object(L.a)(o)&&o.error(t)}}return o.subscribe(n)}))}}function W(t){var e=this,i=t.params,n=t.subscriber,r=t.context,s=i.callbackFunc,o=i.args,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new h.a;try{s.apply(r,o.concat([function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=t.shift();if(n)e.add(a.schedule(q,0,{err:n,subject:c}));else{var r=t.length<=1?t[0]:t;e.add(a.schedule(H,0,{value:r,subject:c}))}}]))}catch(t){this.add(a.schedule(q,0,{err:t,subject:c}))}}this.add(c.subscribe(n))}function H(t){var e=t.value,i=t.subject;i.next(e),i.complete()}function q(t){var e=t.err;t.subject.error(e)}var G=i(53),z=i(38),X=i(55),Y=i(14),K=i(57),Q=i(15);function J(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var i=t[0];if(Object(N.a)(i))return Z(i,null);if(Object(K.a)(i)&&Object.getPrototypeOf(i)===Object.prototype){var n=Object.keys(i);return Z(n.map((function(t){return i[t]})),n)}}if("function"===typeof t[t.length-1]){var r=t.pop();return Z(t=1===t.length&&Object(N.a)(t[0])?t[0]:t,null).pipe(Object(D.a)((function(t){return r.apply(void 0,t)})))}return Z(t,null)}function Z(t,e){return new n.a((function(i){var n=t.length;if(0!==n)for(var r=new Array(n),s=0,o=0,a=function(a){var c=Object(Q.a)(t[a]),u=!1;i.add(c.subscribe({next:function(t){u||(u=!0,o++),r[a]=t},error:function(t){return i.error(t)},complete:function(){++s!==n&&u||(o===n&&i.next(e?e.reduce((function(t,e,i){return t[e]=r[i],t}),{}):r),i.complete())}}))},c=0;c<n;c++)a(c);else i.complete()}))}var tt=i(30);function et(t,e,i,r){return Object(tt.a)(i)&&(r=i,i=void 0),r?et(t,e,i).pipe(Object(D.a)((function(t){return Object(N.a)(t)?r.apply(void 0,t):r(t)}))):new n.a((function(n){it(t,e,(function(t){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(t)}),n,i)}))}function it(t,e,i,n,r){var s;if(function(t){return t&&"function"===typeof t.addEventListener&&"function"===typeof t.removeEventListener}(t)){var o=t;t.addEventListener(e,i,r),s=function(){return o.removeEventListener(e,i,r)}}else if(function(t){return t&&"function"===typeof t.on&&"function"===typeof t.off}(t)){var a=t;t.on(e,i),s=function(){return a.off(e,i)}}else if(function(t){return t&&"function"===typeof t.addListener&&"function"===typeof t.removeListener}(t)){var c=t;t.addListener(e,i),s=function(){return c.removeListener(e,i)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var u=0,h=t.length;u<h;u++)it(t[u],e,i,n,r)}n.add(s)}function nt(t,e,i){return i?nt(t,e).pipe(Object(D.a)((function(t){return Object(N.a)(t)?i.apply(void 0,t):i(t)}))):new n.a((function(i){var n,r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.next(1===t.length?t[0]:t)};try{n=t(r)}catch(t){return void i.error(t)}if(Object(tt.a)(e))return function(){return e(r,n)}}))}function rt(t,e,i,r,s){var o,a;if(1==arguments.length){var c=t;a=c.initialState,e=c.condition,i=c.iterate,o=c.resultSelector||k.a,s=c.scheduler}else void 0===r||Object(V.a)(r)?(a=t,o=k.a,s=r):(a=t,o=r);return new n.a((function(t){var n=a;if(s)return s.schedule(st,0,{subscriber:t,iterate:i,condition:e,resultSelector:o,state:n});for(;;){if(e){var r=void 0;try{r=e(n)}catch(e){return void t.error(e)}if(!r){t.complete();break}}var c=void 0;try{c=o(n)}catch(e){return void t.error(e)}if(t.next(c),t.closed)break;try{n=i(n)}catch(e){return void t.error(e)}}}))}function st(t){var e=t.subscriber,i=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(i){var n=void 0;try{n=i(t.state)}catch(t){return void e.error(t)}if(!n)return void e.complete();if(e.closed)return}var r;try{r=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(r),!e.closed))return this.schedule(t)}}function ot(t,e,i){return void 0===e&&(e=Y.a),void 0===i&&(i=Y.a),Object(X.a)((function(){return t()?e:i}))}var at=i(37);function ct(t,e){return void 0===t&&(t=0),void 0===e&&(e=d.a),(!Object(at.a)(t)||t<0)&&(t=0),e&&"function"===typeof e.schedule||(e=d.a),new n.a((function(i){return i.add(e.schedule(ut,t,{subscriber:i,counter:0,period:t})),i}))}function ut(t){var e=t.subscriber,i=t.counter,n=t.period;e.next(i),this.schedule({subscriber:e,counter:i+1,period:n},n)}var ht=i(75),lt=new n.a(C.a);function dt(){return lt}var pt=i(41);function ft(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return Y.a;var i=t[0],r=t.slice(1);return 1===t.length&&Object(N.a)(i)?ft.apply(void 0,i):new n.a((function(t){var e=function(){return t.add(ft.apply(void 0,r).subscribe(t))};return Object(Q.a)(i).subscribe({next:function(e){t.next(e)},error:e,complete:e})}))}function mt(t,e){return e?new n.a((function(i){var n=Object.keys(t),r=new E.a;return r.add(e.schedule(bt,0,{keys:n,index:0,subscriber:i,subscription:r,obj:t})),r})):new n.a((function(e){for(var i=Object.keys(t),n=0;n<i.length&&!e.closed;n++){var r=i[n];t.hasOwnProperty(r)&&e.next([r,t[r]])}e.complete()}))}function bt(t){var e=t.keys,i=t.index,n=t.subscriber,r=t.subscription,s=t.obj;if(!n.closed)if(i<e.length){var o=e[i];n.next([o,s[o]]),r.add(this.schedule({keys:e,index:i+1,subscriber:n,subscription:r,obj:s}))}else n.complete()}var gt=i(83),vt=i(39),yt=i(20);function wt(t,e,i){return[Object(yt.a)(e,i)(new n.a(Object(vt.a)(t))),Object(yt.a)(Object(gt.a)(e,i))(new n.a(Object(vt.a)(t)))]}var St=i(76);function _t(t,e,i){return void 0===t&&(t=0),new n.a((function(n){void 0===e&&(e=t,t=0);var r=0,s=t;if(i)return i.schedule(Et,0,{index:r,count:e,start:t,subscriber:n});for(;;){if(r++>=e){n.complete();break}if(n.next(s++),n.closed)break}}))}function Et(t){var e=t.start,i=t.index,n=t.count,r=t.subscriber;i>=n?r.complete():(r.next(e),r.closed||(t.index=i+1,t.start=e+1,this.schedule(t)))}var Tt=i(52),At=i(77);function xt(t,e){return new n.a((function(i){var n,r;try{n=t()}catch(t){return void i.error(t)}try{r=e(n)}catch(t){return void i.error(t)}var s=(r?Object(Q.a)(r):Y.a).subscribe(i);return function(){s.unsubscribe(),n&&n.unsubscribe()}}))}var Ct=i(56),kt=i(78),Ot=i(17)},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||e.hasOwnProperty(i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.iframeAttr=void 0;var s=i(61);Object.defineProperty(e,"Each",{enumerable:!0,get:function(){return s.Each}});var o=i(62);Object.defineProperty(e,"Dictionary",{enumerable:!0,get:function(){return o.Dictionary}});var a=i(103);Object.defineProperty(e,"Request",{enumerable:!0,get:function(){return a.Request}}),Object.defineProperty(e,"xhr",{enumerable:!0,get:function(){return a.xhr}});var c=i(47);Object.defineProperty(e,"$$",{enumerable:!0,get:function(){return c.$$}}),Object.defineProperty(e,"NodeWorker",{enumerable:!0,get:function(){return c.NodeWorker}});var u=i(89);Object.defineProperty(e,"Events",{enumerable:!0,get:function(){return u.Events}});var h=i(46);Object.defineProperty(e,"dataType",{enumerable:!0,get:function(){return h.dataType}});var l=i(104);Object.defineProperty(e,"MediaEvents",{enumerable:!0,get:function(){return l.MediaEvents}});var d=i(66);Object.defineProperty(e,"Ticker",{enumerable:!0,get:function(){return d.Ticker}});var p=i(105);Object.defineProperty(e,"Timer",{enumerable:!0,get:function(){return p.Timer}});var f=i(106);Object.defineProperty(e,"Svg",{enumerable:!0,get:function(){return f.Svg}});var m=i(107);Object.defineProperty(e,"DragAndDropOld",{enumerable:!0,get:function(){return m.DragAndDropOld}});var b=i(108);Object.defineProperty(e,"toTime",{enumerable:!0,get:function(){return b.toTime}});var g=i(109);Object.defineProperty(e,"AddStyle",{enumerable:!0,get:function(){return g.AddStyle}}),Object.defineProperty(e,"MergeStyle",{enumerable:!0,get:function(){return g.MergeStyle}});var v=i(110);Object.defineProperty(e,"getTime",{enumerable:!0,get:function(){return v.getTime}});var y=i(84);Object.defineProperty(e,"getDevice",{enumerable:!0,get:function(){return y.getDevice}}),Object.defineProperty(e,"Device",{enumerable:!0,get:function(){return y.Device}});var w=i(91);Object.defineProperty(e,"SizeChange",{enumerable:!0,get:function(){return w.SizeChange}});var S=i(67);Object.defineProperty(e,"logger",{enumerable:!0,get:function(){return S.logger}}),Object.defineProperty(e,"Log",{enumerable:!0,get:function(){return S.Log}}),Object.defineProperty(e,"Logger",{enumerable:!0,get:function(){return S.Logger}});var _=i(90);Object.defineProperty(e,"DocIsVisible",{enumerable:!0,get:function(){return _.DocIsVisible}});var E=i(111);Object.defineProperty(e,"CanvasMask",{enumerable:!0,get:function(){return E.CanvasMask}});var T=i(112);Object.defineProperty(e,"DragAndDrop",{enumerable:!0,get:function(){return T.DragAndDrop}});var A=i(113);Object.defineProperty(e,"Emitter",{enumerable:!0,get:function(){return A.Emitter}});var x=i(114);Object.defineProperty(e,"RuleDecorator",{enumerable:!0,get:function(){return x.RuleDecorator}}),Object.defineProperty(e,"Rule",{enumerable:!0,get:function(){return x.Rule}});var C=i(115);Object.defineProperty(e,"parseXml",{enumerable:!0,get:function(){return C.parseXml}});var k=i(116);Object.defineProperty(e,"TimingRules",{enumerable:!0,get:function(){return k.TimingRules}});var O=i(117);Object.defineProperty(e,"getTextContext",{enumerable:!0,get:function(){return O.getTextContext}});var M=i(118);Object.defineProperty(e,"AssignEvent",{enumerable:!0,get:function(){return M.AssignEvent}}),r(i(119),e);var P=i(120);Object.defineProperty(e,"distinctScan",{enumerable:!0,get:function(){return P.distinctScan}});var j=i(121);Object.defineProperty(e,"setToStorage",{enumerable:!0,get:function(){return j.setToStorage}}),Object.defineProperty(e,"getFromStorage",{enumerable:!0,get:function(){return j.getFromStorage}});var R=i(122);Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return R.stringify}}),Object.defineProperty(e,"getCircularReplacer",{enumerable:!0,get:function(){return R.getCircularReplacer}});var I=i(123);Object.defineProperty(e,"ElementSizeChangeStream",{enumerable:!0,get:function(){return I.ElementSizeChangeStream}});var D=i(124);Object.defineProperty(e,"createShadow",{enumerable:!0,get:function(){return D.createShadow}});var L=i(125);Object.defineProperty(e,"forcePlay",{enumerable:!0,get:function(){return L.forcePlay}});var N=i(126);Object.defineProperty(e,"CrossOrigin",{enumerable:!0,get:function(){return N.CrossOrigin}}),Object.defineProperty(e,"changeCrossOrigin",{enumerable:!0,get:function(){return N.changeCrossOrigin}}),Object.defineProperty(e,"checkEfficiency",{enumerable:!0,get:function(){return N.checkEfficiency}});var V=i(92);Object.defineProperty(e,"resetMedia",{enumerable:!0,get:function(){return V.resetMedia}});var U=i(127);Object.defineProperty(e,"FullscreenApi",{enumerable:!0,get:function(){return U.FullscreenApi}});var $=i(128);Object.defineProperty(e,"intersection",{enumerable:!0,get:function(){return $.intersection}}),r(i(129),e);var B=i(130);Object.defineProperty(e,"GUID",{enumerable:!0,get:function(){return B.GUID}}),e.iframeAttr={allowfullscreen:"true",allowtransparency:"true",frameborder:"0",hidefocus:"true",marginheight:"0",marginwidth:"0",mozallowfullscreen:"true",msallowfullscreen:"true",oallowfullscreen:"true",scrolling:"no",tabindex:"-1",webkitallowfullscreen:"true"}},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(10),r=i(57),s=i(30),o=i(45),a=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var i=this,a=i._parentOrParents,u=i._ctorUnsubscribe,h=i._unsubscribe,l=i._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof t)a.remove(this);else if(null!==a)for(var d=0;d<a.length;++d){a[d].remove(this)}if(Object(s.a)(h)){u&&(this._unsubscribe=void 0);try{h.call(this)}catch(t){e=t instanceof o.a?c(t.errors):[t]}}if(Object(n.a)(l)){d=-1;for(var p=l.length;++d<p;){var f=l[d];if(Object(r.a)(f))try{f.unsubscribe()}catch(t){e=e||[],t instanceof o.a?e=e.concat(c(t.errors)):e.push(t)}}}if(e)throw new o.a(e)}},t.prototype.add=function(e){var i=e;if(!e)return t.EMPTY;switch(typeof e){case"function":i=new t(e);case"object":if(i===this||i.closed||"function"!==typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof t)){var n=i;(i=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=i._parentOrParents;if(null===r)i._parentOrParents=this;else if(r instanceof t){if(r===this)return i;i._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return i;r.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[i]:s.push(i),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function c(t){return t.reduce((function(t,e){return t.concat(e instanceof o.a?e.errors:e)}),[])}},function(t,e,i){"use strict";i.r(e),i.d(e,"audit",(function(){return s})),i.d(e,"auditTime",(function(){return h})),i.d(e,"buffer",(function(){return l})),i.d(e,"bufferCount",(function(){return m})),i.d(e,"bufferTime",(function(){return w})),i.d(e,"bufferToggle",(function(){return M})),i.d(e,"bufferWhen",(function(){return R})),i.d(e,"catchError",(function(){return L})),i.d(e,"combineAll",(function(){return $})),i.d(e,"combineLatest",(function(){return W})),i.d(e,"concat",(function(){return q})),i.d(e,"concatAll",(function(){return G.a})),i.d(e,"concatMap",(function(){return X})),i.d(e,"concatMapTo",(function(){return Y})),i.d(e,"count",(function(){return K})),i.d(e,"debounce",(function(){return Z})),i.d(e,"debounceTime",(function(){return it})),i.d(e,"defaultIfEmpty",(function(){return ot})),i.d(e,"delay",(function(){return lt})),i.d(e,"delayWhen",(function(){return bt})),i.d(e,"dematerialize",(function(){return St})),i.d(e,"distinct",(function(){return Tt})),i.d(e,"distinctUntilChanged",(function(){return Ct})),i.d(e,"distinctUntilKeyChanged",(function(){return Mt})),i.d(e,"elementAt",(function(){return Ft})),i.d(e,"endWith",(function(){return Ht})),i.d(e,"every",(function(){return qt})),i.d(e,"exhaust",(function(){return Xt})),i.d(e,"exhaustMap",(function(){return Jt})),i.d(e,"expand",(function(){return ee})),i.d(e,"filter",(function(){return jt.a})),i.d(e,"finalize",(function(){return re})),i.d(e,"find",(function(){return ae})),i.d(e,"findIndex",(function(){return he})),i.d(e,"first",(function(){return de})),i.d(e,"groupBy",(function(){return pe.b})),i.d(e,"ignoreElements",(function(){return fe})),i.d(e,"isEmpty",(function(){return ge})),i.d(e,"last",(function(){return Ee})),i.d(e,"map",(function(){return Qt.a})),i.d(e,"mapTo",(function(){return Te})),i.d(e,"materialize",(function(){return Ce})),i.d(e,"max",(function(){return De})),i.d(e,"merge",(function(){return Ne})),i.d(e,"mergeAll",(function(){return Ve.a})),i.d(e,"mergeMap",(function(){return z.b})),i.d(e,"flatMap",(function(){return z.a})),i.d(e,"mergeMapTo",(function(){return Ue})),i.d(e,"mergeScan",(function(){return $e})),i.d(e,"min",(function(){return We})),i.d(e,"multicast",(function(){return qe})),i.d(e,"observeOn",(function(){return ze.b})),i.d(e,"onErrorResumeNext",(function(){return Xe})),i.d(e,"pairwise",(function(){return Qe})),i.d(e,"partition",(function(){return ei})),i.d(e,"pluck",(function(){return ii})),i.d(e,"publish",(function(){return si})),i.d(e,"publishBehavior",(function(){return ai})),i.d(e,"publishLast",(function(){return ui})),i.d(e,"publishReplay",(function(){return li})),i.d(e,"race",(function(){return pi})),i.d(e,"reduce",(function(){return Ie})),i.d(e,"repeat",(function(){return fi})),i.d(e,"repeatWhen",(function(){return gi})),i.d(e,"retry",(function(){return wi})),i.d(e,"retryWhen",(function(){return Ei})),i.d(e,"refCount",(function(){return xi.a})),i.d(e,"sample",(function(){return Ci})),i.d(e,"sampleTime",(function(){return Mi})),i.d(e,"scan",(function(){return Me})),i.d(e,"sequenceEqual",(function(){return Ii})),i.d(e,"share",(function(){return Ui})),i.d(e,"shareReplay",(function(){return $i})),i.d(e,"single",(function(){return Bi})),i.d(e,"skip",(function(){return Hi})),i.d(e,"skipLast",(function(){return zi})),i.d(e,"skipUntil",(function(){return Ki})),i.d(e,"skipWhile",(function(){return Zi})),i.d(e,"startWith",(function(){return nn})),i.d(e,"subscribeOn",(function(){return an})),i.d(e,"switchAll",(function(){return dn})),i.d(e,"switchMap",(function(){return un})),i.d(e,"switchMapTo",(function(){return pn})),i.d(e,"take",(function(){return Ut})),i.d(e,"takeLast",(function(){return we})),i.d(e,"takeUntil",(function(){return fn})),i.d(e,"takeWhile",(function(){return gn})),i.d(e,"tap",(function(){return _n})),i.d(e,"throttle",(function(){return xn})),i.d(e,"throttleTime",(function(){return On})),i.d(e,"throwIfEmpty",(function(){return It})),i.d(e,"timeInterval",(function(){return In})),i.d(e,"timeout",(function(){return Bn})),i.d(e,"timeoutWith",(function(){return Nn})),i.d(e,"timestamp",(function(){return Fn})),i.d(e,"toArray",(function(){return qn})),i.d(e,"window",(function(){return Gn})),i.d(e,"windowCount",(function(){return Yn})),i.d(e,"windowTime",(function(){return Jn})),i.d(e,"windowToggle",(function(){return sr})),i.d(e,"windowWhen",(function(){return cr})),i.d(e,"withLatestFrom",(function(){return lr})),i.d(e,"zip",(function(){return mr})),i.d(e,"zipAll",(function(){return br}));var n=i(0),r=i(2);function s(t){return function(e){return e.lift(new o(t))}}var o=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector))},t}(),a=function(t){function e(e,i){var n=t.call(this,e)||this;return n.durationSelector=i,n.hasValue=!1,n}return n.a(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=void 0;try{e=(0,this.durationSelector)(t)}catch(t){return this.destination.error(t)}var i=Object(r.c)(e,new r.a(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}},e.prototype.clearThrottle=function(){var t=this,e=t.value,i=t.hasValue,n=t.throttled;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))},e.prototype.notifyNext=function(){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(r.b),c=i(9),u=i(77);function h(t,e){return void 0===e&&(e=c.a),s((function(){return Object(u.a)(t,e)}))}function l(t){return function(e){return e.lift(new d(t))}}var d=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.closingNotifier))},t}(),p=function(t){function e(e,i){var n=t.call(this,e)||this;return n.buffer=[],n.add(Object(r.c)(i,new r.a(n))),n}return n.a(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(){var t=this.buffer;this.buffer=[],this.destination.next(t)},e}(r.b),f=i(1);function m(t,e){return void 0===e&&(e=null),function(i){return i.lift(new b(t,e))}}var b=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?v:g}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),g=function(t){function e(e,i){var n=t.call(this,e)||this;return n.bufferSize=i,n.buffer=[],n}return n.a(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(f.a),v=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.bufferSize=i,r.startBufferEvery=n,r.buffers=[],r.count=0,r}return n.a(e,t),e.prototype._next=function(t){var e=this,i=e.bufferSize,n=e.startBufferEvery,r=e.buffers,s=e.count;this.count++,s%n===0&&r.push([]);for(var o=r.length;o--;){var a=r[o];a.push(t),a.length===i&&(r.splice(o,1),this.destination.next(a))}},e.prototype._complete=function(){for(var e=this.buffers,i=this.destination;e.length>0;){var n=e.shift();n.length>0&&i.next(n)}t.prototype._complete.call(this)},e}(f.a),y=i(13);function w(t){var e=arguments.length,i=c.a;Object(y.a)(arguments[arguments.length-1])&&(i=arguments[arguments.length-1],e--);var n=null;e>=2&&(n=arguments[1]);var r=Number.POSITIVE_INFINITY;return e>=3&&(r=arguments[2]),function(e){return e.lift(new S(t,n,r,i))}}var S=function(){function t(t,e,i,n){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=i,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new E(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),_=function(){return function(){this.buffer=[]}}(),E=function(t){function e(e,i,n,r,s){var o=t.call(this,e)||this;o.bufferTimeSpan=i,o.bufferCreationInterval=n,o.maxBufferSize=r,o.scheduler=s,o.contexts=[];var a=o.openContext();if(o.timespanOnly=null==n||n<0,o.timespanOnly){var c={subscriber:o,context:a,bufferTimeSpan:i};o.add(a.closeAction=s.schedule(T,i,c))}else{var u={subscriber:o,context:a},h={bufferTimeSpan:i,bufferCreationInterval:n,subscriber:o,scheduler:s};o.add(a.closeAction=s.schedule(x,i,u)),o.add(s.schedule(A,n,h))}return o}return n.a(e,t),e.prototype._next=function(t){for(var e,i=this.contexts,n=i.length,r=0;r<n;r++){var s=i[r],o=s.buffer;o.push(t),o.length==this.maxBufferSize&&(e=s)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,i=this.destination;e.length>0;){var n=e.shift();i.next(n.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var i=this.bufferTimeSpan,n={subscriber:this,context:t,bufferTimeSpan:i};this.add(t.closeAction=this.scheduler.schedule(T,i,n))}},e.prototype.openContext=function(){var t=new _;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(f.a);function T(t){var e=t.subscriber,i=t.context;i&&e.closeContext(i),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function A(t){var e=t.bufferCreationInterval,i=t.bufferTimeSpan,n=t.subscriber,r=t.scheduler,s=n.openContext();n.closed||(n.add(s.closeAction=r.schedule(x,i,{subscriber:n,context:s})),this.schedule(t,e))}function x(t){var e=t.subscriber,i=t.context;e.closeContext(i)}var C=i(6),k=i(16),O=i(19);function M(t,e){return function(i){return i.lift(new P(t,e))}}var P=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new j(t,this.openings,this.closingSelector))},t}(),j=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.closingSelector=n,r.contexts=[],r.add(Object(k.a)(r,i)),r}return n.a(e,t),e.prototype._next=function(t){for(var e=this.contexts,i=e.length,n=0;n<i;n++)e[n].buffer.push(t)},e.prototype._error=function(e){for(var i=this.contexts;i.length>0;){var n=i.shift();n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var i=e.shift();this.destination.next(i.buffer),i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var i=t.buffer,n=t.subscription;this.destination.next(i),e.splice(e.indexOf(t),1),this.remove(n),n.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,i=new C.a,n={buffer:[],subscription:i};e.push(n);var r=Object(k.a)(this,t,n);!r||r.closed?this.closeBuffer(n):(r.context=n,this.add(r),i.add(r))},e}(O.a);function R(t){return function(e){return e.lift(new I(t))}}var I=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new D(t,this.closingSelector))},t}(),D=function(t){function e(e,i){var n=t.call(this,e)||this;return n.closingSelector=i,n.subscribing=!1,n.openBuffer(),n}return n.a(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},e.prototype.notifyNext=function(){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e,i=this.buffer;this.buffer&&this.destination.next(i),this.buffer=[];try{e=(0,this.closingSelector)()}catch(t){return this.error(t)}t=new C.a,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(Object(r.c)(e,new r.a(this))),this.subscribing=!1},e}(r.b);function L(t){return function(e){var i=new N(t),n=e.lift(i);return i.caught=n}}var N=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new V(t,this.selector,this.caught))},t}(),V=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.selector=i,r.caught=n,r}return n.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var i=void 0;try{i=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var n=new r.a(this);this.add(n);var s=Object(r.c)(i,n);s!==n&&this.add(s)}},e}(r.b),U=i(53);function $(t){return function(e){return e.lift(new U.a(t))}}var B=i(10),F=i(15);function W(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=null;return"function"===typeof t[t.length-1]&&(i=t.pop()),1===t.length&&Object(B.a)(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(Object(F.a)([e].concat(t)),new U.a(i))}}var H=i(38);function q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(H.a.apply(void 0,[e].concat(t)))}}var G=i(74),z=i(32);function X(t,e){return Object(z.b)(t,e,1)}function Y(t,e){return X((function(){return t}),e)}function K(t){return function(e){return e.lift(new Q(t,e))}}var Q=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new J(t,this.predicate,this.source))},t}(),J=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.predicate=i,r.source=n,r.count=0,r.index=0,r}return n.a(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(f.a);function Z(t){return function(e){return e.lift(new tt(t))}}var tt=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new et(t,this.durationSelector))},t}(),et=function(t){function e(e,i){var n=t.call(this,e)||this;return n.durationSelector=i,n.hasValue=!1,n}return n.a(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var i=this.durationSubscription;this.value=t,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),(i=Object(r.c)(e,new r.a(this)))&&!i.closed&&this.add(this.durationSubscription=i)},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,i=this.durationSubscription;i&&(this.durationSubscription=void 0,i.unsubscribe(),this.remove(i)),this.value=void 0,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(r.b);function it(t,e){return void 0===e&&(e=c.a),function(i){return i.lift(new nt(t,e))}}var nt=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new rt(t,this.dueTime,this.scheduler))},t}(),rt=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.dueTime=i,r.scheduler=n,r.debouncedSubscription=null,r.lastValue=null,r.hasValue=!1,r}return n.a(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(st,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(f.a);function st(t){t.debouncedNext()}function ot(t){return void 0===t&&(t=null),function(e){return e.lift(new at(t))}}var at=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new ct(t,this.defaultValue))},t}(),ct=function(t){function e(e,i){var n=t.call(this,e)||this;return n.defaultValue=i,n.isEmpty=!0,n}return n.a(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(f.a);function ut(t){return t instanceof Date&&!isNaN(+t)}var ht=i(21);function lt(t,e){void 0===e&&(e=c.a);var i=ut(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new dt(i,e))}}var dt=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new pt(t,this.delay,this.scheduler))},t}(),pt=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.delay=i,r.scheduler=n,r.queue=[],r.active=!1,r.errored=!1,r}return n.a(e,t),e.dispatch=function(t){for(var e=t.source,i=e.queue,n=t.scheduler,r=t.destination;i.length>0&&i[0].time-n.now()<=0;)i.shift().notification.observe(r);if(i.length>0){var s=Math.max(0,i[0].time-n.now());this.schedule(t,s)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,i=new ft(e.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(ht.a.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(ht.a.createComplete()),this.unsubscribe()},e}(f.a),ft=function(){return function(t,e){this.time=t,this.notification=e}}(),mt=i(3);function bt(t,e){return e?function(i){return new yt(i,e).lift(new gt(t))}:function(e){return e.lift(new gt(t))}}var gt=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new vt(t,this.delayDurationSelector))},t}(),vt=function(t){function e(e,i){var n=t.call(this,e)||this;return n.delayDurationSelector=i,n.completed=!1,n.delayNotifierSubscriptions=[],n.index=0,n}return n.a(e,t),e.prototype.notifyNext=function(t,e,i,n,r){this.destination.next(t),this.removeSubscription(r),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){var e=this.index++;try{var i=this.delayDurationSelector(t,e);i&&this.tryDelay(i,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},e.prototype.tryDelay=function(t,e){var i=Object(k.a)(this,t,e);i&&!i.closed&&(this.destination.add(i),this.delayNotifierSubscriptions.push(i))},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(O.a),yt=function(t){function e(e,i){var n=t.call(this)||this;return n.source=e,n.subscriptionDelay=i,n}return n.a(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new wt(t,this.source))},e}(mt.a),wt=function(t){function e(e,i){var n=t.call(this)||this;return n.parent=e,n.source=i,n.sourceSubscribed=!1,n}return n.a(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(f.a);function St(){return function(t){return t.lift(new _t)}}var _t=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Et(t))},t}(),Et=function(t){function e(e){return t.call(this,e)||this}return n.a(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(f.a);function Tt(t,e){return function(i){return i.lift(new At(t,e))}}var At=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new xt(t,this.keySelector,this.flushes))},t}(),xt=function(t){function e(e,i,n){var s=t.call(this,e)||this;return s.keySelector=i,s.values=new Set,n&&s.add(Object(r.c)(n,new r.a(s))),s}return n.a(e,t),e.prototype.notifyNext=function(){this.values.clear()},e.prototype.notifyError=function(t){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,i=this.destination;try{e=this.keySelector(t)}catch(t){return void i.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var i=this.values;i.has(t)||(i.add(t),this.destination.next(e))},e}(r.b);function Ct(t,e){return function(i){return i.lift(new kt(t,e))}}var kt=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Ot(t,this.compare,this.keySelector))},t}(),Ot=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.keySelector=n,r.hasKey=!1,"function"===typeof i&&(r.compare=i),r}return n.a(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var i=this.keySelector;e=i?i(t):t}catch(t){return this.destination.error(t)}var n=!1;if(this.hasKey)try{n=(0,this.compare)(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))},e}(f.a);function Mt(t,e){return Ct((function(i,n){return e?e(i[t],n[t]):i[t]===n[t]}))}var Pt=i(29),jt=i(20),Rt=i(31);function It(t){return void 0===t&&(t=Nt),function(e){return e.lift(new Dt(t))}}var Dt=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new Lt(t,this.errorFactory))},t}(),Lt=function(t){function e(e,i){var n=t.call(this,e)||this;return n.errorFactory=i,n.hasValue=!1,n}return n.a(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(f.a);function Nt(){return new Rt.a}var Vt=i(14);function Ut(t){return function(e){return 0===t?Object(Vt.b)():e.lift(new $t(t))}}var $t=function(){function t(t){if(this.total=t,this.total<0)throw new Pt.a}return t.prototype.call=function(t,e){return e.subscribe(new Bt(t,this.total))},t}(),Bt=function(t){function e(e,i){var n=t.call(this,e)||this;return n.total=i,n.count=0,n}return n.a(e,t),e.prototype._next=function(t){var e=this.total,i=++this.count;i<=e&&(this.destination.next(t),i===e&&(this.destination.complete(),this.unsubscribe()))},e}(f.a);function Ft(t,e){if(t<0)throw new Pt.a;var i=arguments.length>=2;return function(n){return n.pipe(Object(jt.a)((function(e,i){return i===t})),Ut(1),i?ot(e):It((function(){return new Pt.a})))}}var Wt=i(41);function Ht(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return Object(H.a)(e,Wt.a.apply(void 0,t))}}function qt(t,e){return function(i){return i.lift(new Gt(t,e,i))}}var Gt=function(){function t(t,e,i){this.predicate=t,this.thisArg=e,this.source=i}return t.prototype.call=function(t,e){return e.subscribe(new zt(t,this.predicate,this.thisArg,this.source))},t}(),zt=function(t){function e(e,i,n,r){var s=t.call(this,e)||this;return s.predicate=i,s.thisArg=n,s.source=r,s.index=0,s.thisArg=n||s,s}return n.a(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(f.a);function Xt(){return function(t){return t.lift(new Yt)}}var Yt=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Kt(t))},t}(),Kt=function(t){function e(e){var i=t.call(this,e)||this;return i.hasCompleted=!1,i.hasSubscription=!1,i}return n.a(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(r.c)(t,new r.a(this))))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(r.b),Qt=i(11);function Jt(t,e){return e?function(i){return i.pipe(Jt((function(i,n){return Object(F.a)(t(i,n)).pipe(Object(Qt.a)((function(t,r){return e(i,t,n,r)})))})))}:function(e){return e.lift(new Zt(t))}}var Zt=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new te(t,this.project))},t}(),te=function(t){function e(e,i){var n=t.call(this,e)||this;return n.project=i,n.hasSubscription=!1,n.hasCompleted=!1,n.index=0,n}return n.a(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this.hasSubscription=!0,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new r.a(this),i=this.destination;i.add(e);var n=Object(r.c)(t,e);n!==e&&i.add(n)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(r.b);function ee(t,e,i){return void 0===e&&(e=Number.POSITIVE_INFINITY),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(n){return n.lift(new ie(t,e,i))}}var ie=function(){function t(t,e,i){this.project=t,this.concurrent=e,this.scheduler=i}return t.prototype.call=function(t,e){return e.subscribe(new ne(t,this.project,this.concurrent,this.scheduler))},t}(),ne=function(t){function e(e,i,n,r){var s=t.call(this,e)||this;return s.project=i,s.concurrent=n,s.scheduler=r,s.index=0,s.active=0,s.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(s.buffer=[]),s}return n.a(e,t),e.dispatch=function(t){var e=t.subscriber,i=t.result,n=t.value,r=t.index;e.subscribeToProjection(i,n,r)},e.prototype._next=function(t){var i=this.destination;if(i.closed)this._complete();else{var n=this.index++;if(this.active<this.concurrent){i.next(t);try{var r=(0,this.project)(t,n);if(this.scheduler){var s={subscriber:this,result:r,value:t,index:n};this.destination.add(this.scheduler.schedule(e.dispatch,0,s))}else this.subscribeToProjection(r,t,n)}catch(t){i.error(t)}}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,i){this.active++,this.destination.add(Object(r.c)(t,new r.a(this)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this._next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(r.b);function re(t){return function(e){return e.lift(new se(t))}}var se=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new oe(t,this.callback))},t}(),oe=function(t){function e(e,i){var n=t.call(this,e)||this;return n.add(new C.a(i)),n}return n.a(e,t),e}(f.a);function ae(t,e){if("function"!==typeof t)throw new TypeError("predicate is not a function");return function(i){return i.lift(new ce(t,i,!1,e))}}var ce=function(){function t(t,e,i,n){this.predicate=t,this.source=e,this.yieldIndex=i,this.thisArg=n}return t.prototype.call=function(t,e){return e.subscribe(new ue(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),ue=function(t){function e(e,i,n,r,s){var o=t.call(this,e)||this;return o.predicate=i,o.source=n,o.yieldIndex=r,o.thisArg=s,o.index=0,o}return n.a(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},e.prototype._next=function(t){var e=this.predicate,i=this.thisArg,n=this.index++;try{e.call(i||this,t,n,this.source)&&this.notifyComplete(this.yieldIndex?n:t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(f.a);function he(t,e){return function(i){return i.lift(new ce(t,i,!0,e))}}var le=i(18);function de(t,e){var i=arguments.length>=2;return function(n){return n.pipe(t?Object(jt.a)((function(e,i){return t(e,i,n)})):le.a,Ut(1),i?ot(e):It((function(){return new Rt.a})))}}var pe=i(68);function fe(){return function(t){return t.lift(new me)}}var me=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new be(t))},t}(),be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.a(e,t),e.prototype._next=function(t){},e}(f.a);function ge(){return function(t){return t.lift(new ve)}}var ve=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ye(t))},t}(),ye=function(t){function e(e){return t.call(this,e)||this}return n.a(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(f.a);function we(t){return function(e){return 0===t?Object(Vt.b)():e.lift(new Se(t))}}var Se=function(){function t(t){if(this.total=t,this.total<0)throw new Pt.a}return t.prototype.call=function(t,e){return e.subscribe(new _e(t,this.total))},t}(),_e=function(t){function e(e,i){var n=t.call(this,e)||this;return n.total=i,n.ring=new Array,n.count=0,n}return n.a(e,t),e.prototype._next=function(t){var e=this.ring,i=this.total,n=this.count++;e.length<i?e.push(t):e[n%i]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var i=this.count>=this.total?this.total:this.count,n=this.ring,r=0;r<i;r++){var s=e++%i;t.next(n[s])}t.complete()},e}(f.a);function Ee(t,e){var i=arguments.length>=2;return function(n){return n.pipe(t?Object(jt.a)((function(e,i){return t(e,i,n)})):le.a,we(1),i?ot(e):It((function(){return new Rt.a})))}}function Te(t){return function(e){return e.lift(new Ae(t))}}var Ae=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new xe(t,this.value))},t}(),xe=function(t){function e(e,i){var n=t.call(this,e)||this;return n.value=i,n}return n.a(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(f.a);function Ce(){return function(t){return t.lift(new ke)}}var ke=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Oe(t))},t}(),Oe=function(t){function e(e){return t.call(this,e)||this}return n.a(e,t),e.prototype._next=function(t){this.destination.next(ht.a.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(ht.a.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(ht.a.createComplete()),t.complete()},e}(f.a);function Me(t,e){var i=!1;return arguments.length>=2&&(i=!0),function(n){return n.lift(new Pe(t,e,i))}}var Pe=function(){function t(t,e,i){void 0===i&&(i=!1),this.accumulator=t,this.seed=e,this.hasSeed=i}return t.prototype.call=function(t,e){return e.subscribe(new je(t,this.accumulator,this.seed,this.hasSeed))},t}(),je=function(t){function e(e,i,n,r){var s=t.call(this,e)||this;return s.accumulator=i,s._seed=n,s.hasSeed=r,s.index=0,s}return n.a(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.accumulator(this.seed,t,i)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(f.a),Re=i(42);function Ie(t,e){return arguments.length>=2?function(i){return Object(Re.a)(Me(t,e),we(1),ot(e))(i)}:function(e){return Object(Re.a)(Me((function(e,i,n){return t(e,i,n+1)})),we(1))(e)}}function De(t){return Ie("function"===typeof t?function(e,i){return t(e,i)>0?e:i}:function(t,e){return t>e?t:e})}var Le=i(75);function Ne(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(Le.a.apply(void 0,[e].concat(t)))}}var Ve=i(54);function Ue(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"===typeof e?Object(z.b)((function(){return t}),e,i):("number"===typeof e&&(i=e),Object(z.b)((function(){return t}),i))}function $e(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),function(n){return n.lift(new Be(t,e,i))}}var Be=function(){function t(t,e,i){this.accumulator=t,this.seed=e,this.concurrent=i}return t.prototype.call=function(t,e){return e.subscribe(new Fe(t,this.accumulator,this.seed,this.concurrent))},t}(),Fe=function(t){function e(e,i,n,r){var s=t.call(this,e)||this;return s.accumulator=i,s.acc=n,s.concurrent=r,s.hasValue=!1,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return n.a(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,i=this.destination,n=void 0;try{n=(0,this.accumulator)(this.acc,t,e)}catch(t){return i.error(t)}this.active++,this._innerSub(n)}else this.buffer.push(t)},e.prototype._innerSub=function(t){var e=new r.a(this),i=this.destination;i.add(e);var n=Object(r.c)(t,e);n!==e&&i.add(n)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(t){var e=this.destination;this.acc=t,this.hasValue=!0,e.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(r.b);function We(t){return Ie("function"===typeof t?function(e,i){return t(e,i)<0?e:i}:function(t,e){return t<e?t:e})}var He=i(70);function qe(t,e){return function(i){var n;if(n="function"===typeof t?t:function(){return t},"function"===typeof e)return i.lift(new Ge(n,e));var r=Object.create(i,He.b);return r.source=i,r.subjectFactory=n,r}}var Ge=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var i=this.selector,n=this.subjectFactory(),r=i(n).subscribe(t);return r.add(e.subscribe(n)),r},t}(),ze=i(72);function Xe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&Object(B.a)(t[0])&&(t=t[0]),function(e){return e.lift(new Ye(t))}}var Ye=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new Ke(t,this.nextSources))},t}(),Ke=function(t){function e(e,i){var n=t.call(this,e)||this;return n.destination=e,n.nextSources=i,n}return n.a(e,t),e.prototype.notifyError=function(){this.subscribeToNextSource()},e.prototype.notifyComplete=function(){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();if(t){var e=new r.a(this),i=this.destination;i.add(e);var n=Object(r.c)(t,e);n!==e&&i.add(n)}else this.destination.complete()},e}(r.b);function Qe(){return function(t){return t.lift(new Je)}}var Je=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Ze(t))},t}(),Ze=function(t){function e(e){var i=t.call(this,e)||this;return i.hasPrev=!1,i}return n.a(e,t),e.prototype._next=function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)},e}(f.a),ti=i(83);function ei(t,e){return function(i){return[Object(jt.a)(t,e)(i),Object(jt.a)(Object(ti.a)(t,e))(i)]}}function ii(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.length;if(0===i)throw new Error("list of properties cannot be empty.");return function(e){return Object(Qt.a)(ni(t,i))(e)}}function ni(t,e){return function(i){for(var n=i,r=0;r<e;r++){var s=null!=n?n[t[r]]:void 0;if(void 0===s)return;n=s}return n}}var ri=i(8);function si(t){return t?qe((function(){return new ri.a}),t):qe(new ri.a)}var oi=i(71);function ai(t){return function(e){return qe(new oi.a(t))(e)}}var ci=i(35);function ui(){return function(t){return qe(new ci.a)(t)}}var hi=i(51);function li(t,e,i,n){i&&"function"!==typeof i&&(n=i);var r="function"===typeof i?i:void 0,s=new hi.a(t,e,n);return function(t){return qe((function(){return s}),r)(t)}}var di=i(76);function pi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&Object(B.a)(t[0])&&(t=t[0]),e.lift.call(di.a.apply(void 0,[e].concat(t)))}}function fi(t){return void 0===t&&(t=-1),function(e){return 0===t?Object(Vt.b)():t<0?e.lift(new mi(-1,e)):e.lift(new mi(t-1,e))}}var mi=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new bi(t,this.count,this.source))},t}(),bi=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.count=i,r.source=n,r}return n.a(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,i=this.count;if(0===i)return t.prototype.complete.call(this);i>-1&&(this.count=i-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(f.a);function gi(t){return function(e){return e.lift(new vi(t))}}var vi=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new yi(t,this.notifier,e))},t}(),yi=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.notifier=i,r.source=n,r.sourceIsBeingSubscribedTo=!0,r}return n.a(e,t),e.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},e.prototype.subscribeToRetries=function(){var e;this.notifications=new ri.a;try{e=(0,this.notifier)(this.notifications)}catch(e){return t.prototype.complete.call(this)}this.retries=e,this.retriesSubscription=Object(r.c)(e,new r.a(this))},e}(r.b);function wi(t){return void 0===t&&(t=-1),function(e){return e.lift(new Si(t,e))}}var Si=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new _i(t,this.count,this.source))},t}(),_i=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.count=i,r.source=n,r}return n.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var i=this.source,n=this.count;if(0===n)return t.prototype.error.call(this,e);n>-1&&(this.count=n-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(f.a);function Ei(t){return function(e){return e.lift(new Ti(t,e))}}var Ti=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Ai(t,this.notifier,this.source))},t}(),Ai=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.notifier=i,r.source=n,r}return n.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var i=this.errors,n=this.retries,s=this.retriesSubscription;if(n)this.errors=void 0,this.retriesSubscription=void 0;else{i=new ri.a;try{n=(0,this.notifier)(i)}catch(e){return t.prototype.error.call(this,e)}s=Object(r.c)(n,new r.a(this))}this._unsubscribeAndRecycle(),this.errors=i,this.retries=n,this.retriesSubscription=s,i.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype.notifyNext=function(){var t=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)},e}(r.b),xi=i(50);function Ci(t){return function(e){return e.lift(new ki(t))}}var ki=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var i=new Oi(t),n=e.subscribe(i);return n.add(Object(r.c)(this.notifier,new r.a(i))),n},t}(),Oi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return n.a(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(r.b);function Mi(t,e){return void 0===e&&(e=c.a),function(i){return i.lift(new Pi(t,e))}}var Pi=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new ji(t,this.period,this.scheduler))},t}(),ji=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.period=i,r.scheduler=n,r.hasValue=!1,r.add(n.schedule(Ri,i,{subscriber:r,period:i})),r}return n.a(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(f.a);function Ri(t){var e=t.subscriber,i=t.period;e.notifyNext(),this.schedule(t,i)}function Ii(t,e){return function(i){return i.lift(new Di(t,e))}}var Di=function(){function t(t,e){this.compareTo=t,this.comparator=e}return t.prototype.call=function(t,e){return e.subscribe(new Li(t,this.compareTo,this.comparator))},t}(),Li=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.compareTo=i,r.comparator=n,r._a=[],r._b=[],r._oneComplete=!1,r.destination.add(i.subscribe(new Ni(e,r))),r}return n.a(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var t=this,e=t._a,i=t._b,n=t.comparator;e.length>0&&i.length>0;){var r=e.shift(),s=i.shift(),o=!1;try{o=n?n(r,s):r===s}catch(t){this.destination.error(t)}o||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e}(f.a),Ni=function(t){function e(e,i){var n=t.call(this,e)||this;return n.parent=i,n}return n.a(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(f.a);function Vi(){return new ri.a}function Ui(){return function(t){return Object(xi.a)()(qe(Vi)(t))}}function $i(t,e,i){var n;return n=t&&"object"===typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:i},function(t){return t.lift(function(t){var e,i,n=t.bufferSize,r=void 0===n?Number.POSITIVE_INFINITY:n,s=t.windowTime,o=void 0===s?Number.POSITIVE_INFINITY:s,a=t.refCount,c=t.scheduler,u=0,h=!1,l=!1;return function(t){var n;u++,!e||h?(h=!1,e=new hi.a(r,o,c),n=e.subscribe(this),i=t.subscribe({next:function(t){e.next(t)},error:function(t){h=!0,e.error(t)},complete:function(){l=!0,i=void 0,e.complete()}}),l&&(i=void 0)):n=e.subscribe(this),this.add((function(){u--,n.unsubscribe(),n=void 0,i&&!l&&a&&0===u&&(i.unsubscribe(),i=void 0,e=void 0)}))}}(n))}}function Bi(t){return function(e){return e.lift(new Fi(t,e))}}var Fi=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Wi(t,this.predicate,this.source))},t}(),Wi=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.predicate=i,r.source=n,r.seenValue=!1,r.index=0,r}return n.a(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new Rt.a)},e}(f.a);function Hi(t){return function(e){return e.lift(new qi(t))}}var qi=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new Gi(t,this.total))},t}(),Gi=function(t){function e(e,i){var n=t.call(this,e)||this;return n.total=i,n.count=0,n}return n.a(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(f.a);function zi(t){return function(e){return e.lift(new Xi(t))}}var Xi=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new Pt.a}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new f.a(t)):e.subscribe(new Yi(t,this._skipCount))},t}(),Yi=function(t){function e(e,i){var n=t.call(this,e)||this;return n._skipCount=i,n._count=0,n._ring=new Array(i),n}return n.a(e,t),e.prototype._next=function(t){var e=this._skipCount,i=this._count++;if(i<e)this._ring[i]=t;else{var n=i%e,r=this._ring,s=r[n];r[n]=t,this.destination.next(s)}},e}(f.a);function Ki(t){return function(e){return e.lift(new Qi(t))}}var Qi=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new Ji(t,this.notifier))},t}(),Ji=function(t){function e(e,i){var n=t.call(this,e)||this;n.hasValue=!1;var s=new r.a(n);n.add(s),n.innerSubscription=s;var o=Object(r.c)(i,s);return o!==s&&(n.add(o),n.innerSubscription=o),n}return n.a(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(r.b);function Zi(t){return function(e){return e.lift(new tn(t))}}var tn=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new en(t,this.predicate))},t}(),en=function(t){function e(e,i){var n=t.call(this,e)||this;return n.predicate=i,n.skipping=!0,n.index=0,n}return n.a(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(f.a);function nn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[t.length-1];return Object(y.a)(i)?(t.pop(),function(e){return Object(H.a)(t,e,i)}):function(e){return Object(H.a)(t,e)}}var rn=i(43),sn=i(37),on=function(t){function e(e,i,n){void 0===i&&(i=0),void 0===n&&(n=rn.a);var r=t.call(this)||this;return r.source=e,r.delayTime=i,r.scheduler=n,(!Object(sn.a)(i)||i<0)&&(r.delayTime=0),n&&"function"===typeof n.schedule||(r.scheduler=rn.a),r}return n.a(e,t),e.create=function(t,i,n){return void 0===i&&(i=0),void 0===n&&(n=rn.a),new e(t,i,n)},e.dispatch=function(t){var e=t.source,i=t.subscriber;return this.add(e.subscribe(i))},e.prototype._subscribe=function(t){var i=this.delayTime,n=this.source;return this.scheduler.schedule(e.dispatch,i,{source:n,subscriber:t})},e}(mt.a);function an(t,e){return void 0===e&&(e=0),function(i){return i.lift(new cn(t,e))}}var cn=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new on(e,this.delay,this.scheduler).subscribe(t)},t}();function un(t,e){return"function"===typeof e?function(i){return i.pipe(un((function(i,n){return Object(F.a)(t(i,n)).pipe(Object(Qt.a)((function(t,r){return e(i,t,n,r)})))})))}:function(e){return e.lift(new hn(t))}}var hn=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new ln(t,this.project))},t}(),ln=function(t){function e(e,i){var n=t.call(this,e)||this;return n.project=i,n.index=0,n}return n.a(e,t),e.prototype._next=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this._innerSub(e)},e.prototype._innerSub=function(t){var e=this.innerSubscription;e&&e.unsubscribe();var i=new r.a(this),n=this.destination;n.add(i),this.innerSubscription=Object(r.c)(t,i),this.innerSubscription!==i&&n.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t){this.destination.next(t)},e}(r.b);function dn(){return un(le.a)}function pn(t,e){return e?un((function(){return t}),e):un((function(){return t}))}function fn(t){return function(e){return e.lift(new mn(t))}}var mn=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var i=new bn(t),n=Object(r.c)(this.notifier,new r.a(i));return n&&!i.seenValue?(i.add(n),e.subscribe(i)):i},t}(),bn=function(t){function e(e){var i=t.call(this,e)||this;return i.seenValue=!1,i}return n.a(e,t),e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(r.b);function gn(t,e){return void 0===e&&(e=!1),function(i){return i.lift(new vn(t,e))}}var vn=function(){function t(t,e){this.predicate=t,this.inclusive=e}return t.prototype.call=function(t,e){return e.subscribe(new yn(t,this.predicate,this.inclusive))},t}(),yn=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.predicate=i,r.inclusive=n,r.index=0,r}return n.a(e,t),e.prototype._next=function(t){var e,i=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void i.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var i=this.destination;Boolean(e)?i.next(t):(this.inclusive&&i.next(t),i.complete())},e}(f.a),wn=i(25),Sn=i(30);function _n(t,e,i){return function(n){return n.lift(new En(t,e,i))}}var En=function(){function t(t,e,i){this.nextOrObserver=t,this.error=e,this.complete=i}return t.prototype.call=function(t,e){return e.subscribe(new Tn(t,this.nextOrObserver,this.error,this.complete))},t}(),Tn=function(t){function e(e,i,n,r){var s=t.call(this,e)||this;return s._tapNext=wn.a,s._tapError=wn.a,s._tapComplete=wn.a,s._tapError=n||wn.a,s._tapComplete=r||wn.a,Object(Sn.a)(i)?(s._context=s,s._tapNext=i):i&&(s._context=i,s._tapNext=i.next||wn.a,s._tapError=i.error||wn.a,s._tapComplete=i.complete||wn.a),s}return n.a(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(f.a),An={leading:!0,trailing:!1};function xn(t,e){return void 0===e&&(e=An),function(i){return i.lift(new Cn(t,!!e.leading,!!e.trailing))}}var Cn=function(){function t(t,e,i){this.durationSelector=t,this.leading=e,this.trailing=i}return t.prototype.call=function(t,e){return e.subscribe(new kn(t,this.durationSelector,this.leading,this.trailing))},t}(),kn=function(t){function e(e,i,n,r){var s=t.call(this,e)||this;return s.destination=e,s.durationSelector=i,s._leading=n,s._trailing=r,s._hasValue=!1,s}return n.a(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=Object(r.c)(e,new r.a(this)))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},e.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=void 0,e&&this.send()},e.prototype.notifyNext=function(){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(r.b);function On(t,e,i){return void 0===e&&(e=c.a),void 0===i&&(i=An),function(n){return n.lift(new Mn(t,e,i.leading,i.trailing))}}var Mn=function(){function t(t,e,i,n){this.duration=t,this.scheduler=e,this.leading=i,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new Pn(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),Pn=function(t){function e(e,i,n,r,s){var o=t.call(this,e)||this;return o.duration=i,o.scheduler=n,o.leading=r,o.trailing=s,o._hasTrailingValue=!1,o._trailingValue=null,o}return n.a(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(jn,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(f.a);function jn(t){t.subscriber.clearThrottle()}var Rn=i(55);function In(t){return void 0===t&&(t=c.a),function(e){return Object(Rn.a)((function(){return e.pipe(Me((function(e,i){var n=e.current;return{value:i,current:t.now(),last:n}}),{current:t.now(),value:void 0,last:void 0}),Object(Qt.a)((function(t){var e=t.current,i=t.last,n=t.value;return new Dn(n,e-i)})))}))}}var Dn=function(){return function(t,e){this.value=t,this.interval=e}}(),Ln=i(73);function Nn(t,e,i){return void 0===i&&(i=c.a),function(n){var r=ut(t),s=r?+t-i.now():Math.abs(t);return n.lift(new Vn(s,r,e,i))}}var Vn=function(){function t(t,e,i,n){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=i,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new Un(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),Un=function(t){function e(e,i,n,r,s){var o=t.call(this,e)||this;return o.absoluteTimeout=i,o.waitFor=n,o.withObservable=r,o.scheduler=s,o.scheduleTimeout(),o}return n.a(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Object(r.c)(e,new r.a(t)))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(r.b),$n=i(52);function Bn(t,e){return void 0===e&&(e=c.a),Nn(t,Object($n.a)(new Ln.a),e)}function Fn(t){return void 0===t&&(t=c.a),Object(Qt.a)((function(e){return new Wn(e,t.now())}))}var Wn=function(){return function(t,e){this.value=t,this.timestamp=e}}();function Hn(t,e,i){return 0===i?[e]:(t.push(e),t)}function qn(){return Ie(Hn,[])}function Gn(t){return function(e){return e.lift(new zn(t))}}var zn=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var i=new Xn(t),n=e.subscribe(i);return n.closed||i.add(Object(r.c)(this.windowBoundaries,new r.a(i))),n},t}(),Xn=function(t){function e(e){var i=t.call(this,e)||this;return i.window=new ri.a,e.next(i.window),i}return n.a(e,t),e.prototype.notifyNext=function(){this.openWindow()},e.prototype.notifyError=function(t){this._error(t)},e.prototype.notifyComplete=function(){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,i=this.window=new ri.a;e.next(i)},e}(r.b);function Yn(t,e){return void 0===e&&(e=0),function(i){return i.lift(new Kn(t,e))}}var Kn=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new Qn(t,this.windowSize,this.startWindowEvery))},t}(),Qn=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.destination=e,r.windowSize=i,r.startWindowEvery=n,r.windows=[new ri.a],r.count=0,e.next(r.windows[0]),r}return n.a(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,n=this.windowSize,r=this.windows,s=r.length,o=0;o<s&&!this.closed;o++)r[o].next(t);var a=this.count-n+1;if(a>=0&&a%e===0&&!this.closed&&r.shift().complete(),++this.count%e===0&&!this.closed){var c=new ri.a;r.push(c),i.next(c)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(f.a);function Jn(t){var e=c.a,i=null,n=Number.POSITIVE_INFINITY;return Object(y.a)(arguments[3])&&(e=arguments[3]),Object(y.a)(arguments[2])?e=arguments[2]:Object(sn.a)(arguments[2])&&(n=Number(arguments[2])),Object(y.a)(arguments[1])?e=arguments[1]:Object(sn.a)(arguments[1])&&(i=Number(arguments[1])),function(r){return r.lift(new Zn(t,i,n,e))}}var Zn=function(){function t(t,e,i,n){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=i,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new er(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),tr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return n.a(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(ri.a),er=function(t){function e(e,i,n,r,s){var o=t.call(this,e)||this;o.destination=e,o.windowTimeSpan=i,o.windowCreationInterval=n,o.maxWindowSize=r,o.scheduler=s,o.windows=[];var a=o.openWindow();if(null!==n&&n>=0){var c={subscriber:o,window:a,context:null},u={windowTimeSpan:i,windowCreationInterval:n,subscriber:o,scheduler:s};o.add(s.schedule(rr,i,c)),o.add(s.schedule(nr,n,u))}else{var h={subscriber:o,window:a,windowTimeSpan:i};o.add(s.schedule(ir,i,h))}return o}return n.a(e,t),e.prototype._next=function(t){for(var e=this.windows,i=e.length,n=0;n<i;n++){var r=e[n];r.closed||(r.next(t),r.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(r))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new tr;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(f.a);function ir(t){var e=t.subscriber,i=t.windowTimeSpan,n=t.window;n&&e.closeWindow(n),t.window=e.openWindow(),this.schedule(t,i)}function nr(t){var e=t.windowTimeSpan,i=t.subscriber,n=t.scheduler,r=t.windowCreationInterval,s=i.openWindow(),o=this,a={action:o,subscription:null},c={subscriber:i,window:s,context:a};a.subscription=n.schedule(rr,e,c),o.add(a.subscription),o.schedule(t,r)}function rr(t){var e=t.subscriber,i=t.window,n=t.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),e.closeWindow(i)}function sr(t,e){return function(i){return i.lift(new or(t,e))}}var or=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new ar(t,this.openings,this.closingSelector))},t}(),ar=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.openings=i,r.closingSelector=n,r.contexts=[],r.add(r.openSubscription=Object(k.a)(r,i,i)),r}return n.a(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var i=e.length,n=0;n<i;n++)e[n].window.next(t)},e.prototype._error=function(e){var i=this.contexts;if(this.contexts=null,i)for(var n=i.length,r=-1;++r<n;){var s=i[r];s.window.error(e),s.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var i=e.length,n=-1;++n<i;){var r=e[n];r.window.complete(),r.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,i=-1;++i<e;){var n=t[i];n.window.unsubscribe(),n.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,i,n,r){if(t===this.openings){var s=void 0;try{s=(0,this.closingSelector)(e)}catch(t){return this.error(t)}var o=new ri.a,a=new C.a,c={window:o,subscription:a};this.contexts.push(c);var u=Object(k.a)(this,s,c);u.closed?this.closeWindow(this.contexts.length-1):(u.context=c,a.add(u)),this.destination.next(o)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,i=e[t],n=i.window,r=i.subscription;e.splice(t,1),n.complete(),r.unsubscribe()}},e}(O.a);function cr(t){return function(e){return e.lift(new ur(t))}}var ur=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new hr(t,this.closingSelector))},t}(),hr=function(t){function e(e,i){var n=t.call(this,e)||this;return n.destination=e,n.closingSelector=i,n.openWindow(),n}return n.a(e,t),e.prototype.notifyNext=function(t,e,i,n,r){this.openWindow(r)},e.prototype.notifyError=function(t){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var i,n=this.window=new ri.a;this.destination.next(n);try{i=(0,this.closingSelector)()}catch(t){return this.destination.error(t),void this.window.error(t)}this.add(this.closingNotification=Object(k.a)(this,i))},e}(O.a);function lr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var i;"function"===typeof t[t.length-1]&&(i=t.pop());var n=t;return e.lift(new dr(n,i))}}var dr=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new pr(t,this.observables,this.project))},t}(),pr=function(t){function e(e,i,n){var r=t.call(this,e)||this;r.observables=i,r.project=n,r.toRespond=[];var s=i.length;r.values=new Array(s);for(var o=0;o<s;o++)r.toRespond.push(o);for(o=0;o<s;o++){var a=i[o];r.add(Object(k.a)(r,a,void 0,o))}return r}return n.a(e,t),e.prototype.notifyNext=function(t,e,i){this.values[i]=e;var n=this.toRespond;if(n.length>0){var r=n.indexOf(i);-1!==r&&n.splice(r,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(O.a),fr=i(56);function mr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(fr.b.apply(void 0,[e].concat(t)))}}function br(t){return function(e){return e.lift(new fr.a(t))}}},function(t,e,i){"use strict";i.d(e,"b",(function(){return h})),i.d(e,"a",(function(){return l}));var n=i(0),r=i(3),s=i(1),o=i(6),a=i(27),c=i(79),u=i(44),h=function(t){function e(e){var i=t.call(this,e)||this;return i.destination=e,i}return n.a(e,t),e}(s.a),l=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return n.a(e,t),e.prototype[u.a]=function(){return new h(this)},e.prototype.lift=function(t){var e=new d(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,i=e.length,n=e.slice(),r=0;r<i;r++)n[r].next(t)},e.prototype.error=function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,i=e.length,n=e.slice(),r=0;r<i;r++)n[r].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,i=t.slice(),n=0;n<e;n++)i[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new c.a(this,t))},e.prototype.asObservable=function(){var t=new r.a;return t.source=this,t},e.create=function(t,e){return new d(t,e)},e}(r.a),d=function(t){function e(e,i){var n=t.call(this)||this;return n.destination=e,n.source=i,n}return n.a(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):o.a.EMPTY},e}(l)},function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return s}));var n=i(36),r=new(i(34).a)(n.a),s=r},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(){return Array.isArray||function(t){return t&&"number"===typeof t.length}}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(0),r=i(1);function s(t,e){return function(i){if("function"!==typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new o(t,e))}}var o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))},t}(),a=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.project=i,r.count=0,r.thisArg=n||r,r}return n.a(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(r.a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(88);Object.defineProperty(e,"BaseHtmlElement",{enumerable:!0,get:function(){return n.BaseHtmlElement}});var r=i(93);Object.defineProperty(e,"PlayableHtmlElement",{enumerable:!0,get:function(){return r.PlayableHtmlElement}});var s=i(94);Object.defineProperty(e,"TemplateLoader",{enumerable:!0,get:function(){return s.TemplateLoader}});var o=i(48);Object.defineProperty(e,"CustomAttribute",{enumerable:!0,get:function(){return o.CustomAttribute}});var a=i(131);Object.defineProperty(e,"AdHtmlElement",{enumerable:!0,get:function(){return a.AdHtmlElement}});var c=i(132);Object.defineProperty(e,"SourceHtmlElement",{enumerable:!0,get:function(){return c.SourceHtmlElement}});var u=i(69);Object.defineProperty(e,"ApiManagerElement",{enumerable:!0,get:function(){return u.ApiManagerElement}});var h=i(133);Object.defineProperty(e,"MergePlayableAndSource",{enumerable:!0,get:function(){return h.MergePlayableAndSource}});var l=i(134);Object.defineProperty(e,"TemplatePanel",{enumerable:!0,get:function(){return l.TemplatePanel}})},function(t,e,i){"use strict";function n(t){return t&&"function"===typeof t.schedule}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return s}));var n=i(3),r=new n.a((function(t){return t.complete()}));function s(t){return t?function(t){return new n.a((function(e){return t.schedule((function(){return e.complete()}))}))}(t):r}},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(3),r=i(39),s=i(78);function o(t,e){return e?Object(s.a)(t,e):t instanceof n.a?t:new n.a(Object(r.a)(t))}},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(0),r=function(t){function e(e,i,n){var r=t.call(this)||this;return r.parent=e,r.outerValue=i,r.outerIndex=n,r.index=0,r}return n.a(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(i(1).a),s=i(39),o=i(3);function a(t,e,i,n,a){if(void 0===a&&(a=new r(t,i,n)),!a.closed)return e instanceof o.a?e.subscribe(a):Object(s.a)(e)(a)}},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=!1,r={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t);n=t},get useDeprecatedSynchronousErrorHandling(){return n}}},function(t,e,i){"use strict";function n(t){return t}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.a(e,t),e.prototype.notifyNext=function(t,e,i,n,r){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(i(1).a)},function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(0),r=i(1);function s(t,e){return function(i){return i.lift(new o(t,e))}}var o=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.thisArg))},t}(),a=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.predicate=i,r.thisArg=n,r.count=0,r}return n.a(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(r.a)},function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return a}));var n,r=i(14),s=i(41),o=i(52);n||(n={});var a=function(){function t(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}},t.prototype.accept=function(t,e,i){return t&&"function"===typeof t.next?this.observe(t):this.do(t,e,i)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Object(s.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return"undefined"!==typeof e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return s}));var n="undefined"!==typeof window&&window,r="undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,s=n||"undefined"!==typeof t&&t||r}).call(this,i(162))},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0;const r=i(5),s=i(4),o=i(28),a=i(7);let c=class{constructor(){this.adTypes=[],this.parameters=[],this.options={},this.parametersUpdate$=new s.ReplaySubject,this.subscriptions=[],this.remove$=new s.Subject,this.mediaTypeStream=new s.ReplaySubject(1),this.childAdUnitStream=new s.ReplaySubject(1),this.extensionStream=new s.ReplaySubject(1),this._listenChild(),this.adContainersStream=(new s.ReplaySubject).pipe(r.distinctScan()),this.stateStream=new s.BehaviorSubject(o.EAdState.notready),this.clickStream=new s.ReplaySubject(1),this.parametersUpdate$.pipe(a.takeUntil(this.remove$)).subscribe((t=>{this.setParameter(t.key,t.value)}))}_listenChild(){this.childAdUnitStream.pipe(a.takeUntil(this.remove$)).subscribe((t=>{this.parameters.push(...t.parameters),this.childAdUnit=t,this.assignEvent([{assignTo:t}]),t.adContainersStream.pipe(a.takeUntil(this.remove$)).subscribe((t=>{this.adContainersStream.next(t)})),t.stateStream.pipe(a.takeUntil(this.remove$)).subscribe((t=>{this.stateStream.next(t)})),t.clickStream.pipe(a.takeUntil(this.remove$)).subscribe((t=>{this.clickStream.next(t)})),t.mediaTypeStream.pipe(a.takeUntil(this.remove$)).subscribe((t=>{this.mediaTypeStream.next(t)})),t.extensionStream.pipe(a.takeUntil(this.remove$)).subscribe((t=>{this.extensionStream.next(t)})),t.parametersUpdate$.pipe(a.takeUntil(this.remove$)).subscribe((e=>{this.parametersUpdate$.next(e),this.paused=t.paused,this.muted=t.muted,this.clickable=t.clickable,this.skipable=t.skipable}))}),(t=>{this.emit("error",t),this.stateStream.next(o.EAdState.error)}))}findAndSendTracker(t,e){const i=t.find((t=>t.event===e));i&&this.sendEvent(i.link)}sendEvent(t){t&&((new Image).src=t)}getParameter(t){return this.parameters.find((e=>e.key===t))}setParameter(t,e){const i=this.parameters.find((e=>e.key===t));i?i.value=e:this.parameters.push({key:t,value:e})}setOptions(t){for(let e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);return this.childAdUnitStream.pipe(a.takeUntil(this.remove$)).subscribe((e=>{e.setOptions(t)})),this}click(){return this.childAdUnit?this.childAdUnit.click():r.Log.warning("click method not implemented"),this}setData(t,e){return r.Log.warning("setData method not implemented"),this}load(){return this.childAdUnitStream.pipe(a.takeUntil(this.remove$)).subscribe((t=>{t.load()})),this}start(){return this.childAdUnitStream.pipe(a.takeUntil(this.remove$)).subscribe((t=>{t.start()})),this}remove(){return this.subscriptions.forEach((t=>t.unsubscribe())),this.childAdUnit?(this.childAdUnit.remove(),this.subscriptions=[],this.dispose()):r.Logger.Warning("BaseAd.. Remove method not implemented"),this.remove$.next(),this.remove$.complete(),this}skip(){return new Promise(((t,e)=>{this.childAdUnit?this.childAdUnit.skip().then((()=>t())).catch((t=>e(t))):e("skip method not implemented")}))}pause(){return this.childAdUnit&&this.childAdUnit.pause(),this}play(){return new Promise(((t,e)=>{this.childAdUnit?this.childAdUnit.play().then((()=>t())).catch((t=>e(t))):e("play method not implemented")}))}mute(){return this.childAdUnit&&this.childAdUnit.mute(),this}unmute(){return this.childAdUnit&&this.childAdUnit.unmute(),this}getState(){if(this.childAdUnit){const t=this.childAdUnit.getState();return this.paused=t.paused,this.muted=t.muted,this.skipable=t.skipable,this.clickable=t.clickable,t}return{paused:!0,muted:!0,skipable:!0,clickable:!0}}getVolume(){return this.childAdUnit?this.childAdUnit.getVolume():0}setVolume(t){this.childAdUnitStream.pipe(a.takeUntil(this.remove$)).subscribe((e=>{e.setVolume(t)}))}getCurrentTime(){return this.childAdUnit?this.childAdUnit.getCurrentTime():0}getDuration(){return this.childAdUnit?this.childAdUnit.getDuration():0}};c=n([r.Emitter,r.AssignEvent],c),e.Base=c},function(t,e,i){"use strict";function n(){return"function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}i.d(e,"a",(function(){return r}));var r=n()},function(t,e,i){"use strict";function n(){}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.AdUnit=e.ESkipStatus=e.EAdvertisementPlayType=e.EAdState=void 0;const r=i(5),s=i(4),o=i(7);var a,c;!function(t){t.notready="notready",t.ready="ready",t.canplay="canplay",t.initialize="initialize",t.start="start",t.progress="progress",t.error="error",t.complete="complete",t.remove="remove",t.skip="skip"}(a=e.EAdState||(e.EAdState={})),function(t){t[t.linear=0]="linear",t[t.nonlinear=1]="nonlinear",t[t.void=2]="void"}(e.EAdvertisementPlayType||(e.EAdvertisementPlayType={})),function(t){t.notallowed="notallowed",t.allowed="allowed"}(c=e.ESkipStatus||(e.ESkipStatus={}));let u=class{constructor(){this.parameters=[],this.options={},this.parametersUpdate$=new s.ReplaySubject,this.remove$=new s.Subject,this.mediaTypeStream=new s.ReplaySubject(1),this.clickStream=new s.ReplaySubject(1),this.stateStream=new s.BehaviorSubject(a.notready),this.adUnitStream=new s.ReplaySubject(1),this.dataStream=new s.ReplaySubject(1),this.extensionStream=new s.ReplaySubject(1),this.adUnitConstructorStream=new s.ReplaySubject(1),this.adContainersStream=new s.ReplaySubject,s.combineLatest([this.dataStream,this.adUnitConstructorStream]).pipe(o.takeUntil(this.remove$)).subscribe((([t,e])=>{const i=new e;this._adUnitSubscribe(i),this.adUnitStream.next(i),i.setData(t.data,t.option)}))}setOptions(t){for(let e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);return this.adUnitStream.pipe(o.takeUntil(this.remove$)).subscribe((e=>{e.setOptions(t)})),this}getParameter(t){return this.parameters.find((e=>e.key===t))}setParameter(t,e){const i=this.parameters.find((e=>e.key===t));i?i.value=e:this.parameters.push({key:t,value:e})}play(){return new Promise(((t,e)=>{this.adUnit&&this.stateStream.getValue()!==a.remove?this.adUnit.play().then((()=>t())).catch((t=>e(t))):e("play method not implemented")}))}pause(){return this.adUnit&&this.adUnit.pause(),this}mute(){return this.adUnit&&this.adUnit.mute(),this}unmute(){return this.adUnit&&this.adUnit.unmute(),this}getCurrentTime(){return this.adUnit?this.adUnit.getCurrentTime():0}getVolume(){return this.adUnit?this.adUnit.getVolume():0}setVolume(t){this.adUnitStream.pipe(o.takeUntil(this.remove$)).subscribe((e=>{e.setVolume(t)}))}getDuration(){return this.adUnit?this.adUnit.getDuration():0}getState(){return this.adUnit?this.adUnit.getState():{paused:!0,muted:!0}}setAdUnitConstructor(t){return this.adUnitConstructorStream.next(t),this}setData(t,e={}){return this.dataStream.next({data:t,option:e}),this}load(){return this.adUnitStream.pipe(o.takeUntil(this.remove$),o.take(1)).subscribe((t=>{t.load()}),(t=>{})),this}start(){return this.adUnitStream.pipe(o.takeUntil(this.remove$),o.take(1)).subscribe((t=>{this.emit("adstart",void 0),t.start()})),this}skip(){return new Promise(((t,e)=>{const i=this.adUnitStream.pipe(o.takeUntil(this.remove$)).subscribe((n=>{n.skip().then((()=>{t(),i.unsubscribe()})).catch((t=>e(t)))}))}))}click(){return this.adUnitStream.pipe(o.takeUntil(this.remove$)).subscribe((t=>{t.click()})),this}remove(){return this.adUnitStream.pipe(o.take(1)).subscribe((t=>{t.off("loadedmetadata",this),t.off("skipstatechange",this),t.remove()})),this.adUnit&&this.adUnit.remove(),this.remove$.next(),this.remove$.complete(),this}_adUnitSubscribe(t){this.adTypes=t.adTypes,this.adUnit=t,this.assignEvent([{assignTo:t}]),t.stateStream.pipe(o.takeUntil(this.remove$)).subscribe((t=>{this.stateStream.next(t)})),t.parametersUpdate$.pipe(o.takeUntil(this.remove$)).subscribe((e=>{this.parametersUpdate$.next(e),this.paused=t.paused,this.muted=t.muted,this.clickable=t.clickable,this.skipable=t.skipable})),t.adContainersStream.pipe(o.takeUntil(this.remove$)).subscribe((e=>{this.adContainersStream.next(e),t.advertisementPlayType&&(this.advertisementPlayType=t.advertisementPlayType)})),t.clickStream.pipe(o.takeUntil(this.remove$)).subscribe((t=>this.clickStream.next(t))),t.extensionStream.pipe(o.takeUntil(this.remove$)).subscribe((t=>this.extensionStream.next(t))),t.mediaTypeStream.pipe(o.takeUntil(this.remove$)).subscribe((t=>{this.mediaTypeStream.next(t)})),t.on("loadedmetadata",(()=>{this.paused=t.paused,this.muted=t.muted}),this),t.on("skipstatechange",(t=>{t===c.allowed&&(this.skipable=!0),t===c.notallowed&&(this.skipable=!1)}),this)}};u=n([r.Emitter,r.AssignEvent],u),e.AdUnit=u},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,i){"use strict";function n(t){return"function"===typeof t}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return h}));var n=i(0),r=i(11),s=i(15),o=i(2);function a(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"===typeof e?function(n){return n.pipe(a((function(i,n){return Object(s.a)(t(i,n)).pipe(Object(r.a)((function(t,r){return e(i,t,n,r)})))}),i))}:("number"===typeof e&&(i=e),function(e){return e.lift(new c(t,i))})}var c=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.concurrent))},t}(),u=function(t){function e(e,i,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e)||this;return r.project=i,r.concurrent=n,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return n.a(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new o.a(this),i=this.destination;i.add(e);var n=Object(o.c)(t,e);n!==e&&i.add(n)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.b),h=a},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(3),r=i(80),s=i(59);function o(t,e){return e?Object(s.a)(t,e):new n.a(Object(r.a)(t))}},function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(0),r=i(65),s=function(t){function e(i,n){void 0===n&&(n=r.a.now);var s=t.call(this,i,(function(){return e.delegate&&e.delegate!==s?e.delegate.now():n()}))||this;return s.actions=[],s.active=!1,s.scheduled=void 0,s}return n.a(e,t),e.prototype.schedule=function(i,n,r){return void 0===n&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(i,n,r):t.prototype.schedule.call(this,i,n,r)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},e}(r.a)},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(0),r=i(8),s=i(6),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return n.a(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),s.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),s.a.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(r.a)},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(0),r=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.scheduler=e,n.work=i,n.pending=!1,n}return n.a(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var i=!1,n=void 0;try{this.work(t)}catch(t){i=!0,n=!!t&&t||new Error(t)}if(i)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,i=e.actions,n=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&i.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,i){return t.call(this)||this}return n.a(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(i(6).a))},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(10);function r(t){return!Object(n.a)(t)&&t-parseFloat(t)+1>=0}},function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(41),r=i(74);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(r.a)()(n.a.apply(void 0,t))}},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(80),r=i(40),s=i(24),o=i(26),a=i(81),c=i(82),u=i(57),h=function(t){if(t&&"function"===typeof t[o.a])return h=t,function(t){var e=h[o.a]();if("function"!==typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(n.a)(t);if(Object(c.a)(t))return i=t,function(t){return i.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,r.a),t};if(t&&"function"===typeof t[s.a])return e=t,function(t){for(var i=e[s.a]();;){var n=void 0;try{n=i.next()}catch(e){return t.error(e),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"===typeof i.return&&t.add((function(){i.return&&i.return()})),t};var e,i,h,l=Object(u.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+l+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(t,e,i){"use strict";function n(t){setTimeout((function(){throw t}),0)}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(13),r=i(33),s=i(59);function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[t.length-1];return Object(n.a)(i)?(t.pop(),Object(s.a)(t,i)):Object(r.a)(t)}},function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return s}));var n=i(18);function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(t)}function s(t){return 0===t.length?n.a:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}},function(t,e,i){"use strict";i.d(e,"b",(function(){return l})),i.d(e,"a",(function(){return d}));var n=i(0),r=1,s=function(){return Promise.resolve()}(),o={};function a(t){return t in o&&(delete o[t],!0)}var c=function(t){var e=r++;return o[e]=!0,s.then((function(){return a(e)&&t()})),e},u=function(t){a(t)},h=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.scheduler=e,n.work=i,n}return n.a(e,t),e.prototype.requestAsyncId=function(e,i,n){return void 0===n&&(n=0),null!==n&&n>0?t.prototype.requestAsyncId.call(this,e,i,n):(e.actions.push(this),e.scheduled||(e.scheduled=c(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,i,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,i,n);0===e.actions.length&&(u(i),e.scheduled=void 0)},e}(i(36).a),l=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.a(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,i=this.actions,n=-1,r=i.length;t=t||i.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<r&&(t=i.shift()));if(this.active=!1,e){for(;++n<r&&(t=i.shift());)t.unsubscribe();throw e}},e}(i(34).a))(h),d=l},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(){return"function"===typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dataType=void 0;e.dataType=class{static isString(t){return"string"===typeof t}static isArray(t){return!!t.constructor&&t.constructor===Array}static isFunction(t){return"function"===typeof t}static isHTMLElement(t){return/HTML/.test(this.protoToStr(t))}static isNode(t){return void 0!==t.nodeName}static isNumber(t){return"number"===typeof t}static isObject(t){return t.constructor&&t.constructor===Object}static protoToStr(t){return t&&t.constructor&&t.constructor.prototype.toString()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$$=e.NodeWorker=void 0;const n=i(62),r=i(61),s=i(46),o=i(89);class a{constructor(t){this.listenerCb=new n.Dictionary,this.event=new o.Events,this.childNodeWorker=[],t&&(this.element="string"===typeof t?document.createElement(t):t)}css(t,e){const i=this.element;return i&&i instanceof HTMLElement&&("string"===typeof t?i.style[t]=e:r.Each.object(t,((t,e)=>{e&&(i.style[e]=t)}))),this}append(t,e){let i=this.element;if("IFRAME"===i.nodeName)this.appendToFrame(t);else if(i instanceof HTMLElement&&i.shadowRoot&&(i=i.shadowRoot),i){let n;if(t instanceof a){const e=t;n=t.get(),this.childNodeWorker.push(e)}else s.dataType.isNode(t)&&(n=t);n&&(e?i.insertBefore(n,e):i.appendChild(n),t instanceof a&&t.event.trigger("connected",n))}return this}appendTo(t,e){return t instanceof a?t.append(this,e):s.dataType.isNode(t)&&this.element&&(e?this.element.insertBefore(t,e):t.appendChild(this.element),this.event.trigger("connected",this.element)),this}appendToFrame(t){if(t=t instanceof a?t.get():t,this.element instanceof HTMLIFrameElement){const e=this.element.contentDocument;e?((e&&!e.body||"loading"===e.readyState||"uninitialized"===e.readyState)&&(e.write("<html><head></head><body></body></html>"),e.close()),s.dataType.isString(t)?(e.write(t),e.close()):s.dataType.isNode(t)&&e.body.appendChild(t)):setTimeout((()=>{this.appendToFrame(t)}),50)}}on(t,e,i){if(this.element){this.event.add(t,e,i);const n=this.listenerCb.get(t);n?n.push(e):this.listenerCb.set(t,[e]),this.element.addEventListener(t,e)}return this}off(t,e){if(this.event.unsubscribe(t,e),this.element)if(!0===t)this.listenerCb.each(((t,e)=>{t&&t.forEach((t=>{this.element.removeEventListener(e,t)}))}));else{const e=this.listenerCb.get(t);e&&e.forEach((e=>{this.element.removeEventListener(t,e)}))}return this}remove(){this.off(!0),this.element&&this.element.parentElement&&(this.childNodeWorker.forEach((t=>{t.remove()})),this.element.parentElement.removeChild(this.element),this.event.trigger("remove"))}addClass(t){if(this.element&&this.element instanceof HTMLElement){const e=this.element.className.split&&this.element.className.split(" ");e&&e.indexOf(t)<0&&(this.element.className+=" "+t),this.event.trigger("setcssclass",t)}return this}haveClass(t){if(this.element&&this.element instanceof HTMLElement){return this.element.className.split(" ").indexOf(t)>=0}}hide(){if(this.element instanceof HTMLElement){const t=this.element;this.addClass("nw-hidden"),t&&(t.style.display="none")}return this}show(){if(this.element instanceof HTMLElement){const t=this.element;this.removeClass("nw-hidden"),t&&(t.style.display=this.isInline&&this.isFlex?"inline-flex":this.isInline?"inline-block":this.isFlex?"flex":"block")}return this}removeClass(t){if(this.element instanceof HTMLElement){const e=this.element.className.split&&this.element.className.split(" ");e&&(e.forEach(((i,n)=>{i===t&&n&&e.splice(n,1)})),this.element.className=e.join(" ")),this.event.trigger("removecssclass",t)}return this}get(){return this.element}attr(t,e){return this.element instanceof HTMLElement&&("string"===typeof t?this.element.setAttribute(t,e&&e.toString()||""):r.Each.object(t,((t,e)=>{this.element.setAttribute(e,t)}))),this}getAttr(t){return this.element instanceof HTMLElement?this.element.getAttribute(t):null}}e.NodeWorker=a,e.$$=t=>new a(t)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CustomAttribute=e.CustomElement=void 0,e.CustomElement=function(t){return function(e){window.customElements&&!customElements.get(t)&&customElements.define(t,e)}},e.CustomAttribute=function(t){return function(e){return e.observedAttributes=t,t.forEach((t=>{const i=t.replace(/-(\w)/gi,(t=>t[1].toUpperCase()));Object.defineProperty(e.prototype,i,{get:function(){return""===this.getAttribute(t)||this.getAttribute(t)},set:function(e){e||""===e?this.setAttribute(t,e):this.removeAttribute(t)}})})),e}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdManager=e.EResponseType=void 0;const n=i(28),r=i(4),s=i(96),o=i(95),a=i(7);var c;!function(t){t[t.open=0]="open",t[t.close=1]="close"}(c||(c={})),function(t){t.Vast="Vast",t.IMA="Ima"}(e.EResponseType||(e.EResponseType={}));e.AdManager=class{constructor(t,e={}){this.rawData=t,this.option=e,this.remove$=new r.Subject,this.adStream=new r.BehaviorSubject(new n.AdUnit)}initAdStream(){return new r.Observable((t=>{this.adStream.getValue().stateStream.getValue()!==n.EAdState.notready?t.next(this.adStream.getValue()):this.adStream.pipe(a.takeUntil(this.remove$),s.parseRawData(this.rawData,this.option),o.constructorByData()).subscribe((e=>{t.next(e)}),(e=>t.error(e)))}))}remove(){return this.adStream.complete(),this.remove$.next(),this.remove$.complete(),this}}},function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(0),r=i(1);function s(){return function(t){return t.lift(new o(t))}}var o=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var i=this.connectable;i._refCount++;var n=new a(t,i),r=e.subscribe(n);return n.closed||(n.connection=i.connect()),r},t}(),a=function(t){function e(e,i){var n=t.call(this,e)||this;return n.connectable=i,n}return n.a(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var i=this.connection,n=t._connection;this.connection=null,!n||i&&n!==i||n.unsubscribe()}}else this.connection=null},e}(r.a)},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(0),r=i(8),s=i(64),o=i(6),a=i(72),c=i(27),u=i(79),h=function(t){function e(e,i,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===i&&(i=Number.POSITIVE_INFINITY);var r=t.call(this)||this;return r.scheduler=n,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=e<1?1:e,r._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return n.a(e,t),e.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var i=this._events;i.push(e),i.length>this._bufferSize&&i.shift()}t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new l(this._getNow(),e)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,i=this._infiniteTimeWindow,n=i?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=n.length;if(this.closed)throw new c.a;if(this.isStopped||this.hasError?e=o.a.EMPTY:(this.observers.push(t),e=new u.a(this,t)),r&&t.add(t=new a.a(t,r)),i)for(var h=0;h<s&&!t.closed;h++)t.next(n[h]);else for(h=0;h<s&&!t.closed;h++)t.next(n[h].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||s.a).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,i=this._windowTime,n=this._events,r=n.length,s=0;s<r&&!(t-n[s].time<i);)s++;return r>e&&(s=Math.max(s,r-e)),s>0&&n.splice(0,s),n},e}(r.a),l=function(){return function(t,e){this.time=t,this.value=e}}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(3);function r(t,e){return e?new n.a((function(i){return e.schedule(s,0,{error:t,subscriber:i})})):new n.a((function(e){return e.error(t)}))}function s(t){var e=t.error;t.subscriber.error(e)}},function(t,e,i){"use strict";i.d(e,"b",(function(){return h})),i.d(e,"a",(function(){return l}));var n=i(0),r=i(13),s=i(10),o=i(19),a=i(16),c=i(33),u={};function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=void 0,n=void 0;return Object(r.a)(t[t.length-1])&&(n=t.pop()),"function"===typeof t[t.length-1]&&(i=t.pop()),1===t.length&&Object(s.a)(t[0])&&(t=t[0]),Object(c.a)(t,n).lift(new l(i))}var l=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.resultSelector))},t}(),d=function(t){function e(e,i){var n=t.call(this,e)||this;return n.resultSelector=i,n.active=0,n.values=[],n.observables=[],n}return n.a(e,t),e.prototype._next=function(t){this.values.push(u),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var i=0;i<e;i++){var n=t[i];this.add(Object(a.a)(this,n,void 0,i))}}},e.prototype.notifyComplete=function(t){0===(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,i){var n=this.values,r=n[i],s=this.toRespond?r===u?--this.toRespond:this.toRespond:0;n[i]=e,0===s&&(this.resultSelector?this._tryResultSelector(n):this.destination.next(n.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.a)},function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(32),r=i(18);function s(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(n.b)(r.a,t)}},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(3),r=i(15),s=i(14);function o(t){return new n.a((function(e){var i;try{i=t()}catch(t){return void e.error(t)}return(i?Object(r.a)(i):Object(s.b)()).subscribe(e)}))}},function(t,e,i){"use strict";i.d(e,"b",(function(){return u})),i.d(e,"a",(function(){return h}));var n=i(0),r=i(33),s=i(10),o=i(1),a=i(24),c=i(2);function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[t.length-1];return"function"===typeof i&&t.pop(),Object(r.a)(t,void 0).lift(new h(i))}var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.resultSelector))},t}(),l=function(t){function e(e,i,n){void 0===n&&(n=Object.create(null));var r=t.call(this,e)||this;return r.resultSelector=i,r.iterators=[],r.active=0,r.resultSelector="function"===typeof i?i:void 0,r}return n.a(e,t),e.prototype._next=function(t){var e=this.iterators;Object(s.a)(t)?e.push(new p(t)):"function"===typeof t[a.a]?e.push(new d(t[a.a]())):e.push(new f(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var i=0;i<e;i++){var n=t[i];if(n.stillUnsubscribed)this.destination.add(n.subscribe());else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,i=this.destination,n=0;n<e;n++){if("function"===typeof(o=t[n]).hasValue&&!o.hasValue())return}var r=!1,s=[];for(n=0;n<e;n++){var o,a=(o=t[n]).next();if(o.hasCompleted()&&(r=!0),a.done)return void i.complete();s.push(a.value)}this.resultSelector?this._tryresultSelector(s):i.next(s),r&&i.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.a),d=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return Boolean(t&&t.done)},t}(),p=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[a.a]=function(){return this},t.prototype.next=function(t){var e=this.index++,i=this.array;return e<this.length?{value:i[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),f=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.parent=i,r.observable=n,r.stillUnsubscribed=!0,r.buffer=[],r.isComplete=!1,r}return n.a(e,t),e.prototype[a.a]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t){this.buffer.push(t),this.parent.checkIterators()},e.prototype.subscribe=function(){return Object(c.c)(this.observable,new c.a(this))},e}(c.b)},function(t,e,i){"use strict";function n(t){return null!==t&&"object"===typeof t}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(1);function r(t){for(;t;){var e=t,i=e.closed,r=e.destination,s=e.isStopped;if(i||s)return!1;t=r&&r instanceof n.a?r:null}return!0}},function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(3),r=i(6);function s(t,e){return new n.a((function(i){var n=new r.a,s=0;return n.add(e.schedule((function(){s!==t.length?(i.next(t[s++]),i.closed||n.add(this.schedule())):i.complete()}))),n}))}},function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i(17),r=i(40),s={closed:!0,next:function(t){},error:function(t){if(n.a.useDeprecatedSynchronousErrorHandling)throw t;Object(r.a)(t)},complete:function(){}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Each=void 0;e.Each=class{static array(t,e,i=!1){if(t)for(let n=i?0:t.length-1;(i?n<t.length:n>-1)&&!1!==e(t[n],n);i?n++:n--);}static object(t,e){if(t)for(const i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dictionary=void 0;e.Dictionary=class{constructor(){this.keys=[],this.data={}}toJson(){return JSON.stringify(this.data)}get(t,e=null){let i=this.data[t];return"undefined"===typeof i&&"undefined"!==typeof e&&(this.data[t]=i=e),i}set(t,e){return this.data[t]=e,-1===this.keys.indexOf(t)&&this.keys.push(t),this}remove(t){const e=this.keys.indexOf(t);return e>-1&&(this.keys.splice(e,1),delete this.data[t]),this}each(t){return this.keys.forEach((e=>t(this.get(e),e,this))),this}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EManagerType=void 0,function(t){t.playable="playable",t.contentPlayer="contentPlayer",t.container="container",t.mediaContainer="mediaContainer",t.adPlayer="adPlayer",t.source="source",t.storage="storage",t.userInterface="userInterface"}(e.EManagerType||(e.EManagerType={}))},function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return o}));var n=i(0),r=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.scheduler=e,n.work=i,n}return n.a(e,t),e.prototype.schedule=function(e,i){return void 0===i&&(i=0),i>0?t.prototype.schedule.call(this,e,i):(this.delay=i,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,i){return i>0||this.closed?t.prototype.execute.call(this,e,i):this._execute(e,i)},e.prototype.requestAsyncId=function(e,i,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?t.prototype.requestAsyncId.call(this,e,i,n):e.flush(this)},e}(i(36).a),s=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.a(e,t),e}(i(34).a))(r),o=s},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(){function t(e,i){void 0===i&&(i=t.now),this.SchedulerAction=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},t.now=function(){return Date.now()},t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ticker=void 0;const n=i(90);e.Ticker=class{constructor(t){this.step=1e3,this.oldTime=0,this._pause=!1,this.cb=t,n.DocIsVisible.add((t=>{t||this.loop()}))}start(){return this._pause=!1,this.loop(),this}stop(){return this._pause=!0,this}setStep(t){return this.step=t,this}loop(){(new Date).getTime()-this.oldTime>this.step&&(this.cb(),this.oldTime=(new Date).getTime()),this._pause||(n.DocIsVisible.isVisible()?window.requestAnimationFrame(this.loop.bind(this)):setTimeout((()=>this.loop()),1e3))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logger=e.Logger=e.Log=void 0;const n=i(46),r=i(84);function s(){try{throw Error("")}catch(t){return t}}e.Log=class{static info(t,...e){return[`PLAYER %cINFO: ${t}.`,"color:grey",...e]}static warning(t,...e){return[`PLAYER %cWARNING: ${t}.`,"color:orange",...e]}static error(t,...e){return[`PLAYER %cERROR: ${t}.`,"color:red",...e]}static success(t,...e){return[`PLAYER %cSUCCESS: ${t}.`,"color:#008b8b",...e]}};class o{static Log(t,e={}){let i="void";var n=s().stack.split("\n")[4];if(n){var r=n.indexOf("at ");i=n.slice(r+2,n.length)}e.group,e.closeGroup}static Warning(t,e={}){let i="void";var n=s().stack.split("\n")[4];if(n){var r=n.indexOf("at ");i=n.slice(r+2,n.length)}e.group,e.closeGroup}static Error(t,e={}){e.group,e.closeGroup}static Trace(t,e={}){e.group,e.closeGroup}}e.Logger=o,o.APP_NAME="Player.b",o.APP_VERSION="1.2.124",e.logger=function(t="void",e){const i=n.dataType.isObject(e)?JSON.stringify(e):e,s=r.getDevice();let o=a(s);const c={mod:t,err:i,ua:navigator.userAgent,device:JSON.stringify(o),url:location.href},u=`https://inv-nets.admixer.net/scriptlog?loghead=player_err&logbody=${JSON.stringify(c)}`;(new Image).src=u};const a=t=>{let e={};for(let[i,r]of Object.entries(t))if(r)if(e=e||{},n.dataType.isObject(r)){const t=a(r);t&&(e[i]=t)}else e[i]=r;return e}},function(t,e,i){"use strict";i.d(e,"b",(function(){return c})),i.d(e,"a",(function(){return d}));var n=i(0),r=i(1),s=i(6),o=i(3),a=i(8);function c(t,e,i,n){return function(r){return r.lift(new u(t,e,i,n))}}var u=function(){function t(t,e,i,n){this.keySelector=t,this.elementSelector=e,this.durationSelector=i,this.subjectSelector=n}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),h=function(t){function e(e,i,n,r,s){var o=t.call(this,e)||this;return o.keySelector=i,o.elementSelector=n,o.durationSelector=r,o.subjectSelector=s,o.groups=null,o.attemptedToUnsubscribe=!1,o.count=0,o}return n.a(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var i=this.groups;i||(i=this.groups=new Map);var n,r=i.get(e);if(this.elementSelector)try{n=this.elementSelector(t)}catch(t){this.error(t)}else n=t;if(!r){r=this.subjectSelector?this.subjectSelector():new a.a,i.set(e,r);var s=new d(e,r,this);if(this.destination.next(s),this.durationSelector){var o=void 0;try{o=this.durationSelector(new d(e,r))}catch(t){return void this.error(t)}this.add(o.subscribe(new l(e,r,this)))}}r.closed||r.next(n)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach((function(e,i){e.error(t)})),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach((function(t,e){t.complete()})),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(r.a),l=function(t){function e(e,i,n){var r=t.call(this,i)||this;return r.key=e,r.group=i,r.parent=n,r}return n.a(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(r.a),d=function(t){function e(e,i,n){var r=t.call(this)||this;return r.key=e,r.groupSubject=i,r.refCountSubscription=n,r}return n.a(e,t),e.prototype._subscribe=function(t){var e=new s.a,i=this.refCountSubscription,n=this.groupSubject;return i&&!i.closed&&e.add(new p(i)),e.add(n.subscribe(t)),e},e}(o.a),p=function(t){function e(e){var i=t.call(this)||this;return i.parent=e,e.count++,i}return n.a(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(s.a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ApiManagerElement=void 0;const n=i(88),r=i(4);i(5);class s extends n.BaseHtmlElement{constructor(){super(),this.apiManagerStream=new r.ReplaySubject}setApiManager(t){return this.allowType(t.managerTypes)&&(this.apiManager=t,this.apiManagerStream.next(t)),this}allowType(t){let e=!1;return this.bpManager?this.bpManager.split(",").forEach((i=>{t.forEach((t=>{t.toLowerCase()==i.toLowerCase()&&(e=!0)}))})):this.allowedApiManagers.forEach((i=>{-1!=t.indexOf(i)&&(e=!0)})),e}}e.ApiManagerElement=s},function(t,e,i){"use strict";i.d(e,"a",(function(){return u})),i.d(e,"b",(function(){return h}));var n=i(0),r=i(8),s=i(3),o=i(1),a=i(6),c=i(50),u=function(t){function e(e,i){var n=t.call(this)||this;return n.source=e,n.subjectFactory=i,n._refCount=0,n._isComplete=!1,n}return n.a(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new l(this.getSubject(),this))),t.closed&&(this._connection=null,t=a.a.EMPTY)),t},e.prototype.refCount=function(){return Object(c.a)()(this)},e}(s.a),h=function(){var t=u.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),l=function(t){function e(e,i){var n=t.call(this,e)||this;return n.connectable=i,n}return n.a(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(r.b);o.a},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(0),r=i(8),s=i(27),o=function(t){function e(e){var i=t.call(this)||this;return i._value=e,i}return n.a(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var i=t.prototype._subscribe.call(this,e);return i&&!i.closed&&e.next(this._value),i},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new s.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(r.a)},function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return c}));var n=i(0),r=i(1),s=i(21);function o(t,e){return void 0===e&&(e=0),function(i){return i.lift(new a(t,e))}}var a=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.scheduler,this.delay))},t}(),c=function(t){function e(e,i,n){void 0===n&&(n=0);var r=t.call(this,e)||this;return r.scheduler=i,r.delay=n,r}return n.a(e,t),e.dispatch=function(t){var e=t.notification,i=t.destination;e.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new u(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(s.a.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(s.a.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(s.a.createComplete()),this.unsubscribe()},e}(r.a),u=function(){return function(t,e){this.notification=t,this.destination=e}}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(54);function r(){return Object(n.a)(1)}},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(3),r=i(13),s=i(54),o=i(33);function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Number.POSITIVE_INFINITY,a=null,c=t[t.length-1];return Object(r.a)(c)?(a=t.pop(),t.length>1&&"number"===typeof t[t.length-1]&&(i=t.pop())):"number"===typeof c&&(i=t.pop()),null===a&&1===t.length&&t[0]instanceof n.a?t[0]:Object(s.a)(i)(Object(o.a)(t,a))}},function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i(0),r=i(10),s=i(33),o=i(19),a=i(16);function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Object(r.a)(t[0]))return t[0];t=t[0]}return Object(s.a)(t,void 0).lift(new u)}var u=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new h(t))},t}(),h=function(t){function e(e){var i=t.call(this,e)||this;return i.hasFirst=!1,i.observables=[],i.subscriptions=[],i}return n.a(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var i=0;i<e&&!this.hasFirst;i++){var n=t[i],r=Object(a.a)(this,n,void 0,i);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},e.prototype.notifyNext=function(t,e,i){if(!this.hasFirst){this.hasFirst=!0;for(var n=0;n<this.subscriptions.length;n++)if(n!==i){var r=this.subscriptions[n];r.unsubscribe(),this.remove(r)}this.subscriptions=null}this.destination.next(e)},e}(o.a)},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(3),r=i(9),s=i(37),o=i(13);function a(t,e,i){void 0===t&&(t=0);var a=-1;return Object(s.a)(e)?a=Number(e)<1?1:Number(e):Object(o.a)(e)&&(i=e),Object(o.a)(i)||(i=r.a),new n.a((function(e){var n=Object(s.a)(t)?t:+t-i.now();return i.schedule(c,n,{index:0,period:a,subscriber:e})}))}function c(t){var e=t.index,i=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(-1===i)return n.complete();t.index=e+1,this.schedule(t,i)}}},function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i(3),r=i(6),s=i(26);var o=i(59),a=i(24);var c=i(82),u=i(81);function h(t,e){if(null!=t){if(function(t){return t&&"function"===typeof t[s.a]}(t))return function(t,e){return new n.a((function(i){var n=new r.a;return n.add(e.schedule((function(){var r=t[s.a]();n.add(r.subscribe({next:function(t){n.add(e.schedule((function(){return i.next(t)})))},error:function(t){n.add(e.schedule((function(){return i.error(t)})))},complete:function(){n.add(e.schedule((function(){return i.complete()})))}}))}))),n}))}(t,e);if(Object(c.a)(t))return function(t,e){return new n.a((function(i){var n=new r.a;return n.add(e.schedule((function(){return t.then((function(t){n.add(e.schedule((function(){i.next(t),n.add(e.schedule((function(){return i.complete()})))})))}),(function(t){n.add(e.schedule((function(){return i.error(t)})))}))}))),n}))}(t,e);if(Object(u.a)(t))return Object(o.a)(t,e);if(function(t){return t&&"function"===typeof t[a.a]}(t)||"string"===typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new n.a((function(i){var n,s=new r.a;return s.add((function(){n&&"function"===typeof n.return&&n.return()})),s.add(e.schedule((function(){n=t[a.a](),s.add(e.schedule((function(){if(!i.closed){var t,e;try{var r=n.next();t=r.value,e=r.done}catch(t){return void i.error(t)}e?i.complete():(i.next(t),this.schedule())}})))}))),s}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(0),r=function(t){function e(e,i){var n=t.call(this)||this;return n.subject=e,n.subscriber=i,n.closed=!1,n}return n.a(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},e}(i(6).a)},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(t){return function(e){for(var i=0,n=t.length;i<n&&!e.closed;i++)e.next(t[i]);e.complete()}}},function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(t){return t&&"number"===typeof t.length&&"function"!==typeof t}},function(t,e,i){"use strict";function n(t){return!!t&&"function"!==typeof t.subscribe&&"function"===typeof t.then}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";function n(t,e){function i(){return!i.pred.apply(i.thisArg,arguments)}return i.pred=t,i.thisArg=e,i}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDevice=e.Device=void 0;const n=i(67);class r{constructor(){this.os={macintosh:void 0,ios:void 0,android:void 0,windows:void 0,linux:void 0,version:void 0},this.browser={chrome:void 0,firefox:void 0,safari:void 0,ie:void 0,edge:void 0,opera:void 0,version:void 0}}}e.Device=r,e.getDevice=()=>{const t=navigator.userAgent,e=new r;try{if(/Macintosh/.test(t)){e.os.macintosh=!0;const i=t.match(/.+Mac OS X(.*?)[\)|\;]/);e.os.version=i&&i[1]||void 0}if(/Windows/.test(t)){e.os.windows=!0;const i=t.match(/.+Windows(.*?)[\;]/);e.os.version=i&&i[1]||void 0}if(/Linux/.test(t))if(/Android/.test(t)){e.os.android=!0;const i=t.match(/Android(.+?)\;/);e.os.version=i&&i[1]||void 0}else{e.os.linux=!0;const i=t.match(/Linux(.+?)\)/);e.os.version=i&&i[1]||void 0}if(/Mobile/.test(t)&&(e.isMobile=!0),/iPhone|iPad/.test(t)){e.os.ios={iPad:/iPad/.test(t),iPhone:/iPhone/.test(t)};const i=t.match(/OS(.+?)\s/);e.os.version=i&&i[1]||void 0}if(/Trident/.test(t)){e.browser.ie=!0;const i=t.match(/rv:(.+?)\)/);e.browser.version=i&&i[1]||void 0}if(/Edge/.test(t)){e.browser.edge=!0;const i=t.match(/Edge\/(.+)/);e.browser.version=i&&i[1]||void 0}if(/Safari/.test(t)){e.browser.safari=!0;const i=t.match(/Version\/(.+)/);e.browser.version=i&&i[1]||void 0}if(/Chrome/.test(t)){e.browser.chrome=!0,e.browser.safari=!1;const i=t.match(/Chrome\/(.+?)\s/);e.browser.version=i&&i[1]||void 0}if(/OPR/.test(t)){e.browser.opera=!0,e.browser.chrome=!1;const i=t.match(/OPR\/(.+)/);e.browser.version=i&&i[1]||void 0}if(/Firefox/.test(t)){e.browser.firefox=!0;const i=t.match(/Firefox\/(.+)/);e.browser.version=i&&i[1]||void 0}}catch(t){n.logger("device",t.toString())}return e}},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.DragTracker=void 0;const r=i(12),s=i(5),o=i(4);let a=class extends r.PlayableHtmlElement{constructor(){super(),new s.DragAndDrop(this,(t=>{setTimeout((()=>{this._setDragXY(t),this.onDrag(t)}),5)})),this._event()}_setDragXY(t){const{offsetX:e,offsetY:i}=t,n=e<0?0:e>this.clientWidth?this.clientWidth:e,r=i<0?0:i>this.clientHeight?this.clientHeight:i,s=100/this.clientWidth*n,o=100/this.clientHeight*r,a=s.toFixed(2).toString(),c=o.toFixed(2).toString();this.setAttribute("drag-x",a),this.setAttribute("drag-y",c),this.style.setProperty("--drag-x",a+"%"),this.style.setProperty("--drag-y",c+"%")}_event(){o.fromEvent(this,"mousedown").subscribe((()=>this.setAttribute("dragged",""))),o.fromEvent(document,"mouseup").subscribe((()=>this.removeAttribute("dragged"))),o.fromEvent(this,"touchstart").subscribe((()=>this.setAttribute("dragged",""))),o.fromEvent(document,"touchend").subscribe((()=>this.removeAttribute("dragged")))}onDrag(t){}};a=n([r.CustomAttribute(["drag-x","drag-y","dragged"])],a),e.DragTracker=a,window.customElements&&!customElements.get("bp-drag-tracker")&&customElements.define("bp-drag-tracker",a)},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||e.hasOwnProperty(i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.EAdType=void 0;var s=i(95);Object.defineProperty(e,"constructorByData",{enumerable:!0,get:function(){return s.constructorByData}});var o=i(49);Object.defineProperty(e,"AdManager",{enumerable:!0,get:function(){return o.AdManager}}),Object.defineProperty(e,"EResponseType",{enumerable:!0,get:function(){return o.EResponseType}});var a=i(28);Object.defineProperty(e,"AdUnit",{enumerable:!0,get:function(){return a.AdUnit}}),Object.defineProperty(e,"EAdvertisementPlayType",{enumerable:!0,get:function(){return a.EAdvertisementPlayType}}),Object.defineProperty(e,"ESkipStatus",{enumerable:!0,get:function(){return a.ESkipStatus}}),Object.defineProperty(e,"EAdState",{enumerable:!0,get:function(){return a.EAdState}});var c=i(190);Object.defineProperty(e,"AdTimingRules",{enumerable:!0,get:function(){return c.AdTimingRules}});var u=i(96);Object.defineProperty(e,"parseRawData",{enumerable:!0,get:function(){return u.parseRawData}});var h=i(191);Object.defineProperty(e,"containersMatch",{enumerable:!0,get:function(){return h.containersMatch}}),r(i(49),e),function(t){t.linear="linear",t.nonLinear="nonLinear",t.vpaid="vpaid",t.googleIma="googleIma"}(e.EAdType||(e.EAdType={}))},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.CustomVerification=void 0;const r=i(5),s=i(4),o=i(86),a=i(7);let c=class{constructor(t,e,i){this.verification=t,this.parentTag=e,this.adServingId=i,this.remove$=new s.Subject,this.registeredSessionObservers=[],this._position="preroll",this.adSessionId=r.GUID.create(),this.init()}init(){this.createIframe(document.body),s.combineLatest([this.parentTag.mediaTypeStream,this.parentTag.adContainersStream]).pipe(a.takeUntil(this.remove$),a.take(1)).subscribe((([t,e])=>{let i;-1!=this.parentTag.adTypes.indexOf(o.EAdType.linear)&&(this._position="preroll"),this._mediaType=t,e.main&&(i=e.main.getElementsByTagName("video")[0],this._containerTag=i||e.main,this.sessionStartEv(t,this._containerTag),this.emit("sessionStart",this.getEventArgs("sessionStart",{verificationParameters:this.getParameterByVendorKey(""),context:{apiVersion:"1.2",environment:"web",accessMode:"full",videoElement:"video"===t||"audio"===t?this._containerTag:null,slotElement:"not_playable"===t?this._containerTag:null,adSessionType:"html",adServingId:this.adServingId,adCount:1,omidJsInfo:{omidImplementer:"admixerus.com-omadnroid",serviceVersion:"1.2.124"}}})),this.visiblePlayerStateWorker())}))}registerSessionObserver(){const t=this;return function(e,i){t.registeredSessionObservers.push({observer:e,verificationParameters:t.getParameterByVendorKey(i)})}}getParameterByVendorKey(t){return this.verification.verificationsParameters}addEventListener(){const t=this;return function(e,i){t.on(e,i)}}remove(){this.remove$.next(),this.remove$.complete(),this.mutationObserver.disconnect(),this.iframe.remove()}createIframe(t){this.iframe=document.createElement("iframe"),this.iframe.style.display="none",t.appendChild(this.iframe);const e=this.iframe.contentWindow;if(e){e.omid3p={registerSessionObserver:this.registerSessionObserver(),addEventListener:this.addEventListener()};const t=e.document.createElement("script");this.verification.javascriptResource.content&&(t.src=this.verification.javascriptResource.content),e.document.body.appendChild(t)}}registerEvent(){this.parentTag.stateStream.pipe(a.takeUntil(this.remove$)).subscribe((t=>{t===o.EAdState.ready&&this.emit("loaded",this.getEventArgs("loaded",{skippable:this._skippable,skipOffset:this.parentTag.getParameter("skipOffset"),autoPlay:!1,position:this._position}))})),this.parentTag.on("impression",(()=>{this.emit("impression",this.getEventArgs("impression",{mediaType:"not_playable"!=this._mediaType?"video":"display",videoEventAdaptorType:("video"===this._mediaType||"audio"===this._mediaType)&&"nativeCustom"}))})),this.parentTag.on("error",(t=>{this.emit("sessionError",this.getEventArgs("sessionError",{errorType:"video",message:t.toString()})),this.emit("sessionFinish",this.getEventArgs("sessionFinish"))})),this.parentTag.on("start",(()=>{"video"!==this._mediaType&&"audio"!==this._mediaType||this.emit("start",this.getEventArgs("start",{duration:this.parentTag.getDuration(),videoPlayerVolume:this.parentTag.getVolume()}))})),this.parentTag.on("firstquartile",(()=>{this.emit("firstQuartile",this.getEventArgs("firstQuartile"))})),this.parentTag.on("midpoint",(()=>{this.emit("midpoint",this.getEventArgs("midpoint"))})),this.parentTag.on("thirdquartile",(()=>{this.emit("thirdQuartile",this.getEventArgs("thirdQuartile"))})),this.parentTag.on("complete",(()=>{this.emit("complete",this.getEventArgs("complete")),this.emit("sessionFinish",this.getEventArgs("sessionFinish"))})),this.parentTag.on("resume",(t=>{t&&t.userInitiated&&this.emit("resume",this.getEventArgs("resume"))})),this.parentTag.on("pause",(t=>{t&&t.userInitiated&&this.emit("pause",this.getEventArgs("pause"))})),this.parentTag.on("volumechange",(()=>{this.emit("volumeChange",this.getEventArgs("volumeChange",{videoPlayerVolume:this.parentTag.getVolume()}))})),this.parentTag.on("skip",(()=>{this.emit("skipped",this.getEventArgs("skipped")),this.emit("sessionFinish",this.getEventArgs("sessionFinish"))})),this.parentTag.on("click",(()=>{this.emit("adUserInteraction",this.getEventArgs("adUserInteraction",{interactionType:"click"}))})),this.parentTag.on("readystatechange",(t=>{"number"===typeof t&&(t<=2?this.emit("bufferStart",this.getEventArgs("bufferStart")):this.emit("bufferFinish",this.getEventArgs("bufferFinish")))}))}getEventArgs(t,e={}){return{adSessionId:this.adSessionId,timestamp:Date.now(),type:t,data:e}}visiblePlayerStateWorker(){r.intersection(this._containerTag,25).pipe(a.takeUntil(this.remove$)).subscribe((t=>{t?this.emit("playerStateChange",this.getEventArgs("playerStateChange",{state:"normal"})):this.emit("playerStateChange",this.getEventArgs("playerStateChange",{state:"minimized"}))}))}sessionStartEv(t,e){this.registerEvent()}};c=n([r.Emitter],c),e.CustomVerification=c},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseHtmlElement=void 0;const r=i(5),s=i(4),o=i(48);let a=class extends HTMLElement{constructor(){super(),this.subscription=[],this.alreadyConnected=!1,this.remove$=new s.Subject,this._connectStream=new s.ReplaySubject(1),this.attributeStream=new s.ReplaySubject(1)}attributeChangedCallback(t,e,i){this.attributeStream.next({name:t,oldValue:e,newValue:i})}connectedCallback(){this.alreadyConnected=!0,this._connectStream.next()}disconnectedCallback(){this.isConnected||(this.alreadyConnected=!1,this.remove$.next(),this.remove$.complete(),this.subscription.forEach((t=>t.unsubscribe())))}createShadow(t=!0){const e=r.$$("div").attr("id",this.id).css({display:"contents"});this.subscription.push(this._connectStream.subscribe((()=>{if(this.parentElement){r.$$(this.parentElement).append(e,this);e.get().attachShadow({mode:t?"open":"closed"}).appendChild(this)}})))}};a=n([o.CustomAttribute(["bp-active","bp-attach-shadow","bp-manager"])],a),e.BaseHtmlElement=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Events=void 0;const n=i(62),r=i(61),s=i(46);var o;!function(t){t[t.playlistmenudone=0]="playlistmenudone",t[t.themesmanagerdone=1]="themesmanagerdone",t[t.adsinit=2]="adsinit",t[t.uidone=3]="uidone",t[t.volumedone=4]="volumedone",t[t.stopdone=5]="stopdone",t[t.playdone=6]="playdone",t[t.adslinearplayerinit=7]="adslinearplayerinit"}(o||(o={}));e.Events=class{constructor(){this.eventDictionary=new n.Dictionary,this.beenTriggered=[]}add(t,e,i){void 0===(i=i||{replay:!0}).replay&&(o[t]?i.replay=!0:i.replay=!1);const n=this.eventDictionary.get(t);n?n.push({context:i.context,value:e,emitState:1}):this.eventDictionary.set(t,[{context:i.context,value:e,emitState:1}]);const r=this.beenTriggered.find((e=>e.ev===t));return r&&i.replay&&("string"===typeof e&&((new Image).src=e),"function"===typeof e&&e(r.param,r.args)),this}trigger(t,e,...i){let n=this.beenTriggered.find((e=>e.ev===t));n?this.beenTriggered[this.beenTriggered.indexOf(n)]={ev:t,param:e,args:i}:this.beenTriggered.push({ev:t,param:e,args:i});const s=this.eventDictionary.get(t);return s&&r.Each.array(s,(t=>{t.emitState&&("string"===typeof t.value&&((new Image).src=t.value,t.emitState=0),"function"===typeof t.value&&t.value(e,i))})),this}unsubscribe(t,e){if(s.dataType.isString(t)){const i=this.eventDictionary.get(t);i&&r.Each.array(i,(t=>{t.context!=e||(t.emitState=0)}))}else!0===t&&this.eventDictionary.each(((t,e)=>{r.Each.array(t,(t=>{t.emitState=0}))}));return this}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DocIsVisible=void 0;class n{static add(t){n.callbacks.push(t),n.listenerExist||(n.defineEventName(),document.addEventListener(n.visibilityChange,(()=>{n.callbacks.forEach((t=>{t(!document[n.hidden])}))})),n.listenerExist=!0)}static remove(t){const e=n.callbacks.indexOf(t);-1!==e&&n.callbacks.splice(e,1)}static isVisible(){return n.defineEventName(),!document[n.hidden]}static defineEventName(){"undefined"!==typeof document.hidden?(n.hidden="hidden",n.visibilityChange="visibilitychange"):"undefined"!==typeof document.msHidden?(n.hidden="msHidden",n.visibilityChange="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(n.hidden="webkitHidden",n.visibilityChange="webkitvisibilitychange")}}e.DocIsVisible=n,n.callbacks=[],n.listenerExist=!1},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SizeChange=void 0;const n=i(66);e.SizeChange=class{constructor(t,e){this.element=t,this.cb=e,this.oldW=t.clientWidth,this.oldH=t.clientHeight,this.tiker=new n.Ticker((()=>this.check())).setStep(100).start()}destroy(){this.tiker.stop()}check(){if(this.oldW!==this.element.clientWidth||this.oldH!==this.element.clientHeight){this.oldW=this.element.clientWidth,this.oldH=this.element.clientHeight;const t={width:this.oldW,height:this.oldH};this.cb(t)}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetMedia=void 0,e.resetMedia=function(t){return new Promise(((e,i)=>{t.load();const n=()=>{e(),t.removeEventListener("loadedmetadata",n),t.removeEventListener("error",n)};t.addEventListener("loadedmetadata",n),t.addEventListener("error",n)}))}},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.PlayableHtmlElement=void 0;const r=i(5),s=i(4),o=i(63),a=i(7),c=i(48),u=i(69);let h=class extends u.ApiManagerElement{constructor(){super(),this.allowedApiManagers=[o.EManagerType.playable],this.interval$=s.interval(200,s.animationFrameScheduler)}connectedCallback(){this.apiManagerStream.pipe(a.take(1)).subscribe((t=>{this._playableEvent(t),t.on("loadedmetadata",(()=>{setTimeout((()=>{this._volumeWorker(t.getVolume()),this._durationWorker(t.getDuration())}))}))})),super.connectedCallback()}disconnectedCallback(){this.apiManagerStream.pipe(a.take(1)).subscribe((t=>{t.off("mute",this),t.off("unmute",this),t.off("play",this),t.off("pause",this),t.off("playsuccess",this),t.off("playerror",this)})),super.disconnectedCallback()}_playableEvent(t){let e,i;t.stateChangeStream.pipe(a.takeUntil(this.remove$)).subscribe((t=>{t.paused?this.setAttribute("paused",""):this.removeAttribute("paused"),t.muted?this.setAttribute("muted",""):this.removeAttribute("muted")})),t.mediaStream&&t.mediaStream.pipe(a.takeUntil(this.remove$)).subscribe((()=>{this._volumeWorker(t.getVolume())})),t.on("volumechange",(()=>{this._volumeWorker(t.getVolume())})),t.on("loadedmetadata",(()=>{this._durationWorker(t.getDuration()),this._volumeWorker(t.getVolume())})),t.getDuration()&&this._durationWorker(t.getDuration()),s.interval(200,s.animationFrameScheduler).pipe(a.takeUntil(this.remove$)).subscribe((()=>{this._volumeWorker(t.getVolume()),this._durationWorker(t.getDuration()),t.getCurrentTime()!=e&&(this._currentTimeWorker(t.getCurrentTime()),e=t.getCurrentTime()),t.getReadyState()!=i&&(this.setAttribute("ready-state",t.getReadyState().toString()),t.getReadyState()>=3?this.setAttribute("canplay",""):this.removeAttribute("canplay"),i=t.getReadyState())})),r.FullscreenApi.onFSChange((t=>{this.inFullscreen=t}))}_durationWorker(t){this.setAttribute("duration",t.toString()),this.style.setProperty("--duration",t.toString())}_currentTimeWorker(t){if(this.setAttribute("current-time",t.toString()),this.style.setProperty("--current-time",t.toString()),this.duration&&this.currentTime){const t=100/this.duration*this.currentTime;this.style.setProperty("--current-time-percent",t+"%")}}_volumeWorker(t){const e=t.toFixed(2);this.setAttribute("volume",e),this.style.setProperty("--volume",(100*t).toFixed(2)+"%")}};h=n([c.CustomAttribute(["paused","muted","current-time","duration","ready-state","volume","in-fullscreen","canplay"])],h),e.PlayableHtmlElement=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TemplateLoader=void 0;const n=i(5);e.TemplateLoader=class{constructor(t){if("string"===typeof t){const e=n.$$("div").appendTo(document.body).get(),i=/^<template/.test(t)?t:`<template>${t}</template>`;e.innerHTML=i,this.template=e.lastElementChild}else this.template=t;this.wrapper=n.$$("div").append(this.template.content.cloneNode(!0)).get()}appendTo(t){return this.target=t,t.appendChild(this.wrapper),this.show(),this}removeWrapper(){return this.wrapper.parentElement&&this.wrapper.parentElement.removeChild(this.wrapper),this}getWrapper(){return this.wrapper}getFirstInShadow(){return this.getElementsFlat(this.wrapper).find((t=>!(!t.parentNode||"[object ShadowRoot]"!==t.parentNode.toString())))}show(t="contents"){return this.wrapper.style.display=t,this}hide(){return this.wrapper.style.display="none",this}getElementsFlat(t){t=t||this.getWrapper();const e=[];return t.shadowRoot?e.push(...[].slice.call(t.shadowRoot.querySelectorAll("*"))):e.push(...[].slice.call(t.getElementsByTagName("*"))),e.forEach((t=>{t.shadowRoot&&e.push(...this.getElementsFlat(t))})),e}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultConstructorRules=e.constructorByData=void 0;const n=i(4),r=i(5),s=i(49),o=i(163),a=i(186),c=i(187);e.constructorByData=()=>t=>new n.Observable((i=>{t.subscribe((t=>{const n=t.option.adConstructorRules||[],o=t.option.responseType||s.EResponseType.Vast,a=[...n,...e.defaultConstructorRules],c=new r.Rule;c.addRule(a);const u=c.findRule({data:t,responseType:o,adConstructorRules:n});if(u){const e=u.use[0].loader;t.adUnit.setAdUnitConstructor(e)}i.next(t.adUnit)}),(t=>i.error(t)))})),e.defaultConstructorRules=[{test:({data:t})=>t.parsedData instanceof XMLDocument&&!!t.parsedData.getElementsByTagName("VAST")[0]&&t.parsedData.getElementsByTagName("*").length>5,use:[{loader:o.Vast}]},{test:({data:t})=>t.parsedData instanceof XMLDocument&&(!t.parsedData.getElementsByTagName("VAST")[0]&&!t.parsedData.getElementsByTagName("DAAST")[0]||t.parsedData.getElementsByTagName("*").length<6),use:[{loader:a.NoAd}]},{test:({data:t})=>t.parsedData instanceof XMLDocument&&!!t.parsedData.getElementsByTagName("DAAST")[0]&&t.parsedData.getElementsByTagName("*").length>5,use:[{loader:o.Vast}]},{test:({responseType:t})=>t===s.EResponseType.IMA,use:[{loader:c.Ima}]}]},function(t,e,i){"use strict";var n=this&&this.__rest||function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseRawData=e.asd=void 0;const r=i(4),s=i(5),o=i(49),a=i(161);e.asd=(t,e={})=>{n(e,[])},e.parseRawData=(t,e)=>i=>new r.Observable((n=>{i.subscribe((i=>{e.dataParserRules=e.dataParserRules||[],e.responseType=e.responseType||o.EResponseType.Vast;const r=function(t,{dataParserRules:e,responseType:i}){return(new s.Rule).addRule([...e,{test:({data:t,responseType:e})=>("string"===typeof t||t instanceof XMLDocument)&&(e===o.EResponseType.Vast||e===o.EResponseType.IMA),use:[{loader:a.DefaultDataParser}]}]).findFirstLoader({data:t,responseType:i})}(t,{dataParserRules:e.dataParserRules,responseType:e.responseType});if(r){const s=new r(t,e.responseType);s.parsedData.then((t=>{e.responseType=s.responseType,i.setData(t),n.next({adUnit:i,parsedData:t,option:e})})).catch((t=>n.error(t)))}else n.error(...s.Log.error("Ad Manager: cannot find parser for the data:",t))}),(t=>n.error(t)))}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XmlToVerification=void 0;const n=i(5);e.XmlToVerification=class{constructor(t){this.trackingEvents=[],this.vendor=t.getAttribute("vendor")||"",this._JSResource(t.getElementsByTagName("JavaScriptResource")[0]),this._executableResource(t.getElementsByTagName("ExecutableResource")[0]),this._tracking([].slice.call(t.getElementsByTagName("Tracking"))),this.verificationsParameters=t.getElementsByTagName("VerificationParameters")[0]}_JSResource(t){t&&(this.javascriptResource={content:n.getTextContext(t),apiFramework:t.getAttribute("apiFramework")||"",browserOptional:t.getAttribute("browserOptional")||""})}_executableResource(t){t&&(this.executableResource={content:n.getTextContext(t),apiFramework:t.getAttribute("apiFramework")||"",language:t.getAttribute("language")||""})}_tracking(t){t.forEach((t=>{this.trackingEvents.push({event:t.getAttribute("event")||"",content:n.getTextContext(t)})}))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Linear=void 0;const n=i(170),r=i(5),s=i(7),o=i(28),a=i(173),c=i(23),u=i(175),h=i(176),l=i(4),d=i(86);class p extends c.Base{constructor(){super(),this._resumeAllow=!1,this._options={},this._callByTimeUpdate=[],this.adTypes.push(d.EAdType.linear),this.advertisementPlayType=o.EAdvertisementPlayType.linear,this.container=document.createElement("div"),this.container.style.display="none",this.itemsStream=new l.ReplaySubject(1),this.itemsStream.subscribe((t=>{this.items=t;for(let e in t)t.hasOwnProperty(e)&&this.setParameter(e,t[e]);this.clickable=!!t.getClick(),this.parametersUpdate$.next({key:"clickable",value:this.clickable}),this._apiFrameworks(t),this._setupEvents(),this._playerSetup(),this._skipSetup(),this._quartileCounter()})),this.player=new n.Player,this.player.on("loadedmetadata",(()=>{const t=this.player.mediaTag;0===t.videoWidth&&0===t.videoHeight?(r.Logger.Log("linear media type is audio",{group:"ads",closeGroup:!0}),this.mediaTypeStream.next("audio")):(r.Logger.Log("linear media type is video",{group:"ads",closeGroup:!0}),this.mediaTypeStream.next("video"))})),this.player.setMediaTag(document.createElement("video")),this.stateStream.next(o.EAdState.initialize)}_apiFrameworks(t){t.getSourceWithApiFramework()&&(this.mediaTypeStream.next("video"),this.adTypes.push(d.EAdType.vpaid),this.vpaid=new h.VPaid(this),this.assignEvent([{assignTo:this.vpaid}]))}setData(t){return this.itemsStream.next(new a.XmlToLinear(t)),this}setOptions(t){return r.Logger.Log(`ADS Linear - set options ${t}`),this._options=t,this}play(t=!1){return new Promise(((e,i)=>{(this.vpaid?this.vpaid:this.player).play().then((()=>{t&&(this.findAndSendTracker(this.items.getTrackers(),"resume"),this.emit("resume",{userInitiated:!0})),this._resumeAllow||(this._resumeAllow=!0,this.parametersUpdate$.next({key:"resumeAllow",value:this._resumeAllow})),e()})).catch((t=>{i(t)}))}))}pause(t=!1){return(this.vpaid?this.vpaid:this.player).pause(),t&&(this.findAndSendTracker(this.items.getTrackers(),"pause"),this.emit("pause",{userInitiated:!0})),this}unmute(t=!1){return(this.vpaid?this.vpaid:this.player).unmute(),t&&(this.findAndSendTracker(this.items.getTrackers(),"unmute"),this.emit("unmute",{userInitiated:!0})),this}mute(t=!1){return(this.vpaid?this.vpaid:this.player).mute(),t&&(this.findAndSendTracker(this.items.getTrackers(),"mute"),this.emit("mute",{userInitiated:!0})),this}getVolume(){return this.player.muted?0:this.player.getVolume()}setVolume(t){(this.vpaid?this.vpaid:this.player).setVolume(t)}getCurrentTime(){return this.player.mediaTag||this.vpaid?(this.vpaid?this.vpaid:this.player).getCurrentTime():0}getDuration(){return this.player.mediaTag||this.vpaid?(this.vpaid?this.vpaid:this.player).getDuration():0}getState(){return this.vpaid?this.vpaid.getState():{paused:this.player&&this.player.mediaTag.paused,muted:this.player&&this.player.mediaTag.muted,skipable:this.skipable}}load(){if(r.Logger.Log("Linear Load call"),this.vpaid)this.container.style.position="absolute",this.container.style.zIndex="9",this.adContainersStream.next({main:this.container,options:{urgentlyAppendMain:!0}}),this.vpaid.load(),l.combineLatest([this.vpaid.loadedStream,this.player.mediaStream]).subscribe((()=>{r.Logger.Log("Linear.. VPaid is send ready"),this.stateStream.next(o.EAdState.ready)}));else{let t;if(this.adContainersStream.next({main:this.container}),this._options.targetMimeTypes&&this._options.targetMimeTypes.length>0){const e=this._options.targetMimeTypes;for(let i=0;i<e.length&&(t=this.items.getSources().find((t=>t.MIMEType===e[i])),!t);i++);t||r.Logger.Warning(`Not found target mime type. Required - ${this._options.targetMimeTypes}, present - ${this.items.getSources()}`)}else t=this.items.getSources().find((t=>"video/mp4"===t.MIMEType||"audio/mp3"===t.MIMEType||"audio/mpeg"===t.MIMEType));t?(r.Logger.Log(`Linear mute ${this._options}`),this._options.mute&&this.player.mute(),this.player.setSource(t.source),r.Logger.Log("Linear Loaded! Send READY event."),this.player.mediaStream.subscribe((()=>this.stateStream.next(o.EAdState.ready)))):this.stateStream.next(o.EAdState.error)}return this}start(){return r.Logger.Log("Linear Start call"),this.stateStream.pipe(s.filter((t=>t===o.EAdState.ready||t===o.EAdState.canplay)),s.take(1)).subscribe((()=>{r.Logger.Log("linear started"),this.container.style.display="",this.stateStream.next(o.EAdState.start)})),this}remove(){return this.stateStream.next(o.EAdState.remove),this.dispose(),this.player.pause(),this.player.remove(),this.container.parentElement&&this.container.parentElement.removeChild(this.container),this.vpaid&&this.vpaid.remove(),this.remove$.next(),this.remove$.complete(),this}skip(){return new Promise(((t,e)=>{this.vpaid?this.vpaid.skip():!1!==this.skipable?(t(),this.stateStream.next(o.EAdState.skip),this.emit("skip",void 0),this.player.seekTo(0),this.findAndSendTracker(this.items.getTrackers(),"skip"),this.pause()):e("Skip not allowed")}))}click(t=(t=>window.open(t,"_blank"))){this.emit("click",void 0);const e=this.items.getClick();return e&&(t(e),this.clickStream.next(e),this.items.getClickTracking().forEach((t=>{this.sendEvent(t)}))),this}_playerSetup(){this.player.mediaStream.subscribe((t=>{this.container.appendChild(t)})),u.preventSeek(this.player)}_skipSetup(){(0===this.items.getSkipOffset()||this.items.getSkipOffset())&&(this.skipable=!1,this.parametersUpdate$.next({key:"skipable",value:this.skipable})),this._callByTimeUpdate.push((()=>{const t=this.player.mediaTag.duration,e=this.player.mediaTag.currentTime,i=this.items.getSkipOffset();if(i){const n=i-e;n<=0&&(this.skipable=!0,this.parametersUpdate$.next({key:"skipable",value:this.skipable}),this.emit("skipstatechange",o.ESkipStatus.allowed)),this.emit("skiptimeupdate",{remain:n>=0?n:0,total:i,duration:t})}else this.skipable=!0,this.parametersUpdate$.next({key:"skipable",value:this.skipable}),this.emit("skipstatechange",o.ESkipStatus.allowed);0===i&&(this.skipable=!0,this.parametersUpdate$.next({key:"skipable",value:this.skipable}),this.emit("skipstatechange",o.ESkipStatus.allowed),this.emit("skiptimeupdate",{remain:0,total:0,duration:t}))}))}_quartileCounter(){let t=0;this._callByTimeUpdate.push((()=>{const e=this.player.mediaTag.duration,i=this.player.mediaTag.currentTime/e*100;i>=75&&2===t?(t=3,this.findAndSendTracker(this.items.getTrackers(),"thirdquartile"),this.emit("thirdquartile",void 0)):i>=50&&1===t?(t=2,this.findAndSendTracker(this.items.getTrackers(),"midpoint"),this.emit("midpoint",void 0)):i>=25&&0===t&&(t=1,this.findAndSendTracker(this.items.getTrackers(),"firstquartile"),this.emit("firstquartile",void 0))}))}_setupEvents(){this.player.on("canplay",(()=>{this.stateStream.next(o.EAdState.canplay),this.emit("canplay",void 0)}),this),this.player.on("volumechange",(()=>this.emit("volumechange",void 0)),this),this.player.on("loadedmetadata",(()=>{this.paused=this.player.paused,this.muted=this.player.muted,this.parametersUpdate$.next({key:"paused",value:this.paused}),this.parametersUpdate$.next({key:"muted",value:this.muted}),this.stateStream.next(o.EAdState.canplay),this.emit("loadedmetadata",void 0)}),this),this.player.on("playing",(()=>{this.paused=!1,this.parametersUpdate$.next({key:"paused",value:this.paused})}),this);let t=!1;this.player.on("play",(()=>{this.paused=!1,this.parametersUpdate$.next({key:"paused",value:this.paused}),t||(this.findAndSendTracker(this.items.getTrackers(),"start"),this.emit("start",void 0),t=!0),this.emit("play",void 0),this.emit("resume",void 0)}),this),this.player.on("pause",(()=>{this.paused=!0,this.parametersUpdate$.next({key:"paused",value:this.paused}),this.emit("pause",void 0)}),this),this.player.on("ended",(()=>{this.emit("complete",void 0),this.findAndSendTracker(this.items.getTrackers(),"complete"),this.stateStream.next(o.EAdState.complete)}),this),this.player.on("mute",(()=>{this.muted=!0,this.parametersUpdate$.next({key:"muted",value:this.muted}),this.emit("mute",void 0),this.findAndSendTracker(this.items.getTrackers(),"mute")}),this),this.player.on("unmute",(()=>{this.muted=!1,this.parametersUpdate$.next({key:"muted",value:this.muted}),this.emit("unmute",void 0),this.findAndSendTracker(this.items.getTrackers(),"unmute")}),this),this.player.on("fixedtimeupdate",(()=>{this._callByTimeUpdate.forEach((t=>t())),this.emit("fixedtimeupdate",void 0)}),this),this.player.on("readystatechange",(t=>{this.emit("readystatechange",t)}))}}e.Linear=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdVerification=void 0;const n=i(28),r=i(5),s=i(87),o=i(182);e.AdVerification=class{constructor(t,e,i){this.parentTag=e,this.adServingId=i;const a=[];this.parentTag.stateStream.subscribe((c=>{c===n.EAdState.initialize&&t.forEach((t=>{const n=t.javascriptResource;let c;window.OmidSessionClient&&(r.Logger.Trace("AdVerifications.. Catch global OmidSessionClient"),c=window.OmidSessionClient),n&&n.content&&"omid"===(n.apiFramework||"").toLowerCase()&&(r.Logger.Log("OMID Verification init"),c?a.push(t):(r.Logger.Log("cannot find global OmidSessionClient. Run custom verification class"),new s.CustomVerification(t,e,i))),a.length>0&&new o.SessionVerification(c,a,e,i)}))}))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayerAndroidSdkBundle=void 0,i(101);const n=i(159),r=i(192);class s extends n.Bundle{constructor(){super(),this.UI=new r.NewUi(this._adsManager,this._wrapperContainer)}}e.PlayerAndroidSdkBundle=s,window.AdPlayer=s,window.PlayerSdkBundle=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(102);Object.defineProperty(e,"Play",{enumerable:!0,get:function(){return n.Play}});var r=i(135);Object.defineProperty(e,"Stop",{enumerable:!0,get:function(){return r.Stop}});var s=i(136);Object.defineProperty(e,"SourcePlay",{enumerable:!0,get:function(){return s.SourcePlay}});var o=i(137);Object.defineProperty(e,"Pause",{enumerable:!0,get:function(){return o.Pause}});var a=i(138);Object.defineProperty(e,"Mute",{enumerable:!0,get:function(){return a.Mute}});var c=i(139);Object.defineProperty(e,"UnMute",{enumerable:!0,get:function(){return c.UnMute}});var u=i(140);Object.defineProperty(e,"RadialVolume",{enumerable:!0,get:function(){return u.RadialVolume}});var h=i(85);Object.defineProperty(e,"DragTracker",{enumerable:!0,get:function(){return h.DragTracker}});var l=i(142);Object.defineProperty(e,"DragCurrentTime",{enumerable:!0,get:function(){return l.DragCurrentTime}});var d=i(143);Object.defineProperty(e,"Skip",{enumerable:!0,get:function(){return d.Skip}});var p=i(144);Object.defineProperty(e,"PlayableElement",{enumerable:!0,get:function(){return p.PlayableElement}});var f=i(145);Object.defineProperty(e,"DragVolume",{enumerable:!0,get:function(){return f.DragVolume}});var m=i(146);Object.defineProperty(e,"AdElement",{enumerable:!0,get:function(){return m.AdElement}});var b=i(147);Object.defineProperty(e,"SourceSwitcher",{enumerable:!0,get:function(){return b.SourceSwitcher}});var g=i(148);Object.defineProperty(e,"AudioFrequency",{enumerable:!0,get:function(){return g.AudioFrequency}});var v=i(150);Object.defineProperty(e,"Fullscreen",{enumerable:!0,get:function(){return v.Fullscreen}});var y=i(151);Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return y.Time}});var w=i(152);Object.defineProperty(e,"AdClose",{enumerable:!0,get:function(){return w.AdClose}});var S=i(153);Object.defineProperty(e,"VideoBigControl",{enumerable:!0,get:function(){return S.VideoBigControl}});var _=i(154);Object.defineProperty(e,"AdClick",{enumerable:!0,get:function(){return _.AdClick}});var E=i(155);Object.defineProperty(e,"AdAdvertiserText",{enumerable:!0,get:function(){return E.AdAdvertiserText}});var T=i(156);Object.defineProperty(e,"AdContainer",{enumerable:!0,get:function(){return T.AdContainer}});var A=i(157);Object.defineProperty(e,"MediaContainer",{enumerable:!0,get:function(){return A.MediaContainer}});var x=i(158);Object.defineProperty(e,"Download",{enumerable:!0,get:function(){return x.Download}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Play=void 0;const n=i(12),r=i(4),s=i(7),o=i(5);class a extends n.PlayableHtmlElement{constructor(){super()}connectedCallback(){this.alreadyConnected||this.subscription.push(r.fromEvent(this,"click").pipe(s.switchMap((()=>this.apiManagerStream))).subscribe((t=>{o.forcePlay(t.mediaTag||t,{interval:100}).subscribe((()=>{}))}))),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}}e.Play=a,window.customElements&&!customElements.get("bp-play")&&customElements.define("bp-play",a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xhr=e.Request=void 0;const n=i(62),r=i(61),s=i(46);class o{constructor(t){this.type="",this.credentials=!1,this.callbacks=new n.Dictionary,this.headers=new n.Dictionary,this.url=t}responseType(t){return this.type=t,this}withCredentials(t){return this.credentials=t,this}on(t,e){return this.callbacks.set(t,e),this}setHeaders(t,e){return s.dataType.isString(t)?t.length>1&&e&&e.length>0&&this.headers.set(t,e):r.Each.object(t,((t,e)=>{this.headers.set(e,t)})),this}get(){return this.initRequest("GET"),this}post(t=""){return this.initRequest("POST",t),this}initRequest(t,e){try{this.xhrInstance=new XMLHttpRequest,this.xhrInstance.withCredentials=this.credentials,this.headers.each(((t,e)=>{this.xhrInstance.setRequestHeader(e,t)})),this.xhrInstance.open(t,this.url,!0),this.xhrInstance.responseType=this.type,this.xhrInstance.onreadystatechange=()=>{4===this.xhrInstance.readyState&&(200===this.xhrInstance.status||206===this.xhrInstance.status?this.resolve(this.xhrInstance):this.reject("status - "+this.xhrInstance.status))},this.xhrInstance.onerror=t=>{this.reject(t)},this.xhrInstance.send(e)}catch(t){this.reject(t)}}reject(t){const e=this.callbacks.get("error");e&&e(t)}resolve(t){const e=this.callbacks.get("success");e&&e(t)}}e.Request=o,e.xhr=t=>new o(t)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MediaEvents=void 0;const n=i(47),r=i(66);e.MediaEvents=class{constructor(t,e){this.oldTime=0,this.stopTick=!1,this.beingPaused=!1,this.beingPlayed=!1,this.events=t,this.media=n.$$(e),this.mediaTag=e,this.setEvents()}removeEvent(){this.media.off(!0),this.stopTick=!0}trigger(t,e){this.events.trigger(t,e)}setEvents(){let t=!1;this.media.on("play",(e=>{this.trigger("play",e),this.beingPaused&&(this.trigger("resume",e),this.beingPlayed=!0),t&&(this.trigger("repeat"),t=!1)})),this.media.on("interruptend",(t=>{this.trigger("interruptend",t)})),this.media.on("pause",(t=>{this.trigger("pause",t),this.beingPaused=!0})),this.media.on("volumechange",(t=>{this.trigger("volumechange",t),this.beingPlayed&&(this.mediaTag.muted?this.trigger("mute",t):this.mediaTag.muted||this.trigger("unmute",t))})),this.media.on("canplay",(t=>this.trigger("canplay",t))),this.media.on("canplaythrough",(t=>this.trigger("canplaythrough",t))),this.media.on("ended",(e=>{t=!0,this.trigger("beforeended",e),this.trigger("ended",e)})),this.media.on("error",(t=>this.trigger("error",t))),this.media.on("progress",(t=>this.trigger("progress",t))),this.media.on("loadedmetadata",(t=>{this.trigger("loadedmetadata",t)})),this.media.on("loadeddata",(t=>this.trigger("loadeddata",t))),this.media.on("playing",(t=>{this.beingPlayed=!0,this.trigger("playing",t),this.trigger("start",t)})),this.media.on("seeked",(t=>this.trigger("seeked",t))),this.media.on("seeking",(t=>this.trigger("seeking",t))),this.media.on("timeupdate",(t=>{this.trigger("timeupdate",t),this.mediaTag.currentTime==this.mediaTag.duration&&this.trigger("fixedtimeupdate",this.media.get())})),this.media.on("abort",(t=>this.trigger("abort",t))),this.media.on("durationchange",(t=>this.trigger("durationchange",t))),this.media.on("click",(t=>this.trigger("click",t))),this.fixedTimeUpdate(),this.checkReadyState()}fixedTimeUpdate(){let t,e=0,i=!1;const n=new r.Ticker((()=>{this.trigger("fixedtimeupdate",this.media.get()),this.trigger("viewingtime",e),e+=.25,t&&clearInterval(t),this.mediaTag.duration-this.mediaTag.currentTime<.25&&(t=setTimeout((()=>{this.trigger("fixedtimeupdate",this.media.get()),this.trigger("viewingtime",e)}),this.mediaTag.duration-this.mediaTag.currentTime))}));n.setStep(250),this.media.on("pause",(()=>{n.stop(),i=!1})),this.media.on("play",(()=>{this.tickerStart(n)}))}checkReadyState(){let t;const e=new r.Ticker((()=>{this.mediaTag.readyState!==t&&(this.trigger("readystatechange",this.mediaTag.readyState),t=this.mediaTag.readyState)})).setStep(100).start();this.events.add("playerremove",(()=>{e.stop()}))}tickerStart(t){this.mediaTag.paused?(t.stop(),setTimeout((()=>this.tickerStart(t)),250)):t.start()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Timer=void 0;e.Timer=class{constructor(t,e){this.start=(new Date).getTime(),this.stopTick=!1,this.callback=t,this.delay=e,this.end=this.start+e,this.loop()}getCurrentTime(){return this.remain}pause(){return this.stopTick=!0,this}setDelay(t){return this.delay=t,this}play(){return this.remain&&(this.end=(new Date).getTime()+this.remain,this.stopTick=!1,this.loop()),this}onUpdate(t){return this.onUpdateCb=t,this}reset(){return this.end=(new Date).getTime()+1e3*this.delay,this.remain=this.delay,this}clear(){this.remain=null,this.end=null,this.stopTick=!0}loop(){const t=(new Date).getTime();this.end&&(this.remain=this.end-t),this.onUpdateCb&&this.remain&&this.onUpdateCb(this.remain/1e3),this.remain&&this.remain<=0&&!this.stopTick&&(this.callback(),this.stopTick=!0,this.clear()),this.stopTick||window.requestAnimationFrame((()=>{this.loop()}))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Svg=void 0;const n=i(61),r=i(47),s=i(62),o=i(46);e.Svg=class{constructor(t,e){if(this.pathDictionary=new s.Dictionary,this._xmlns="http://www.w3.org/2000/svg",this._xmlns_xlink="http://www.w3.org/1999/xlink",this._version="1.1",this._viewBox="0 0 200 200",this._xml_space="preserve",this._defaultColor="rgba(255,255,255,0.8)",this._beenRun=!1,t instanceof SVGElement)this.svg=r.$$(t),this.svgElement=t;else{const i=t&&t.length&&t[0];"string"===typeof i&&"<"===i.charAt(0)?this._svgDOMParser(i):(this._createSvg(e),t&&n.Each.array(t,(t=>this._appendPath(t))))}this._setColor()}addPath(t){return n.Each.array(t,(t=>{this._appendPath(t)})),this}getSvg(){return this.svg.element}getPath(t){let e=this.pathDictionary.get(t);return e||(e=null),e}setStroke(t){return this._stroke=t,this.svg.attr("stroke",t),this._setColor(),this}setStrokeLinecap(t){return this._strokeLinecap=t,this.svg.attr("stroke-linecap",t),this._setColor(),this}setStrokeWidth(t){return this._strokeWidth=t.toString(),this.svg.attr("stroke-width",t),this._setColor(),this}setDisable(){return this._disable=!0,this.svgElement.style[void 0!=this._stroke?"stroke":"fill"]="rgba(255,255,255,0.5)",this}setEnable(){return this._disable=!1,this._setColor(),this}setColor(t,e){return this._defaultColor=t,this._hoverColor=e,this._hoverColor&&this.addHover(e),this._setColor(),this}addHover(t="rgba(255,255,255,1)"){return this._hoverColor=this._hoverColor||t,this._setColor(),this._beenRun||(this.svg.on("mouseover",(()=>{this._disable||this._setColor(!1)})),this.svg.on("mouseleave",(()=>{this._disable||this._setColor()})),this._beenRun=!0),this}_setColor(t=!0){this.svgElement.style[void 0!=this._stroke?"stroke":"fill"]=t?this._defaultColor:this._hoverColor,this.svg.css({stroke:t?this._defaultColor:this._hoverColor,fill:t?this._defaultColor:this._hoverColor})}_svgDOMParser(t){const e=(new DOMParser).parseFromString(t,"image/svg+xml").children[0];e.children[0]&&(this.svg=r.$$(e),this.svgElement=e)}_createSvg(t){this.svg=r.$$(document.createElementNS(this._xmlns,"svg")),this.svgElement=this.svg.element;const e={version:this._version,viewBox:this._viewBox,"xml:space":this._xml_space};t&&(e.id=t),this.svg.attr(e)}_appendPath(t){const e=r.$$(document.createElementNS(this._xmlns,"path"));this._strokeWidth&&e.attr("stroke-width",this._strokeWidth),this._stroke&&e.attr("stroke",this._stroke),this._strokeLinecap&&e.attr("stroke-linecap",this._strokeLinecap);let i="base";o.dataType.isString(t)?e.attr("d",t):o.dataType.isObject(t)&&(e.attr("d",t.coord),i=t.name),this.pathDictionary.set(i,e),this.svg.append(e.get())}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DragAndDropOld=void 0;e.DragAndDropOld=class{constructor(t,e){this.byX=!0,this.byY=!0,this.moveTar=!0,this.mouseOut=!1,this.fire=!1,this.tar=t,e&&(this.byX=void 0===e.byX||e.byX,this.byY=void 0===e.byY||e.byY,this.moveTar=void 0===e.moveTarget||e.moveTarget,this.cb=e.cbByMove,this.mouseOut=e.mouseOut,this.positionFixed=e.positionFixed,this.cursorByCenter=e.cursorByCenter),this.setListeners()}setListeners(){this.tar.addEventListener("mousedown",this.mouseDown.bind(this)),this.tar.addEventListener("mouseup",this.mouseUp.bind(this)),this.mouseOut&&(this.tar.addEventListener("mouseleave",this.mouseUp.bind(this)),this.tar.addEventListener("mouseout",this.mouseUp.bind(this))),this.tar.addEventListener("mousemove",this.mouseMove.bind(this)),this.tar.addEventListener("touchstart",this.mouseDown.bind(this)),this.tar.addEventListener("touchend",this.mouseUp.bind(this)),this.tar.addEventListener("touchmove",this.mouseMove.bind(this))}mouseDown(t){this.fire=!0,this.mouseMove(t)}mouseMove(t){if(t.preventDefault(),this.fire){const e=t.type;t=void 0!==t.offsetY?t:t.changedTouches[0];let i=0,n=0,r=0,s=0;if((!this.positionFixed||!t.offsetX)&&this.tar.parentElement){const t=this.tar.parentElement.getBoundingClientRect();r=t.left,s=t.top}const o=t.clientX,a=t.clientY,c=t.offsetX||o-r,u=t.offsetY||a-s;this.cursorByCenter&&(i=this.tar.clientWidth/2-c,n=this.tar.clientHeight/2-u);const h=o-r+i,l=a-s+n;this.cb&&this.cb({clientX:o,clientY:a,offsetX:c,offsetY:u,targetX:h,targetY:l,type:e}),this.moveTar&&this.moveTargetElement(h,l)}}moveTargetElement(t,e){this.byX&&(this.tar.style.left=t+"px"),this.byY&&(this.tar.style.top=e+"px")}mouseUp(t){this.mouseMove(t),this.fire=!1}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toTime=void 0,e.toTime=t=>[t/3600,t%3600/60,t%60].map(((t,e)=>t>=1||e>0?`0${Math.floor(t)}`.slice(-2):"")).filter(((t,e)=>t)).join(":")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeStyle=e.AddStyle=void 0,e.AddStyle=(t,e)=>{let i;i=document.createElement("style"),i.setAttribute("type","text/css"),i.setAttribute("hm-player","1"),e.appendChild(i),i.appendChild(document.createTextNode(t))},e.MergeStyle=t=>{let e;if(e=[].slice.call(t.styleSheets).filter((t=>t.ownerNode.getAttribute("hm-player"))),e.length>0){const t=e.splice(0,1)[0].ownerNode;e.forEach((e=>{[].slice.call(e.cssRules).forEach((e=>{t.appendChild(document.createTextNode(e.cssText))})),e.ownerNode&&e.ownerNode.parentElement&&e.ownerNode.parentElement.removeChild(e.ownerNode)}))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTime=void 0,e.getTime=t=>{let e=0;if(t){const i=t.split(":").reverse();let n=1;i.forEach((t=>{e+=parseInt(t,10)*n,n*=60}))}return e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasMask=void 0;const n=i(47),r=i(91);e.CanvasMask=class{constructor(t){const e=n.$$("canvas").css({width:"100%",height:"100%"});this.canvas=e.get(),this.ctx=this.canvas.getContext("2d"),this.image=new Image,this.image.addEventListener("load",(()=>{this.paint({width:this.canvas.clientWidth,height:this.canvas.clientHeight})})),this.image.src=t,new r.SizeChange(this.canvas,(t=>{this.paint(t)})),this.setLnGradient(),this.setColor("#39464e")}setColor(t){return this.color=t,this}setLnGradient(t=[1,0,1]){return this.shema=t,this.gradientStr="createLinearGradient",this}setGlobalCompositeOperation(t){return this.globalCompositeOperation=t,this}setRadGradient(t=[1,0]){return this.shema=t,this.gradientStr="createRadialGradient",this}paint(t){if(this.ctx){const e=this.image.naturalHeight/this.image.naturalWidth,i=t.width*e;if(this.canvas.width=t.width,this.canvas.height=t.height,this.ctx.drawImage(this.image,0,(t.height-i)/2,t.width,i),this.gradientStr){"createLinearGradient"==this.gradientStr?this.gradient=this.ctx.createLinearGradient(0,0,0,t.height):(this.gradient=this.ctx.createRadialGradient(.36*t.width,t.height/2,.3*t.height,.36*t.width,t.height/2,.8*t.height),this.ctx.setTransform(1.4,0,0,1,0,0));let e=0;this.shema.forEach((t=>{this.gradient.addColorStop(e,1==t?this.color:"transparent"),e+=1/(this.shema.length-1)})),this.ctx.fillStyle=this.gradient}this.globalCompositeOperation&&(this.ctx.globalCompositeOperation=this.globalCompositeOperation),this.ctx.fillRect(0,0,t.width,t.height)}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DragAndDrop=void 0;const n=i(47),r=i(4),s=i(7);i(67);e.DragAndDrop=class{constructor(t,e){this.cb=e,this._toDispose=[],this._target=t instanceof HTMLElement?n.$$(t):t,this._sub()}setDrag(t=!0){return this._drag=t,this}_dispose(){return this._toDispose.forEach((t=>t.unsubscribe())),this}_sub(){const t=this._target.get(),e=r.fromEvent(t,"touchstart",{passive:!1}),i=r.fromEvent(document,"touchend",{passive:!1}),n=r.fromEvent(document,"touchmove",{passive:!1}),o=r.fromEvent(t,"mousedown"),a=r.fromEvent(document,"mouseup"),c=r.fromEvent(document,"mousemove"),u=r.merge(c,n).pipe(s.takeUntil(r.merge(a,i)),s.endWith(this.lastPosition)),h=r.merge(o,e).pipe(s.switchMap((e=>u.pipe(s.startWith(t.getBoundingClientRect(),e)))),s.scan(((t,e)=>{if(e){e.preventDefault&&e.preventDefault();let i,n=0;if(e instanceof MouseEvent&&"mousedown"==e.type)i=e.offsetX,n=e.offsetY;else if(window.TouchEvent&&e instanceof TouchEvent&&"touchstart"===e.type){let r,s;t.hasOwnProperty("gbcr")?(r=t.gbcr.left,s=t.gbcr.top):t instanceof DOMRect&&(r=t.left,s=t.top),e.touches.length>0&&(i=e.touches[0].pageX-r,n=e.touches[0].pageY-s)}else i=t.startX,n=t.startY;const r=t instanceof DOMRect?t:e instanceof DOMRect?e:t.gbcr;let s,o;return e instanceof MouseEvent?(s=e.clientX,o=e.clientY):window.TouchEvent&&e instanceof TouchEvent&&e.touches.length>0?(s=e.touches[0].clientX,o=e.touches[0].clientY):(s=0,o=0),{startX:i,startY:n,left:s-i,top:o-n,offsetX:s-r.x,offsetY:o-r.y,gbcr:r}}return t}))).subscribe((t=>{this.lastPosition=t,t.gbcr&&this.cb&&this.cb(t)}));this._toDispose.push(h)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=void 0;const n=i(4);e.Emitter=function(t){return class extends t{emit(t,e){this.subjects=this.subjects||{},this.subjects[t]&&this.subjects[t].next(e)}on(t,e,i){return this.subjects=this.subjects||{},this._handlers=this._handlers||[],this._handlers.push({name:t,handler:e,context:i}),this.subjects[t]=this.subjects[t]||new n.Subject,this.subjects[t].subscribe((t=>{this._handlers.find((t=>t.handler===e))&&e(t)})),this}off(t,e){if(this.subjects=this.subjects||{},this.subjects[t]&&e){const i=this._handlers.findIndex((i=>i.name===t&&i.context===e));i>=0&&(this._handlers.splice(i,1),this.off(t,e))}return this}dispose(t){if(this.subjects=this.subjects||{},t&&this.subjects[t])this.subjects[t].unsubscribe(),delete this.subjects[t];else{const t=this.subjects;for(let e in t)t.hasOwnProperty(e)&&t[e].unsubscribe()}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rule=e.RuleDecorator=void 0,e.RuleDecorator=function(t){return n};class n{constructor(){this.rules=[]}addRule(t){return this.rules.push(...t),this}removeRule(t){const e=this.findRule(t);if(e)return this.rules.splice(this.rules.indexOf(e),1)}findRule(t){return this.rules.find((e=>"string"===typeof e.test&&"string"===typeof t?e.test===t:e.test instanceof RegExp&&"string"===typeof t?e.test.test(t):e.test instanceof Function&&e.test(t)))}findFirstLoader(t){const e=this.findRule(t);return e&&e.use&&e.use[0].loader||void 0}}e.Rule=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseXml=void 0,e.parseXml=function(t,e){let i,n,r;try{void 0!==window.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):void 0!==window.ActiveXObject&&(n=new window.ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t))}catch(t){r=t}e(r,n)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimingRules=void 0;e.TimingRules=class{constructor(t){}addCase(t,e){}remove(){}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTextContext=void 0,e.getTextContext=function(t){let e;return t&&t.textContent&&(e=t.textContent.trim()),e||""}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssignEvent=void 0;const n=i(4);e.AssignEvent=function(t){return class extends t{assignEvent(t){return t.forEach((t=>this._assign(t))),this.subscriptions}cleanAssignedEvent(){this.subscriptions.forEach((t=>t.unsubscribe()))}_assign(t){if(this.subscriptions=this.subscriptions||[],t.eventMap&&(t.assignTo instanceof HTMLElement||"on"in t.assignTo))for(let[e,i]of Object.entries(t.eventMap)){const r=n.fromEvent(t.assignTo,i).subscribe((t=>{this.emit(e,t)}));this.subscriptions.push(r)}else if("emit"in t.assignTo){const e=t.assignTo.emit;t.assignTo.emit=(i,n)=>(this.emit(i,n),e.call(t.assignTo,i,n))}}}}},function(t,e,i){"use strict";function n(t){return Math.PI/180*t}function r(t){return 180/Math.PI*t}Object.defineProperty(e,"__esModule",{value:!0}),e.coordToXY=e.getAngleBetweenPoints=e.sectorLength=e.dist=e.getCoordByAngle=e.toDeg=e.toRad=void 0,e.toRad=n,e.toDeg=r,e.getCoordByAngle=function(t,e){return{x:t*Math.cos(n(e)),y:t*Math.sin(n(e))}},e.dist=function(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))},e.sectorLength=function(t,e){return n(e)*t},e.getAngleBetweenPoints=function(t,e,i,n){const s=t*i+e*n,o=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),a=Math.sqrt(Math.pow(i,2)+Math.pow(n,2));return r(Math.acos(s/(o*a)))},e.coordToXY=function(t,e,i){return{x:t.x+e/2,y:-1*t.y+i/2}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.distinctScan=void 0;const n=i(7);e.distinctScan=()=>t=>t.pipe(n.scan(((t,e)=>{if(t)for(let[i,n]of Object.entries(e))n instanceof Array&&t[i]&&-1===t[i].indexOf(...n)?t[i]=t[i]?[...t[i],...n]:[...n]:t[i]=n;return t})))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFromStorage=e.setToStorage=void 0,e.setToStorage=function(t,e){try{window.localStorage.setItem(t,e)}catch(t){}},e.getFromStorage=function(t){return window.localStorage.getItem(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCircularReplacer=e.stringify=void 0,e.stringify=t=>JSON.stringify(t,e.getCircularReplacer()),e.getCircularReplacer=()=>{const t=new WeakSet;return(e,i)=>{if("object"===typeof i&&null!==i){if(t.has(i))return;t.add(i)}return i}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ElementSizeChangeStream=void 0;const n=i(4),r=i(66);e.ElementSizeChangeStream=function(t){const e=new n.ReplaySubject;e.subscribe({complete:()=>{i.stop()}});const i=new r.Ticker((()=>{const i=t.clientWidth,n=t.clientHeight;e.next({width:i,height:n})})).setStep(500).start();return e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createShadow=void 0;i(67);const n=i(47);e.createShadow=function(t){const e=n.$$("div").css({display:"contents"});if(t.id&&e.attr("id",t.id),t.parentElement){t.parentElement.appendChild(e.get());e.get().attachShadow({mode:"open"}).appendChild(t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forcePlay=void 0;const n=i(4),r=i(7);e.forcePlay=function(t,e={interval:500}){let i=e.count;return n.interval(e.interval,n.animationFrameScheduler).pipe(r.takeWhile((()=>!!t&&(!1!==t.paused&&(void 0===i||(i--,i>0))))),r.switchMap((()=>n.from(t.play()))),r.catchError(((t,i)=>(e.catchErr&&e.catchErr(t),i))),r.take(1))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkEfficiency=e.CrossOrigin=e.changeCrossOrigin=void 0;const n=i(92);e.changeCrossOrigin=function(t,e=!0){return new Promise(((i,n)=>{const r=t.crossOrigin;!t.crossOrigin&&e?t.crossOrigin="anonymous":e||(t.crossOrigin=null),r!==t.crossOrigin?i():n()}))};class r{constructor(t){this.mediaTag=t}on(t="anonymous"){this.mediaTag.crossOrigin=t}off(){this.mediaTag.crossOrigin=null}}e.CrossOrigin=r,e.checkEfficiency=function(t){return new Promise(((e,i)=>{new r(t).on(),n.resetMedia(t).then((()=>{!t.error||t.error.message&&"MEDIA_ELEMENT_ERROR: Format error"!==t.error.message?e(!0):(new r(t).off(),n.resetMedia(t).then((()=>{i()})))}))}))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FullscreenApi=void 0;const n=i(84);e.FullscreenApi=class{constructor(t,e){this.element=t,this.mediaTag=e}setMediaTag(t){return this.mediaTag=t,this}changeFsState(t){return n.getDevice().isMobile&&n.getDevice().os.ios?this.workaroundIOS():this.fsChangeHandler(t),this.fullscreen}toFullscreen(t){return(...e)=>{t.apply(this.element,e)}}exitFullscreen(t){return t?(...e)=>{t.apply(document,e)}:null}addFullScreen(){return this.toFullscreen=this.toFullscreen(this.element.requestFullscreen||this.element.webkitRequestFullscreen||this.element.mozRequestFullScreen||this.element.msRequestFullscreen),this.exitFullscreen=this.exitFullscreen(document.cancelFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.msCancelFullscreen),this}workaroundIOS(){this.mediaTag&&(this.mediaTag.webkitDisplayingFullscreen?this.mediaTag.webkitExitFullScreen&&(this.mediaTag.webkitExitFullscreen(),this.fullscreen=!1):this.mediaTag.webkitEnterFullScreen&&(this.mediaTag.webkitEnterFullscreen(),this.fullscreen=!0))}static onFSChange(t){document.addEventListener("fullscreenChange",(()=>t(!this._fsOut()))),document.addEventListener("fullscreenchange",(()=>t(!this._fsOut()))),document.addEventListener("MSFullscreenChange",(()=>t(!this._fsOut()))),document.addEventListener("mozfullscreenchange",(()=>t(!this._fsOut()))),document.addEventListener("webkitfullscreenchange",(()=>t(!this._fsOut())))}static _fsOut(){return!document._fullscreenElement&&!document.webkitFullscreenElement&&!document.mozFullScreenElement&&!document.msFullscreenElement}fsChangeHandler(t){document._fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?t&&(this.exitFullscreen(),this.fullscreen=!1):t&&(this.toFullscreen(),this.fullscreen=!0)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.intersection=void 0;const n=i(4);e.intersection=(t,e)=>new n.Observable((i=>{new IntersectionObserver((t=>{t[0].intersectionRatio>e/100?i.next(!0):i.next(!1)}),{threshold:e/100}).observe(t)}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMIMEByExt=e.defineType=void 0,e.defineType=function(t){return/audio\/mp3|(audio|video)\/mp4|audio\/flac|video\/webm/.test(t)?"default":/application|m3u8|mpeg|mpegurl/.test(t)?"stream":void 0},e.getMIMEByExt=function(t){const e=t.match(/.+\.(.*)$/);return e?/mp4|webm/.test(e[1])?`video/${e[1]}`:`audio/${e[1]}`:"video/mp4"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GUID=void 0;e.GUID=class{static create(){var t=(new Date).getTime(),e=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(i){var n=16*Math.random();return t>0?(n=(t+n)%16|0,t=Math.floor(t/16)):(n=(e+n)%16|0,e=Math.floor(e/16)),("x"===i?n:3&n|8).toString(16)}))}}},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.AdHtmlElement=void 0;const r=i(48),s=i(69),o=i(63),a=i(7);let c=class extends s.ApiManagerElement{constructor(){super(...arguments),this.allowedApiManagers=[o.EManagerType.adPlayer]}connectedCallback(){this.apiManagerStream.subscribe((t=>{this._eventAdHtml(t)})),super.connectedCallback()}disconnectedCallback(){this.apiManagerStream.subscribe((t=>{t.off("skipstatechange",this),t.off("skiptimeupdate",this)})),super.disconnectedCallback()}_eventAdHtml(t){this.quarter=0,t.on("loadedmetadata",(()=>{})),t.on("thirdquartile",(()=>this.quarter=3)),t.on("midpoint",(()=>this.quarter=2)),t.on("firstquartile",(()=>this.quarter=1)),t.on("complete",(()=>this.quarter=4)),t.on("fixedtimeupdate",(()=>{this.adDuration=t.getDuration().toFixed(0),this.adCurrent=t.getCurrentTime().toFixed(0),this.adTimeRemain=this.adDuration-this.adCurrent,this.adTimeRemainMmSs=`${Math.floor(this.adTimeRemain/60)}:${(this.adTimeRemain%60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}`})),t.parametersUpdate$.pipe(a.takeUntil(this.remove$)).subscribe((t=>{"skipable"===t.key&&(!0===t.value?(this.setAttribute("skipable",""),this.setAttribute("skip-state","allowed")):!1===t.value&&(this.removeAttribute("skip-state"),this.removeAttribute("skipable")))})),t.skipable&&this.setAttribute("skipable",""),t.on("skiptimeupdate",(t=>{this.setAttribute("skip-time-remain",t.remain.toFixed(0).toString()),this.setAttribute("skip-time-duration",t.total.toString());const e=100/t.total*t.remain;this.style.setProperty("--skip-time-remain-prec",e+"%"),this.setAttribute("skip-time-remain-prec",e+"%")}),this)}};c=n([r.CustomAttribute(["skip-state","skipable","skip-time-remain","skip-time-remain-perc","ad-duration","skip-time-total","ad-current","quarter","ad-time-remain","ad-time-remain-mm-ss"])],c),e.AdHtmlElement=c},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.SourceHtmlElement=void 0;const r=i(48),s=i(69),o=i(63);let a=class extends s.ApiManagerElement{constructor(){super(...arguments),this.allowedApiManagers=[o.EManagerType.source]}connectedCallback(){this.apiManagerSub=this.apiManagerStream.subscribe((t=>this.byApiManager(t))),super.connectedCallback()}disconnectedCallback(){this.apiManagerSub&&this.apiManagerSub.unsubscribe(),super.disconnectedCallback()}byApiManager(t){this.apiManager=t,t.currentSourceStream.subscribe((t=>{this.currentSource=t.src}))}};a=n([r.CustomAttribute(["current-source"])],a),e.SourceHtmlElement=a},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.MergePlayableAndSource=void 0;const r=i(93),s=i(63),o=i(48),a=i(4);let c=class extends r.PlayableHtmlElement{constructor(){super(),this.allowedApiManagers=[s.EManagerType.source,s.EManagerType.playable],this.sourceApiManagerStream=new a.ReplaySubject}setApiManager(t){return this.allowType(t.managerTypes)&&this.sourceApiManager!=t&&(-1!=t.managerTypes.indexOf(s.EManagerType.playable)?super.setApiManager(t):-1!=t.managerTypes.indexOf(s.EManagerType.source)&&this._sourceApiWorker(t)),this}_sourceApiWorker(t){this.sourceApiManager=t,this.sourceApiManagerStream.next(t),this.subscription.push(t.currentSourceStream.subscribe((t=>{this.currentSource=t.src})))}disconnectedCallback(){super.disconnectedCallback()}};c=n([o.CustomAttribute(["current-source"])],c),e.MergePlayableAndSource=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TemplatePanel=void 0;const n=i(94),r=i(4),s=i(7),o=i(5);e.TemplatePanel=class{constructor(t,e,i=null){this.template=t,this.api=e,this.childContainer=i,this._elementsFlat=[],this.created$=new r.ReplaySubject(1),this._getTemplateDOM(t).then((t=>{this.templateLoader=new n.TemplateLoader(t);const e=this.templateLoader.getElementsFlat();this._elementsFlat=e,this._initShadow(e),this._initPlaceHolder(e),this._initElements(e)})).catch((t=>{}))}setApis(t){return t.forEach((t=>{this._initElements(this._elementsFlat,t)})),this}setTranslate(){}show(){return this.templateLoader&&this.templateLoader.show(),this}hide(){return this.templateLoader&&this.templateLoader.hide(),this}appendTo(t){return this.templateLoader?this.templateLoader.appendTo(t):setTimeout((()=>this.appendTo(t)),10),this}remove(){return this.templateLoader.removeWrapper(),this.remove$.next(),this.remove$.complete(),this}_initPlaceHolder(t){t.forEach((t=>{t.hasAttribute("media-placeholder")&&(this._appendChildContainer(t),this._checkMediaStream(t,this.api)),t.hasAttribute("container-placeholder")&&(this._appendChildContainer(t),this._checkContainerStream(t,this.api))}))}_initElements(t,e=this.api){t.forEach((t=>{this._initElement(t,e)}))}_initElement(t,e){if("setApiManager"in t){const i=t;this._matchByType(i.allowedApiManagers,this.api.managerTypes)&&i.setApiManager(e)}else setTimeout((()=>this._initElement(t,e)),250)}_checkContainerStream(t,e){e.containerStream&&e.containerStream.pipe(s.takeUntil(this.remove$)).subscribe((e=>{e.isConnected||t.appendChild(e)}))}_appendChildContainer(t){this.childContainer&&t.appendChild(this.childContainer)}_checkMediaStream(t,e){e.mediaStream&&e.mediaStream.pipe(s.takeUntil(this.remove$)).subscribe((e=>{t.appendChild(e)}))}_initShadow(t){const e=t.find((t=>t.hasAttribute("shadow")||t.hasAttribute("bp-attach-shadow")));e&&o.createShadow(e)}_getTemplateDOM(t){return new Promise(((e,i)=>{"string"===typeof t?/^(?:https?:)?\/\//.test(t)?o.xhr(t).on("success",(t=>e(t.responseText))).on("error",(t=>i(t))).get():e(t):t instanceof HTMLTemplateElement?e(t):i(`This template is undefined format ${t}. Require url to template/stringify template/HTMLTemplateElement.`)}))}_matchByType(t,e){let i=!1;return e.forEach((e=>{-1!=t.indexOf(e)&&(i=!0)})),i}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stop=void 0;const n=i(12),r=i(4),s=i(7);class o extends n.PlayableHtmlElement{constructor(){super()}connectedCallback(){this.alreadyConnected||this.apiManagerStream.pipe(s.take(1),s.switchMap((()=>r.fromEvent(this,"click")))).subscribe((()=>{this.apiManager.pause(),setTimeout((()=>{this.apiManager.resetSource()}))})),super.connectedCallback()}}e.Stop=o,window.customElements&&!customElements.get("bp-stop")&&customElements.define("bp-stop",o)},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.SourcePlay=void 0;const r=i(12),s=i(4),o=i(5);let a=class extends r.MergePlayableAndSource{constructor(){super(),this.attributeStream.subscribe((({name:t,newValue:e})=>{"source"===t&&e!==this.source&&(this.source=e)}))}connectedCallback(){this.alreadyConnected||this.subscription.push(this.sourceApiManagerStream.subscribe((()=>{this.subscription.push(s.fromEvent(this,"click").subscribe((()=>{this._playSource()})))}))),super.connectedCallback()}_playSource(){if(this.sourceApiManager){let t;this.source?(this.sourceApiManager.setSources([{src:this.source,MIMEType:o.getMIMEByExt(this.source)}]),t=this.sourceApiManager.getNext()):t=this.sourceApiManager.currentSource,t&&(this.sourceApiManager.resetSource(),this.sourceApiManager.playSource(t),o.forcePlay(this.sourceApiManager.mediaTag,{interval:200}).subscribe((()=>{})))}}};a=n([r.CustomAttribute(["source"])],a),e.SourcePlay=a,window.customElements&&!customElements.get("bp-source-play")&&customElements.define("bp-source-play",a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pause=void 0;const n=i(12),r=i(4),s=i(7);class o extends n.PlayableHtmlElement{constructor(){super()}connectedCallback(){this.alreadyConnected||this.subscription.push(r.fromEvent(this,"click").pipe(s.switchMap((()=>this.apiManagerStream))).subscribe((t=>{t.pause()}))),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}}e.Pause=o,window.customElements&&!customElements.get("bp-pause")&&customElements.define("bp-pause",o)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mute=void 0;const n=i(12),r=i(4),s=i(7),o=i(5);class a extends n.PlayableHtmlElement{constructor(){super()}connectedCallback(){this.alreadyConnected||this.subscription.push(r.fromEvent(this,"click").pipe(s.takeUntil(this.remove$),s.switchMap((()=>this.apiManagerStream))).subscribe((t=>{o.Logger.Log("CustomElement:Mute.. mute action"),t.mute()}))),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}}e.Mute=a,window.customElements&&!customElements.get("bp-mute")&&customElements.define("bp-mute",a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UnMute=void 0;const n=i(12),r=i(4),s=i(7),o=i(5);class a extends n.PlayableHtmlElement{constructor(){super()}connectedCallback(){this.alreadyConnected||this.subscription.push(r.fromEvent(this,"click").pipe(s.takeUntil(this.remove$),s.switchMap((()=>this.apiManagerStream))).subscribe((t=>{o.Logger.Log("CustomElement:UnMute.. unmute action"),t.unmute()}))),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}}e.UnMute=a,window.customElements&&!customElements.get("bp-unmute")&&customElements.define("bp-unmute",a)},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.RadialVolume=void 0;const r=i(141),s=i(12),o=i(4),a=i(7);let c=class extends s.PlayableHtmlElement{constructor(){super(),this.canvas=document.createElement("canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.circleCanvas=new r.RadialCanvas(this.canvas).setAccentColor("white").setAccentLineWeight(10).setDefLineWeight(5).setMainColor("grey").setPointColor("white").setPointRadius(5).setDefAngleInDeg({start:240,end:300}),this.apiManagerStream.subscribe((t=>{this.circleCanvas.setCurrentLevelInPercent(100*t.getVolume())})),o.combineLatest([this.apiManagerStream,this.circleCanvas.dragStream]).subscribe((([t,e])=>{e.percent>=0&&e.percent<=100&&(t.setVolume(e.percent),t.getVolume()>.01&&t.muted?t.unmute():t.getVolume()<=.01&&!t.muted&&t.mute())})),this.attributeStream.subscribe((({name:t,newValue:e})=>{"string"===typeof e&&("accent-color"===t&&this.circleCanvas.setAccentColor(e),"main-color"===t&&this.circleCanvas.setMainColor(e),"point-color"===t&&this.circleCanvas.setPointColor(e),"point-radius"===t&&this.circleCanvas.setPointRadius(Number(e)),"line-weight"===t&&this.circleCanvas.setDefLineWeight(Number(e)),"accent-line-weight"===t&&this.circleCanvas.setAccentLineWeight(Number(e)))})),this._event()}_event(){this.apiManagerStream.pipe(a.takeUntil(this.remove$)).subscribe((t=>{t.on("volumechange",(()=>{this.circleCanvas.setCurrentLevelInPercent(100*t.getVolume())}))}))}connectedCallback(){this.appendChild(this.canvas),super.connectedCallback()}disconnectedCallback(){}};c=n([s.CustomAttribute(["accent-color","main-color","point-color","point-radius","line-weight","accent-line-weight"])],c),e.RadialVolume=c,window.customElements&&!customElements.get("bp-radial-volume")&&customElements.define("bp-radial-volume",c),window.customElements&&!customElements.get("radial-volume")&&customElements.define("radial-volume",class extends c{})},function(t,e,i){"use strict";var n=this&&this.__rest||function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.RadialCanvas=e.RadialCanvasPublic=void 0;const r=i(4),s=i(5);class o{constructor(){this.defAngle={start:240,end:300},this.currentLevelAngle=0,this.mainColor="grey",this.accentColor="white",this.pointColor="white",this.defLineWidth=5,this.accentLineWidth=7,this.pointRadius=5}setDefAngleInDeg(t){return this.defAngle=t,this}setCurrentLevelInDeg(t){return this.currentLevelAngle=t,this}setCurrentLevelInPercent(t){const e=this.defAngle.start,i=(360-(this.defAngle.end-e))/100*t,n=e-i<0?360-Math.abs(e-i):e-i;return this.setCurrentLevelInDeg(n),this}setMainColor(t){return this.mainColor=t,this}setAccentColor(t){return this.accentColor=t,this}setPointColor(t){return this.pointColor=t,this}setDefLineWeight(t){return this.defLineWidth=t,this}setAccentLineWeight(t){return this.accentLineWidth=t,this}setPointRadius(t){return this.pointRadius=t,this}}e.RadialCanvasPublic=o;e.RadialCanvas=class extends o{constructor(t){super(),this.canvas=t,this.dragStream=new r.ReplaySubject,this.ctx=t.getContext("2d"),this.dragAndDrop=new s.DragAndDrop(t,(t=>{const e=t.offsetX-this.x,i=-1*(t.offsetY-this.y),n=s.dist(0,0,e,i);let r=s.getAngleBetweenPoints(n,0,e,i);i<0&&(r=360-r);const o=s.sectorLength(this.mainRadius,this.defAngle.start-(r>this.defAngle.start?r-360:r)),a=s.sectorLength(this.mainRadius,this.defAngle.start-(this.defAngle.end>this.defAngle.start?this.defAngle.end-360:this.defAngle.end)),c=100/a*o;this.currentLevelAngle=c>100&&c<110?this.defAngle.end:c>110&&c<120?this.defAngle.start:r,this.dragStream.next({percent:c,sectorLength:o,totalLength:a}),this._draw()}));s.ElementSizeChangeStream(t).subscribe((e=>{t.width=this.width=e.width,t.height=this.height=e.height,this.mainRadius=e.width/2-15,this.x=e.width/2,this.y=e.height/2,this._draw()}))}_draw(){this.x&&this.y&&this.mainRadius&&(this.ctx.clearRect(0,0,this.width,this.height),this._drawMain(),this._drawAccent(),this._drawPoint())}_drawMain(){this._drawArc({color:this.mainColor,x:this.x,y:this.y,r:this.mainRadius,startDeg:this.defAngle.start,endDeg:this.defAngle.end,lineWidth:this.defLineWidth})}_drawAccent(){this._drawArc({color:this.accentColor,x:this.x,y:this.y,r:this.mainRadius,startDeg:this.defAngle.start,endDeg:this.currentLevelAngle,lineWidth:this.accentLineWidth})}_drawPoint(){if(this.pointRadius){const t=s.getCoordByAngle(this.mainRadius,this.currentLevelAngle);let e=s.coordToXY(t,this.width,this.height);this.ctx.beginPath(),this.ctx.fillStyle=this.pointColor,this.ctx.arc(e.x,e.y,this.pointRadius,0,360),this.ctx.fill()}}_drawArc(t){var{color:e="black",lineWidth:i=5}=t,r=n(t,["color","lineWidth"]);this.ctx.beginPath(),this.ctx.strokeStyle=e,this.ctx.lineWidth=i,this.ctx.arc(r.x,r.y,r.r,s.toRad(360-r.startDeg),s.toRad(360-r.endDeg)),this.ctx.stroke()}}},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.DragCurrentTime=void 0;const r=i(85),s=i(12),o=i(5);let a=class extends r.DragTracker{constructor(){super(),this.attributeStream.subscribe((({name:t,newValue:e})=>{"drag-x"!==t&&"drag-y"!==t||this._action()})),this.apiManagerStream.subscribe((t=>this.api=t))}_action(){}onDrag(t){if(this.api&&this.api.seekTo&&(this.dragByX||this.dragByY)){let t;this.dragByX?t=this.getAttribute("drag-x"):this.dragByY&&(t=this.getAttribute("drag-y"));const e=this.api.getDuration()/100*Number(t);this.setAttribute("drag-time-hms",o.toTime(e)),this.dragged||this.api.seekTo(e)}}};a=n([s.CustomAttribute(["drag-by-x","drag-by-y","drag-time-hms"])],a),e.DragCurrentTime=a,window.customElements&&!customElements.get("bp-drag-currenttime")&&customElements.define("bp-drag-currenttime",a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Skip=void 0;const n=i(12),r=i(4);i(5);class s extends n.AdHtmlElement{constructor(){super(),this._event()}_event(){this.apiManagerStream.subscribe((t=>{r.fromEvent(this,"click").subscribe((()=>{!1!==t.skipable&&t.skip()}))}))}}e.Skip=s,window.customElements&&!customElements.get("ad-skip")&&customElements.define("ad-skip",s)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayableElement=void 0;const n=i(12);class r extends n.PlayableHtmlElement{constructor(){super()}connectedCallback(){super.connectedCallback()}}e.PlayableElement=r,window.customElements&&!customElements.get("bp-playable-element")&&customElements.define("bp-playable-element",class extends r{})},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.DragVolume=void 0;const r=i(12),s=i(85);let o=class extends s.DragTracker{constructor(){super(),this.apiManagerStream.subscribe((t=>this.api=t))}onDrag(t){if(this.api&&(this.dragByX||this.dragByY)){let t;this.dragByX?t=this.getAttribute("drag-x"):this.dragByY&&(t=this.getAttribute("drag-y")),this.api.setVolume(t),t<.05?this.api.mute():this.api.unmute()}}};o=n([r.CustomAttribute(["drag-by-x","drag-by-y"])],o),e.DragVolume=o,window.customElements&&!customElements.get("bp-drag-volume")&&customElements.define("bp-drag-volume",o)},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.AdElement=void 0;const r=i(12),s=i(4),o=i(7);let a=class extends r.AdHtmlElement{constructor(){super(),this.apiManagerStream.subscribe((t=>{t.extensionStream.subscribe((t=>{const e=t.find((t=>"linkTxt"===t.type));e&&this.setAttribute("advertisement-text",decodeURIComponent(e.content))}))}))}connectedCallback(){this.apiManagerStream.pipe(o.takeUntil(this.remove$)).subscribe((()=>{this.apiManager.clickable&&this.isClickable&&!this.click$&&(this.click$=s.fromEvent(this,"click").subscribe((()=>{this.apiManager&&this.apiManager.click()})))})),super.connectedCallback()}};a=n([r.CustomAttribute(["advertisement-text","is-clickable"])],a),e.AdElement=a,window.customElements&&!customElements.get("ad-element")&&customElements.define("ad-element",a)},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.SourceSwitcher=void 0;const r=i(12),s=i(4),o=i(5);let a=class extends r.SourceHtmlElement{constructor(){super(),this.apiManagerStream.subscribe((t=>{t.currentSourceStream.subscribe((t=>{t.quality&&(t.quality.isHD||t.quality.hd?this.status="on":this.status="off")}))}))}connectedCallback(){this.alreadyConnected||(null===this.status&&(this.status="off"),this.subscription.push(s.fromEvent(this,"click").subscribe((()=>{this.active="on"!==this.status&&"on",this.status="on"===this.status?"off":"on",this._byChangeStatus(!0)})))),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}_byChangeStatus(t){if(this.apiManager){let e=!1;if("on"===this.status){const i=this.apiManager.getHD();i&&(t&&(i.byUser=!0),this.apiManager.playSource(i),e=!0)}else if("off"===this.status){const i=this.apiManager.getDefault();i&&(t&&(i.byUser=!0),this.apiManager.playSource(i),e=!0)}this.playByChange&&e&&o.forcePlay(this.apiManager.mediaTag,{interval:250}).subscribe((()=>{}))}}};a=n([r.CustomAttribute(["status","play-by-change","active"])],a),e.SourceSwitcher=a,window.customElements&&!customElements.get("bp-source-switcher")&&customElements.define("bp-source-switcher",a),window.customElements&&!customElements.get("bp-quality-switcher")&&customElements.define("bp-quality-switcher",class extends a{})},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.AudioFrequency=void 0;const r=i(149),s=i(4),o=i(7),a=i(5),c=i(12);let u=class extends c.PlayableHtmlElement{constructor(t){super(),this.firstTry=!0,this.player=t,this.canvas=document.createElement("canvas"),this.canvas.width=this.clientWidth,this.canvas.height=this.clientHeight,this.canvasCtx=this.canvas.getContext("2d"),this.apiManagerStream.pipe(o.switchMap((t=>t.mediaStream||s.of(0)))).subscribe((t=>{t instanceof HTMLMediaElement&&(this.mediaTag=t)}))}connectedCallback(){this.alreadyConnected||(this.appendChild(this.canvas),this._addListener(),s.interval(1e3,s.animationFrameScheduler).pipe(o.takeWhile((()=>this.isConnected))).subscribe((()=>{this.canvas.width=this.clientWidth,this.canvas.height=this.clientHeight}))),super.connectedCallback()}disconnectedCallback(){this.apiManager&&this.apiManager.off("play",this),super.disconnectedCallback()}_draw(){if(this.canvasCtx.clearRect(0,0,this.clientWidth,this.clientHeight),this.audioFrequency){const t=this.audioFrequency.dataUpdate(),e=this.graphCount||t.length;let i,n=0;for(let r=0;r<e;r++)i=t[Math.round(r*(t.length/e))]*this.clientHeight/256,this.canvasCtx.fillStyle=this.graphColor||"rgb(200,50,50)",this.canvasCtx.fillRect(n,this.clientHeight-i,this.clientWidth/e,i),n+=this.clientWidth/e+1}}_step(t){if(this.apiManager&&!this.apiManager.paused)this._draw(),this.start=0;else{this.start||(this.start=t),t-this.start<2e3&&this._draw()}window.requestAnimationFrame((t=>this._step(t)))}_addListener(){a.getDevice().browser.safari||a.getDevice().os.ios||this.apiManagerStream.subscribe((t=>{t.on("loadedmetadata",(()=>{this.apiManager.mediaStream&&this.apiManager.mediaStream.subscribe((t=>{this.firstTry&&(this.firstTry=!1,a.checkEfficiency(t).then((()=>{this.freqAllow=!0,this._initFreqApi()})))}))}),{replay:!0})}))}_initFreqApi(){this.apiManager.paused?setTimeout((()=>{this._initFreqApi()}),250):(this.freqAllow&&!this.audioFrequency&&this.mediaTag&&(this.audioFrequency=new r.AudioFrequencyData(this.mediaTag)),this.audioFrequency&&window.requestAnimationFrame((t=>this._step(t))))}};u=n([c.CustomAttribute(["graph-color","graph-count","check-efficiency"])],u),e.AudioFrequency=u,window.customElements&&!customElements.get("audio-frequency-view")&&customElements.define("audio-frequency-view",u)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AudioFrequencyData=void 0;e.AudioFrequencyData=class{constructor(t){this.mediaTag=t;const e=new(window.AudioContext||window.webkitAudioContext),i=e.createMediaElementSource(t);this.analyser=e.createAnalyser(),i.connect(this.analyser),this.analyser.connect(e.destination),this.data=new Uint8Array(this.analyser.frequencyBinCount)}dataUpdate(){return this.analyser.getByteFrequencyData(this.data),this.data}}},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.Fullscreen=void 0;const r=i(12),s=i(5),o=i(4),a=i(7);let c=class extends r.PlayableHtmlElement{constructor(){super()}connectedCallback(){this.fullscreenWrapper=document.getElementById(this.fullscreenWrapperId||"fullscreen-wrapper"),this.fullscreenWrapper&&!this.fullscreenApi?this.init():this.fullscreenWrapper,super.connectedCallback()}init(){this.fullscreenApi=new s.FullscreenApi(this.fullscreenWrapper).addFullScreen(),this.apiManagerStream.subscribe((t=>{t.mediaStream&&t.mediaStream.subscribe((t=>{this.fullscreenApi&&this.fullscreenApi.setMediaTag(t)}))}));const t=o.fromEvent(this,"click");this.byDoubleClick?t.pipe(a.buffer(t.pipe(a.debounceTime(200))),a.map((t=>t.length)),a.filter((t=>2===t))).subscribe((()=>{this.fullscreenApi&&this.fullscreenApi.changeFsState(!0)})):t.subscribe((t=>{this.fullscreenApi&&this.fullscreenApi.changeFsState(t)}))}};c=n([r.CustomAttribute(["fullscreen-wrapper-id","by-double-click"])],c),e.Fullscreen=c,window.customElements&&!customElements.get("bp-fullscreen")&&customElements.define("bp-fullscreen",c)},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.Time=void 0;const r=i(12),s=i(5),o=i(4);let a=class extends r.PlayableHtmlElement{constructor(){super()}connectedCallback(){this.alreadyConnected||o.combineLatest([this.apiManagerStream,this.interval$]).subscribe((([t])=>{this.durationHhmmss=s.toTime(t.getDuration()),this.currentTimeHhmmss=s.toTime(t.getCurrentTime())})),super.connectedCallback()}};a=n([r.CustomAttribute(["duration-hhmmss","current-time-hhmmss"])],a),e.Time=a,window.customElements&&!customElements.get("bp-time")&&customElements.define("bp-time",a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdClose=void 0;const n=i(12),r=i(4);i(5);class s extends n.AdHtmlElement{constructor(){super(),this._event()}_event(){this.apiManagerStream.subscribe((t=>{r.fromEvent(this,"click").subscribe((()=>{(t.skipable||void 0===t.skipable)&&t.close()}))}))}}e.AdClose=s,window.customElements&&!customElements.get("ad-close")&&customElements.define("ad-close",s)},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.VideoBigControl=void 0;const r=i(12),s=i(4),o=i(7);let a=class extends r.PlayableHtmlElement{constructor(){super()}connectedCallback(){if(!this.alreadyConnected){const t=s.fromEvent(this,"click");this.hasAttribute("play-pause-by-click")&&t.pipe(o.buffer(t.pipe(o.debounceTime(200))),o.map((t=>t.length)),o.filter((t=>1===t)),o.switchMap((()=>this.apiManagerStream))).subscribe((t=>{t.getState(),t.paused?t.play().then().catch():t.pause()}))}super.connectedCallback()}};a=n([r.CustomAttribute(["play-pause-by-click"])],a),e.VideoBigControl=a,window.customElements&&!customElements.get("bp-video-control")&&customElements.define("bp-video-control",a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdClick=void 0;const n=i(12),r=i(4),s=i(7);class o extends n.AdHtmlElement{constructor(){super()}connectedCallback(){this.alreadyConnected||this.apiManagerStream.pipe(s.takeUntil(this.remove$)).subscribe((()=>{this.apiManager.clickable?r.fromEvent(this,"click").subscribe((()=>{this.apiManager&&this.apiManager.click()})):this.style.display="none"})),super.connectedCallback()}}e.AdClick=o,window.customElements&&!customElements.get("ad-click")&&customElements.define("ad-click",o)},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.AdAdvertiserText=void 0;const r=i(12);let s=class extends r.AdHtmlElement{constructor(){super(),this.apiManagerStream.subscribe((t=>{t.extensionStream.subscribe((t=>{const e=t.find((t=>"linkTxt"===t.type));e&&this.setAttribute("advertiser-text",decodeURIComponent(e.content))}))}))}};s=n([r.CustomAttribute(["advertiser-text"])],s),e.AdAdvertiserText=s,window.customElements&&!customElements.get("ad-advertiser-text")&&customElements.define("ad-advertiser-text",s)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdContainer=void 0;const n=i(12),r=i(7);i(5);class s extends n.AdHtmlElement{constructor(){super()}connectedCallback(){this.alreadyConnected||this.apiManagerStream.pipe(r.switchMap((t=>t.containerStream)),r.takeUntil(this.remove$)).subscribe((t=>this.appendChild(t))),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}}e.AdContainer=s,window.customElements&&!customElements.get("bp-container")&&customElements.define("bp-container",s)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MediaContainer=void 0;const n=i(12),r=i(7);class s extends n.PlayableHtmlElement{constructor(){super()}connectedCallback(){this.alreadyConnected||this.apiManagerStream.pipe(r.takeUntil(this.remove$)).subscribe((t=>{t.mediaStream&&t.mediaStream.pipe(r.takeUntil(this.remove$)).subscribe((t=>{this.appendChild(t)}))})),super.connectedCallback()}}e.MediaContainer=s,window.customElements&&!customElements.get("bp-media-container")&&customElements.define("bp-media-container",s)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Download=void 0;const n=i(12),r=i(7);class s extends n.SourceHtmlElement{constructor(){super(),this._aTag=document.createElement("a"),this._aTag.target="_blank"}connectedCallback(){this.alreadyConnected||this.apiManagerStream.pipe(r.takeUntil(this.remove$)).subscribe((t=>{this.childNodes.forEach((t=>{this._aTag.appendChild(t)})),setTimeout((()=>{this.appendChild(this._aTag)}),100);const e=t.currentSource.src,i=e.match(/.*\/(.*\..*)$/);this._aTag.href=e,this._aTag.download=t.currentSource.title||i&&i[1]||(new Date).getTime().toString()+t.currentSource.MIMEType}))}disconnectedCallback(){super.disconnectedCallback()}}e.Download=s,window.customElements&&!customElements.get("bp-download")&&customElements.define("bp-download",s)},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.Bundle=void 0;const r=i(5),s=i(4),o=i(160),a=i(7);let c=class{constructor(){this.remove$=new s.Subject,this._wrapperContainer=document.createElement("div"),this._videoisdone=!1,this._wrapperContainer.style.display="none",this.configStream=new s.ReplaySubject(1),this._adsManager=new o.AdsManager,this._adsManager.currentAd$.pipe(a.takeUntil(this.remove$)).subscribe((t=>{this._initUI(),this.assignEvent([{assignTo:t}])})),this._adsManager.videoIsLoaded$.pipe(a.take(1)).subscribe((()=>{this.emit("ready",this._adsManager.currentAd||void 0),this.UI&&this.UI.show()})),this._adsManager.videoIsDone$.pipe(a.takeUntil(this.remove$)).subscribe((()=>{this._videoisdone=!0,this.emit("videoisdone",void 0)})),this._adsManager.companionIsStart$.pipe(a.takeUntil(this.remove$)).subscribe((()=>{if(this.UI.hasCompanion){this.UI.hide();const t=window.innerWidth<window.innerHeight;this.UI.showCompanion(t),this.emit("hascompanion",void 0),s.fromEvent(window,"resize").pipe(a.takeUntil(this._adsManager.currentAdIsDone$)).subscribe((()=>{const t=window.innerWidth<window.innerHeight;this.UI.showCompanion(t)}))}else this._adsManager.currentAdIsDone$.next()})),this._adsManager.companionIsDone$.pipe(a.takeUntil(this.remove$)).subscribe((()=>{this.UI.hideCompanion()})),this._adsManager.currentAdIsDone$.pipe(a.takeUntil(this.remove$)).subscribe((()=>{this._videoisdone&&this.emit("reward",void 0)})),this._adsManager.currentAdIsError$.pipe(a.takeUntil(this.remove$)).subscribe((()=>{this._adsManager.close()})),this._adsManager.on("error",(t=>{this.emit("error",t)})),this._adsManager.on("skip",(t=>{this._videoisdone=!0,this.emit("videoisskipped",void 0)})),this.configStream.pipe(a.takeUntil(this.remove$)).subscribe((t=>{this._adsManager.setConfig(t),t.videoOptions&&(void 0!==t.videoOptions.showSkipButton&&(t.videoOptions.showSkipButton?this.UI.showSkipButton():this.UI.hideSkipButton()),void 0!==t.videoOptions.skipText?this.UI.setSkipText(t.videoOptions.skipText):this.UI.setSkipText(t.videoOptions.skipText="Skip Ad"),t.videoOptions.backgroundColor&&this.UI.setBackgroudColor(t.videoOptions.backgroundColor),void 0!==t.videoOptions.learnMoreText?this.UI.setLearnMoreText(t.videoOptions.learnMoreText):this.UI.setLearnMoreText(t.videoOptions.learnMoreText="Learn More"),void 0!==t.videoOptions.learnMore.enabled&&(t.videoOptions.learnMore.enabled?this.UI.showLearnMoreButton():this.UI.hideLearnMoreButton()),void 0!==t.videoOptions.setMute&&(t.videoOptions.setMute?this.UI.showMuteButton():this.UI.hideMuteButton()))}))}_initUI(){this.UI&&this._adsManager.containerStream.next(this.UI.childMainContainer.get())}setConfig(t={}){return this.configStream.next(t),this}setZone(t){const e=`https://inv-nets.admixer.net/vast.aspx?rct=3&zone=${t}`;return this.setAdUnits([{name:"default",data:e}]),this}setAdUnits(t){return this._adsManager.setAdUnits(t),this}appendTo(t){return this.pubContainer=t,this.pubContainer.appendChild(this._wrapperContainer),this}mute(){return this._adsManager.mute(),this}unmute(){return this._adsManager.unmute(),this}play(){return r.forcePlay(this._adsManager,{interval:200}).subscribe((()=>{})),this}pause(){return this._adsManager.pause(),this}remove(){return this.close(),this}close(){return this._wrapperContainer.style.display="none",this.UI.remove(),this._adsManager.close(),this._adsManager.remove(),this}loadAd(t="default"){return this._adsManager.loadAd(t),this}showAd(t){return this._wrapperContainer.style.display="block",this._adsManager.showAd(),this}showSkip(){return this.UI.showSkipButton(),this}hideSkip(){return this.UI.hideSkipButton(),this}showMute(){return this.UI.showMuteButton(),this}hideMute(){return this.UI.hideMuteButton(),this}showLearnMore(){return this.UI.showLearnMoreButton(),this}hideLearnMore(){return this.UI.hideLearnMoreButton(),this}};c=n([r.AssignEvent,r.Emitter],c),e.Bundle=c},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.AdsManager=void 0;const r=i(63),s=i(4),o=i(5),a=i(86),c=i(7);let u=class{constructor(){this.managerTypes=[r.EManagerType.adPlayer,r.EManagerType.playable],this.remove$=new s.Subject,this.clickable=!0,this.parametersUpdate$=new s.ReplaySubject,this.containers$=new s.ReplaySubject,this.currentAdReady$=new s.ReplaySubject,this.currentAd$=new s.ReplaySubject(1),this.videoIsLoaded$=new s.ReplaySubject,this.videoIsDone$=new s.ReplaySubject,this.companionIsStart$=new s.ReplaySubject,this.companionIsDone$=new s.ReplaySubject,this.currentAdIsDone$=new s.ReplaySubject,this.currentAdIsError$=new s.ReplaySubject,this.extensionStream=new s.ReplaySubject,this.stateChangeStream=new s.ReplaySubject,this.adStateStream=new s.ReplaySubject,this.publisherContainerStream=new s.ReplaySubject,this.mediaTypeStream=new s.ReplaySubject,this.containerStream=new s.ReplaySubject,this.adUnits=[],this.adManagers=[]}setAdUnits(t){return this.adUnits.push(...t),this.adUnits.forEach((t=>{this.adManagers.push({name:t.name,adManager:this._getAdManagers(t.data)})})),this}showAd(){this.currentAd&&this.currentAd.start()}loadAd(t){const e=this.adManagers.find((e=>e.name==t));return e&&this._playStack(e.adManager),this}setConfig(t){return o.Logger.Log(`SDK AdManager.. set config ${t}`),t.videoOptions&&t.videoOptions.ads&&(this._params=t.videoOptions.ads),t.omid_partner&&(o.Logger.Log(`SDK AdManager.. set config found  omid_partner${t.omid_partner}`),this._params={verification:{omid:t.omid_partner}}),this}_playStack([t,...e]){this._playStackInRecursion(t,e).subscribe((()=>{}))}_playStackInRecursion(t,e=[]){const i=new s.Subject;return this._playAd(t).subscribe((()=>{if(e.length>0){const[t,...n]=e;this._playStackInRecursion(t,n).pipe(c.switchMap((()=>i)))}else i.next(),i.complete()})),i}_playAd(t){const e=new s.Subject;return t.initAdStream().pipe(c.take(1)).subscribe((t=>{this.assignEvent([{assignTo:t}]),o.Logger.Log(`SDK AdManager.. set to the ad this config ${this._params||{}}`),t.setOptions(this._params||{}),t.load(),this.assignEvent([{assignTo:t}]),this.currentAd=t,this.currentAd$.next(t);let e=!1;t.parametersUpdate$.pipe(c.takeUntil(this.currentAdIsDone$)).subscribe((t=>{this.parametersUpdate$.next(t)})),t.stateStream.pipe(c.takeUntil(this.currentAdIsDone$)).subscribe((t=>{t===a.EAdState.ready&&this.currentAdReady$.next(),t===a.EAdState.canplay&&this.videoIsLoaded$.next(),t===a.EAdState.complete&&(this.videoIsDone$.next(),this.companionIsStart$.next()),t===a.EAdState.error&&(e=!0,this.companionIsDone$.next(),this.currentAdIsError$.next()),t===a.EAdState.remove&&(this.companionIsDone$.next(),e||this.currentAdIsDone$.next())})),t.adContainersStream.pipe(c.takeUntil(this.currentAdIsDone$)).subscribe((t=>{this.containerStream.next(t.main),this.containers$.next(t)})),s.interval(10,s.animationFrameScheduler).pipe(c.takeUntil(this.currentAdIsDone$)).subscribe((()=>{this.stateChangeStream.next({muted:t.getState().muted,paused:t.getState().paused,readyState:4})})),t.parametersUpdate$.pipe(c.takeUntil(this.currentAdIsDone$)).subscribe((t=>this.parametersUpdate$.next(t))),t.on("complete",(()=>{}))})),e}getState(){return this.currentAd?this.currentAd.getState():{}}seekTo(t){return this}play(){return new Promise(((t,e)=>{this.currentAd?this.currentAd.play().then((()=>t())).catch((t=>e(t))):e("current ad not implemented")}))}pause(){return this.currentAd&&this.currentAd.pause(),this}mute(){return this.currentAd&&this.currentAd.mute(),this}unmute(){return this.currentAd&&this.currentAd.unmute(),this}getReadyState(){return 0}setVolume(t){this.currentAd&&this.currentAd.setVolume(t)}resetSource(){}loadSource(t){}remove(){return this.dispose(),this.remove$.next(),this.remove$.complete(),this}click(){this.currentAd&&this.currentAd.click()}close(){return this.currentAd&&this.currentAd.remove(),this.currentAd=null,this}getCurrentTime(){return this.currentAd?this.currentAd.getCurrentTime():0}getDuration(){return this.currentAd?this.currentAd.getDuration():0}getVolume(){return this.currentAd?this.currentAd.getVolume():0}skip(){return new Promise(((t,e)=>{this.currentAd?this.currentAd.skip().then((()=>t({}))).catch((t=>e(t))):e("current ad is not defined")}))}_getAdManagers(t){const e=[];return t instanceof Array?t.forEach((t=>e.push(new a.AdManager(t)))):e.push(new a.AdManager(t)),e}};u=n([o.AssignEvent,o.Emitter],u),e.AdsManager=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultDataParser=void 0;const n=i(197),r=i(5),s=i(49);e.DefaultDataParser=class{constructor(t,e){this.rawData=t,this.responseType=e,this.parsedData=new Promise(((i,r)=>{if("string"===typeof t&&(e==s.EResponseType.IMA||/\/\/pubads\.g\.doubleclick\.net\/gampad\/ads/.test(t)||/\/\/pubads\.g\.doubleclick\.net\/gampad\/live\/ads/.test(t)))this.responseType=s.EResponseType.IMA,i(t);else if("string"===typeof t){const e=t.trim();/^(?:https?:)?\/\//.test(e)?n.ajax({url:e,withCredentials:!0,responseType:"xml"}).subscribe((t=>i(t.response)),(t=>r(t))):/^</.test(e)&&this._parse(e).then((t=>i(t))).catch((t=>r(t)))}else t instanceof XMLDocument&&i(t)}))}_parse(t){return new Promise(((e,i)=>{r.parseXml(t,((t,n)=>{t?i(t):e(n)}))}))}}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"===typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vast=void 0;const n=i(23),r=i(164);class s extends n.Base{constructor(){super(),this.ad=[]}setData(t,e){const i=[].slice.call(t.getElementsByTagName("Ad"));return i.length>0?(i.forEach((t=>{this.ad.push((new r.Ad).setData(t,e))})),this.childAdUnitStream.next(this.ad[0])):this.emit("error",void 0),this}}e.Vast=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ad=void 0;const n=i(165),r=i(4),s=i(183),o=i(23),a=i(184);class c extends o.Base{constructor(){super(),this.itemsStream=new r.ReplaySubject(1),this.itemsStream.subscribe((t=>{t.ad.getInLine()?this.childAdUnitStream.next((new n.InLine).setData(t.ad.getInLine())):t.ad.getWrapper()&&this.childAdUnitStream.next((new a.Wrapper).setData(t.ad.getWrapper(),t.option))}))}setData(t,e){return this.itemsStream.next({ad:new s.XmlToAd(t),option:e}),this}}e.Ad=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InLine=void 0;const n=i(23),r=i(4),s=i(166),o=i(167),a=i(28),c=i(7),u=i(5),h=i(87),l=i(99);class d extends n.Base{constructor(){super(),this.itemsStream=new r.ReplaySubject(1),this.itemsStream.subscribe((t=>{for(let e in t)t.hasOwnProperty(e)&&this.setParameter(e,t[e]);this.creatives=(new o.Creatives).setData(t.getCreatives()),this.childAdUnitStream.next(this.creatives),this.creatives.stateStream.subscribe((e=>{e===a.EAdState.start&&(this.emit("impression",void 0),t.getImpressions().forEach((t=>{this.sendEvent(t)})))})),this.creatives.adContainersStream.subscribe((e=>{if(e.main){const i=t.getViewableImpression();i.viewable&&this._viewability(e.main,[i.viewable])}}));const e=t.getExtension();this.extensionStream.next(e),t.adVerifications&&t.adVerifications.length>0&&(new l.AdVerification(t.adVerifications,this),this.adVerifications=t)}))}adVerificationManager(t){t.forEach((t=>{new h.CustomVerification(t,this)}))}adVerificationWorker(t){this.adContainersStream.pipe(c.take(1)).subscribe((e=>{const i=document.createElement("script");i.type="text/javascript",i.src=t,e.main&&e.main.appendChild(i)}))}setData(t){return this.itemsStream.next(new s.XmlToInline(t)),this}_viewability(t,e){u.intersection(t,50).pipe(c.debounceTime(2e3),c.filter((t=>t)),c.take(1)).subscribe((t=>{t&&e.forEach((t=>(new Image).src=t))}))}}e.InLine=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XmlToInline=void 0;const n=i(5),r=i(97);e.XmlToInline=class{constructor(t){this.adVerifications=[],this.extensions=[],this.impressions=[],this.viewableImpression={},[].slice.call(t.getElementsByTagName("Impression")).forEach((t=>this.impressions.push(t.textContent&&t.textContent.trim()||""))),this.error=n.getTextContext(t.getElementsByTagName("Error")[0]);[].slice.call(t.getElementsByTagName("Extension")).forEach((t=>this.extensions.push({type:t.getAttribute("type"),content:n.getTextContext(t),tag:t}))),this.creatives=t.getElementsByTagName("Creatives")[0];[].slice.call(t.getElementsByTagName("Verification")).forEach((t=>this.adVerifications.push(new r.XmlToVerification(t)))),this._viewableImpressionWorker([].slice.call(t.getElementsByTagName("ViewableImpression")));const e=t.getElementsByTagName("Pricing")[0];e&&(this.pricing={model:e.getAttribute("model")||"",currency:e.getAttribute("currency")||"",content:n.getTextContext(e)});const i=t.getElementsByTagName("AdServingId")[0];i&&(this.adServingId=n.getTextContext(i))}getImpressions(){return this.impressions}getCreatives(){return this.creatives}getAdServingId(){return this.adServingId}getPricing(){return this.pricing}getExtension(){return this.extensions}getAdVerification(){return this.adVerifications}getViewableImpression(){return this.viewableImpression}getError(){return this.error}_viewableImpressionWorker([t,...e]){if(t){const e=t.getElementsByTagName("Viewable");e[0]&&(this.viewableImpression.viewable=n.getTextContext(e[0]))}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Creatives=void 0;const n=i(23),r=i(4),s=i(168),o=i(28);class a extends n.Base{constructor(){super(),this.itemsStream=new r.ReplaySubject(1),this.itemsStream.subscribe((t=>{t.forEach((t=>{(t.linear||t.nonLinear)&&(this.mainCreative=t,this.childAdUnitStream.next(this.mainCreative)),t.companions&&(this.companionsCreative=t,this.assignEvent([{assignTo:this.companionsCreative}]),this.companionsCreative.adContainersStream.subscribe((t=>{this.adContainersStream.next(t)})))})),this._companionsReady()}))}_companionsReady(){this.mainCreative&&this.mainCreative.stateStream.subscribe((t=>{t===o.EAdState.start&&this.companionsCreative&&this.companionsCreative.companions.mainResourceIsStarted()}))}setData(t){const e=[];return[].slice.call(t.getElementsByTagName("Creative")).forEach((t=>{e.push((new s.InLineCreative).setData(t))})),this.itemsStream.next(e),this}remove(){return this.mainCreative.remove(),this.companionsCreative&&this.companionsCreative.remove(),this}}e.Creatives=a},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.InLineCreative=void 0;const r=i(23),s=i(4),o=i(169),a=i(98),c=i(178),u=i(179),h=i(5);let l=class extends r.Base{constructor(){super(),this.itemsStream=new s.ReplaySubject(1),this.itemsStream.subscribe((t=>{t.getLinear()?this.mainCreative=this.linear=(new a.Linear).setData(t.getLinear()):t.getNonLinear()?this.mainCreative=this.nonLinear=(new c.NonLinear).setData(t.getNonLinear()):t.getCompanions()&&(this.mainCreative=this.companions=(new u.Companions).setData(t.getCompanions())),this.childAdUnitStream.next(this.mainCreative),this.adId=t.getAdId(),this.sequence=t.getSequence(),this.id=t.getId()}))}setData(t){return this.itemsStream.next(new o.XmlToInlineCreative(t)),this}};l=n([h.AssignEvent],l),e.InLineCreative=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XmlToInlineCreative=void 0;e.XmlToInlineCreative=class{constructor(t){this.adId=parseInt(t.getAttribute("adId")||"0"),this.id=parseInt(t.getAttribute("id")||"0"),this.sequence=parseInt(t.getAttribute("sequence")||"0"),this.companions=t.getElementsByTagName("CompanionAds")[0],this.linear=t.getElementsByTagName("Linear")[0],this.nonLinear=t.getElementsByTagName("NonLinear")[0]}getAdId(){return this.adId}getLinear(){return this.linear}getNonLinear(){return this.nonLinear}getCompanions(){return this.companions}getId(){return this.id}getSequence(){return this.sequence}}},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.Player=void 0;const r=i(5),s=i(4),o=i(171),a=i(172),c=i(7);let u=class extends o.Controls{constructor(){super(),this.remove$=new s.Subject,this.sourceStream=new s.ReplaySubject(1),this.mediaStream=new s.ReplaySubject(1),s.combineLatest([this.sourceStream,this.mediaStream]).pipe(c.takeUntil(this.remove$)).subscribe((([t,e])=>{e.src=t,this.emit("source",t)})),this.mediaStream.pipe(c.takeUntil(this.remove$)).subscribe((t=>{t.setAttribute("playsinline",""),this.mediaTag&&this.mediaTag.parentElement&&this.mediaTag.parentElement.removeChild(this.mediaTag),this.mediaTag=t,this._mediaEventWorker&&this._mediaEventWorker.clean(),this._mediaEventWorker=new a.MediaEventWorker(t),this.assignEvent([{assignTo:this._mediaEventWorker}])})),this.controlsInit(),this._event()}setSource(t){return this.sourceStream.next(t),this}setMediaTag(t){return t instanceof HTMLMediaElement&&this.mediaStream.next(t),this}setConfig(t){this.config=t;for(let[e,i]of Object.entries(t))this.setAttr(e,i);return this}play(){return new Promise(((t,e)=>{this.mediaStream.pipe(c.takeUntil(this.remove$)).subscribe((i=>{i.readyState>0?this._play(i,t,e):(this.paused=!0,i.load(),setTimeout((()=>{i.networkState!=i.NETWORK_NO_SOURCE&&this._play(i,t,e)}),500))}))}))}_play(t,e,i){t.play().then((t=>{e(),this.paused=!1,this.emit("playsuccess",void 0)})).catch((t=>{i(t),this.paused=!0,this.emit("playerror",t)}))}getState(){return{paused:this.mediaTag.paused,muted:this.mediaTag.muted,readyState:this.getReadyState()}}remove(){this._mediaEventWorker&&this._mediaEventWorker.clean(),this.mediaTag&&(this.mediaTag.pause(),this.mediaTag.src="",this.mediaTag.load(),this.mediaTag.parentElement&&this.mediaTag.parentElement.removeChild(this.mediaTag)),this.emit("remove",void 0),this.dispose()}appendTo(t){this.mediaStream.pipe(c.takeUntil(this.remove$)).subscribe((e=>{t.appendChild(e)}))}_event(){this.on("play",(()=>this.paused=!1)),this.on("pause",(()=>this.paused=!0)),this.on("mute",(()=>this.muted=!0)),this.on("unmute",(()=>this.muted=!1))}};u=n([r.Emitter,r.AssignEvent],u),e.Player=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Controls=void 0;e.Controls=class{controlsInit(){this.mediaStream.subscribe((t=>{this.muted=t.muted,this.paused=t.paused}))}pause(){return this.mediaStream.subscribe((t=>{t.pause(),this.paused=!0})),this}seekTo(t){return t===1/0||t===-1/0||isNaN(t)||this.mediaStream.subscribe((e=>e.currentTime=t)),this}setLoop(){return this.setAttr("loop","true"),this}removeLoop(){return this.removeAttr("loop"),this}mute(){return this.mediaTag?(this.mediaTag.muted=!0,this.muted=!0):this.mediaStream.subscribe((t=>{t.muted=!0,this.muted=!0})),this}unmute(){return this.mediaTag?(this.mediaTag.muted=!1,this.muted=!1):this.mediaStream.subscribe((t=>{t.muted=!1,this.muted=!1})),this}setVolume(t){t===1/0||t===-1/0||isNaN(t)||(this.mediaTag?this.mediaTag.volume=t/100:this.mediaStream.subscribe((e=>e.volume=t/100)))}getVolume(){let t=0;return this.mediaTag?t=this.mediaTag.volume:this.mediaStream.subscribe((e=>t=e.volume)),t}getCurrentTime(){let t=0;return this.mediaTag?t=this.mediaTag.currentTime:this.mediaStream.subscribe((e=>{t=e.currentTime})),t}getDuration(){let t=0;return this.mediaTag?t=isNaN(this.mediaTag.duration)?0:this.mediaTag.duration:this.mediaStream.subscribe((e=>{t=isNaN(e.duration)?0:e.duration})),t}getReadyState(){let t=0;return this.mediaTag?t=this.mediaTag.readyState:this.mediaStream.subscribe((e=>{t=e.readyState})),t}setAttr(t,e=""){return this.mediaStream.subscribe((i=>{if("string"===typeof t)e&&"false"!==e?i.setAttribute(t,e):this.removeAttr(t);else if(t instanceof Object)for(let[e,n]of Object.entries(t))i.setAttribute(e,n)})),this}removeAttr(t){return this.mediaStream.subscribe((e=>{e.removeAttribute(t)})),this}}},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.SpecificMediaEvent=e.MediaEventWorker=void 0;const r=i(5),s=i(4),o=i(7),a={play:"play",pause:"pause",volumechange:"volumechange",abort:"abort",durationchange:"durationchange",ended:"ended",error:"error",stalled:"stalled",canplay:"canplay",canplaythrough:"canplaythrough",emptied:"emptied",loadeddata:"loadeddata",loadedmetadata:"loadedmetadata",loadstart:"loadstart",playing:"playing",progress:"progress",ratechange:"ratechange",seeked:"seeked",seeking:"seeking",suspend:"suspend",timeupdate:"timeupdate",waiting:"waiting"};let c=class{constructor(t){this.mediaTag=t,this.specificMediaEvent=new u(t),this.assignEvent([{assignTo:t,eventMap:a},{assignTo:this.specificMediaEvent}])}clean(){this.cleanAssignedEvent(),this.specificMediaEvent.clean()}};c=n([r.Emitter,r.AssignEvent],c),e.MediaEventWorker=c;let u=class{constructor(t){let e;this.mediaTag=t,this._viewingTime=0,this.remove$=new s.Subject,s.fromEvent(this.mediaTag,"click").pipe(o.takeUntil(this.remove$)).subscribe((t=>this.emit("click",t))),s.fromEvent(this.mediaTag,"volumechange").pipe(o.takeUntil(this.remove$)).subscribe((()=>{this.mediaTag.muted!=e&&(this.mediaTag.muted?this.emit("mute",void 0):this.mediaTag.muted||this.emit("unmute",void 0),e=this.mediaTag.muted)})),this._readyStateChange(),s.interval(250,s.animationFrameScheduler).pipe(o.filter((()=>!t.paused&&this.mediaTag.readyState>2)),o.takeUntil(this.remove$)).subscribe((()=>{this._viewingTime+=.25,this.emit("fixedtimeupdate",this.mediaTag),this.emit("viewingtime",this._viewingTime)}))}clean(){this.dispose(),this.remove$.next(),this.remove$.complete()}_readyStateChange(){let t=HTMLMediaElement.HAVE_NOTHING;s.interval(100,s.animationFrameScheduler).pipe(o.filter((()=>this.mediaTag.readyState!==t)),o.takeUntil(this.remove$)).subscribe((()=>{this.emit("readystatechange",this.mediaTag.readyState),t=this.mediaTag.readyState}))}};u=n([r.Emitter],u),e.SpecificMediaEvent=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XmlToLinear=void 0;const n=i(5),r=i(174);class s extends r.BaseXml{constructor(t){super(t),this.sources=[],this.extensions=[],this._sourceWorker([].slice.call(t.getElementsByTagName("MediaFile"))),this._extensionWorker([].slice.call(t.getElementsByTagName("Extension"))),this._linearWorker([t]),this._durationWorker([].slice.call(t.getElementsByTagName("Duration"))),this.adParameter=n.getTextContext(t.getElementsByTagName("AdParameters")[0]),this.sourceWithApiFramework=this.sources.find((t=>!!t.apiFramework))}getSources(){return this.sources}getSourceWithApiFramework(){return this.sourceWithApiFramework}getExtension(){return this.extensions}getAdParameter(){return this.adParameter}getSkipOffset(){return this.skipOffset}getDuration(){return this.duration}_durationWorker(t){t.forEach((t=>{const e=t.textContent;e&&(this.duration=n.getTime(e.trim()))}))}_linearWorker(t){t.forEach((t=>{const e=t.getAttribute("skipoffset");e&&(this.skipOffset=n.getTime(e))}))}_extensionWorker(t){t.forEach((t=>{const e=t.getAttribute("type");e&&t.textContent&&this.extensions.push({type:e,content:n.getTextContext(t)})}))}_sourceWorker(t){t.forEach((t=>{t.textContent&&this.sources.push({id:Number(t.getAttribute("id")),width:Number(t.getAttribute("width")),height:Number(t.getAttribute("height")),MIMEType:t.getAttribute("type")||"",bitrate:Number(t.getAttribute("bitrate")||"0"),source:t.textContent.trim(),apiFramework:t.getAttribute("apiFramework")||void 0})}))}}e.XmlToLinear=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseXml=void 0;const n=i(5);e.BaseXml=class{constructor(t){this.verification={javascriptResource:{},executableResource:{},vendor:""},this.clickTracking=[],this.impression=[],this.trackers=[],this.companions=[],this._verificationWorker([].slice.call(t.getElementsByTagName("AdVerifications"))),this._clickWorker([].slice.call(t.getElementsByTagName("ClickThrough"))),this._clickTrackingWorker([].slice.call(t.getElementsByTagName("ClickTracking"))),this._errorWorker([].slice.call(t.getElementsByTagName("Error"))),this._impressionWorker([].slice.call(t.getElementsByTagName("Impression"))),this.trackers.push(...this._trackersWorker([].slice.call(t.getElementsByTagName("Tracking")))),this._companionWorker([].slice.call(t.getElementsByTagName("Companion")))}getVerification(){return this.verification}getImpression(){return this.impression}getError(){return this.error}getClick(){return this.click}getClickTracking(){return this.clickTracking}getTrackers(){return this.trackers}getCompanions(){return this.companions}_verificationWorker(t){t.forEach((t=>{const e=t.getElementsByTagName("JavaScriptResource"),i=t.getElementsByTagName("ExecutableResource");e&&e[0]&&e[0].textContent&&(this.verification.javascriptResource.content=e[0].textContent.trim()),i&&i[0]&&i[0].textContent}))}_clickWorker(t){t.forEach((t=>this.click=n.getTextContext(t)))}_clickTrackingWorker(t){t.forEach((t=>this.clickTracking.push(n.getTextContext(t))))}_errorWorker(t){t.forEach((t=>this.error=t.textContent&&t.textContent.trim()))}_impressionWorker(t){t.forEach((t=>t.textContent&&this.impression.push(t.textContent.trim())))}_trackersWorker(t){return t.forEach((t=>{const e=t.getAttribute("event");if(e&&t.textContent){const i=e.toLowerCase();this.trackers.push({event:i,link:t.textContent.trim()})}})),[]}_companionWorker(t){t.forEach((t=>{const e=t.getAttribute("width")||"100%",i=t.getAttribute("height")||"100%",r=t.getElementsByTagName("StaticResource")[0],s=n.getTextContext(r)||"",o=t.getAttribute("renderingMode")||"default",a=t.getElementsByTagName("AdParameters")[0],c=t.getElementsByTagName("AltText")[0],u=t.getElementsByTagName("CompanionClickThrough")[0],h=t.getElementsByTagName("CompanionClickTracking")[0],l=[].slice.call(t.getElementsByTagName("Tracking")),d=this._trackersWorker(l);r&&this.companions.push({source:s,MIMEType:r.getAttribute("creativeType")||"",width:e,height:i,adParameters:n.getTextContext(a)||"",altText:n.getTextContext(c)||"",clickThrough:n.getTextContext(u)||"",clickTracking:n.getTextContext(h)||"",trackingEvent:d,renderingMode:o})}))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.preventSeek=void 0;const n=i(5);e.preventSeek=function(t){let e=null;t.on("timeupdate",(()=>{t.mediaTag.seeking||(e=t.mediaTag.currentTime)})),t.on("seeking",(i=>{e&&e!==t.mediaTag.currentTime&&(t.mediaTag.currentTime=e,i.preventDefault(),i.stopPropagation(),n.Log.warning("Ad trying to seek"))})),t.on("ended",(()=>e=null))}},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.VPaid=void 0;const r=i(5),s=i(177),o=i(98),a=i(4),c=i(28),u=i(23);let h=class extends u.Base{constructor(t){super(),this.parent=t,this.skipable=!1,this.createFrame(),this.vpaidCreativeStream=new a.ReplaySubject,this.vpaidCreativeStream.subscribe((t=>this.vpaidCreative=t)),this.vpaidInitObjectStream=new a.ReplaySubject,this.loadedStream=new a.ReplaySubject(1),this.loadedStream.subscribe((()=>{r.Logger.Trace("VPaid.. loadstream init"),this.vpaidCreative.startAd()})),s.vpaidSubscribe.call(this);const e=t.items.getSourceWithApiFramework();e&&(r.Logger.Trace("VPaid.. found VPaid source"),t instanceof o.Linear?this._linearPreWorker(t,e):r.Logger.Warning("VPaid.. non-linear VPaid is not implemented yet. We sorry")),this.subscriptions.push(a.interval(250,a.animationFrameScheduler).subscribe((()=>{this.vpaidCreative&&(this.skipable=this.vpaidCreative.getAdSkippableState())})))}_linearPreWorker(t,e){r.Logger.Trace("VPaid.. linearPreWorker"),this.vpaidInitObjectStream.next({width:e.width||640,height:e.height||360,viewMode:this.viewMode||"normal",desiredBitrate:e.bitrate||666,creativeData:{AdParameters:t.items.getAdParameter()},environmentVars:{slot:this.parent.container,videoSlot:t.player.mediaTag,videoSlotCanAutoPlay:!0}}),this.initVPaidFrame(e.source)}play(){return new Promise(((t,e)=>{this.vpaidCreative&&this.vpaidCreative.resumeAd()}))}pause(){return this.vpaidCreative&&this.vpaidCreative.pauseAd(),this}mute(){return this.vpaidCreative&&this.vpaidCreative.setAdVolume(0),this}unmute(){return this.vpaidCreative&&this.vpaidCreative.setAdVolume(1),this}setViewMode(t){return this.viewMode=t,this}getDuration(){return this.vpaidCreative&&this.vpaidCreative.getAdDuration()||0}getCurrentTime(){return this.vpaidCreative&&this.vpaidCreative.getAdRemainingTime()||0}getVolume(){return this.vpaidCreative&&this.vpaidCreative.getAdVolume()||0}getState(){return{paused:this.paused,muted:this.muted}}skip(){return new Promise(((t,e)=>{this.stateStream.next(c.EAdState.skip),this.emit("skip",void 0),this.findAndSendTracker(this.parent.items.getTrackers(),"skip"),this.vpaidCreative.skipAd(),this.remove(),t()}))}load(){return r.Logger.Trace("VPaid.. load"),this.subscriptions.push(a.combineLatest([this.vpaidInitObjectStream,this.vpaidCreativeStream]).subscribe((([{width:t,height:e,viewMode:i,creativeData:n,environmentVars:s,desiredBitrate:o},a])=>{r.Logger.Trace(`VPaid.. initAd with args width:${t}, height:${e}, viewMode:${i}, desiredBitrate:${o}, creativeData:${n}, env:${s}`),a.initAd(t,e,i,o,n,s)}))),this}remove(){return r.Logger.Trace("VPaid.. remove"),this.iframeNW.remove(),this.dispose(),this.remove$.next(),this.remove$.complete(),this}initVPaidFrame(t){const e=t.match(/(.+\/)/);if(e&&e[0]){this.iframeNW.append(`<base href="${e[0]}">`);const i=r.$$("script").attr({type:"application/javascript",src:t}).on("load",(()=>{r.Logger.Log("VPaid.. frame is loaded");const t=this.iframeNW.get().contentWindow;if(t){const e=t.getVPAIDAd;void 0!==e?this.vpaidCreativeStream.next(e()):r.Logger.Error("VPaid.. getVPAIDAd method not found")}}));this.iframeNW.append(i.get())}else r.Logger.Error("VPaid.. base path for source is undefined")}createFrame(){this.iframeNW=r.$$("iframe"),this.iframeNW.attr({frameborder:"0",width:"100%",height:"100%",allow:"autoplay",allowfullscreen:"true"}),this.parent.container.appendChild(this.iframeNW.get())}};h=n([r.Emitter],h),e.VPaid=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.vpaidSubscribe=void 0;i(5);e.vpaidSubscribe=function(){const t=this,e={AdStarted:()=>{this.paused=!1},AdStopped:()=>{this.emit("complete",void 0),this.paused=!0},AdSkipped:()=>{this.emit("skip",void 0),t.parent.findAndSendTracker(t.parent.items.getTrackers(),"skip")},AdLoaded:()=>{this.loadedStream.next()},AdLinearChange:function(){},AdSizeChange:function(){},AdExpandedChange:function(){},AdSkippableStateChange:function(e){t.skipable=e},AdDurationChange:function(){},AdRemainingTimeChange:function(){},AdVolumeChange:function(){t.vpaidCreative.getAdVolume()<=0?(t.muted=!0,t.parent.findAndSendTracker(t.parent.items.getTrackers(),"mute")):(t.muted=!1,t.parent.findAndSendTracker(t.parent.items.getTrackers(),"unmute"))},AdImpression:()=>{this.emit("impression",void 0)},AdClickThru:function(){t.parent.findAndSendTracker(t.parent.items.getTrackers(),"click")},AdInteraction:function(){const e=t.vpaidCreative.getAdVolume();t.muted=e<=0},AdVideoStart:()=>{this.paused=!1,this.emit("start",void 0),t.parent.findAndSendTracker(t.parent.items.getTrackers(),"start")},AdVideoFirstQuartile:()=>{this.emit("firstquartile",void 0),t.parent.findAndSendTracker(t.parent.items.getTrackers(),"firstquartile")},AdVideoMidpoint:()=>{this.emit("midpoint",void 0),t.parent.findAndSendTracker(t.parent.items.getTrackers(),"midpoint")},AdVideoThirdQuartile:()=>{this.emit("thirdquartile",void 0),t.parent.findAndSendTracker(t.parent.items.getTrackers(),"thirdquartile")},AdVideoComplete:()=>{this.emit("complete",void 0),t.parent.findAndSendTracker(t.parent.items.getTrackers(),"complete")},AdUserAcceptInvitation:function(){},AdUserMinimize:function(){},AdUserClose:()=>{this.remove()},AdPaused:()=>{this.emit("pause",void 0),this.paused=!0,t.parent.findAndSendTracker(t.parent.items.getTrackers(),"pause")},AdPlaying:()=>{this.emit("resume",void 0),this.paused=!1,t.parent.findAndSendTracker(t.parent.items.getTrackers(),"resume")},AdError:t=>{this.emit("error",t)},AdLog:t=>{}};this.vpaidCreativeStream.subscribe((t=>{for(let i in e)e.hasOwnProperty(i)&&t.subscribe(e[i],i,this)}))}},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.NonLinear=void 0;const r=i(5),s=i(23);let o=class extends s.Base{constructor(t=!1){super()}};o=n([r.Emitter],o),e.NonLinear=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Companions=void 0;const n=i(23),r=i(180),s=(i(5),i(28));class o extends n.Base{constructor(){super(),this.companions=[]}setData(t){const e=t.getAttribute("required");return this.required=e||"none",[].slice.call(t.getElementsByTagName("Companion")).forEach((t=>{const e=new r.Companion;this.assignEvent([{assignTo:e}]),this.companions.push(e),e.adContainersStream.subscribe((t=>{this.adContainersStream.next(t)})),e.setData(t)})),this}remove(){return this.companions.forEach((t=>t.remove())),this}mainResourceIsStarted(){const t=this.companions.filter((t=>t.container.element.isConnected));"all"===this.required&&t.length!==this.companions.length?(this.stateStream.next(s.EAdState.error),this.emit("error","companion ads has type required=all, but some companion do not have display container element")):"any"===this.required&&t.length<=0&&(this.stateStream.next(s.EAdState.error),this.emit("error","companion ads has type required=any, no one companion dont have parent element"))}}e.Companions=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Companion=void 0;const n=i(5),r=i(4),s=i(23),o=i(181);class a extends s.Base{constructor(){super(),this.itemsStream=new r.ReplaySubject(1),this._containerWorker(),this.itemsStream.subscribe((t=>{this._click=t.getClick(),this._clickTracking=t.getClickTracker(),this.renderingMode=t.getRenderingMode(),this.adSlotId=t.getSlotId(),this.width=t.width,this.height=t.height,this.ratio=[this.width,this.height],this.container={element:this.getContainer(),adMatchRule:{size:[[this.width,this.height]],width:[this.width],height:[this.height],adSlotId:this.adSlotId,ratio:this.ratio,renderingMode:this.renderingMode}},this.adContainersStream.next({additional:[this.container]})}))}setData(t){return this.itemsStream.next(new o.XmlToCompanion(t)),this}remove(){return this.displayContainer.remove(),this}getContainer(){return this.displayContainer.get()}click(){return this._click&&(window.open(this._click,"_blank"),this._clickTracking&&this.sendEvent(this._clickTracking)),this}_containerWorker(){this.displayContainer=n.$$("div"),this.displayContainer.css({width:"100%",height:"100%",position:"absolute"}),r.fromEvent(this.displayContainer.get(),"click").subscribe((()=>{this.click()})),this.itemsStream.subscribe((t=>{if(t.getStaticResource()){n.$$("img").attr({src:t.getStaticResource()}).css({height:"100%",position:"relative",width:"100%",objectFit:"contain"}).appendTo(this.displayContainer)}if(t.getIFrameResource()){n.$$("iframe").attr({src:t.getIFrameResource(),frameborder:"0",width:"100%",height:"100%",allow:"autoplay",allowfullscreen:"true",referrerpolicy:"origin"}).appendTo(this.displayContainer)}t.getHTMLResource()&&(this.displayContainer.get().innerHTML=t.getHTMLResource())}))}}e.Companion=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XmlToCompanion=void 0;const n=i(5);e.XmlToCompanion=class{constructor(t){this.trackers=[],this.width=0,this.height=0,this._trackersWorker([].slice.call(t.getElementsByTagName("Tracking"))),this.staticResource=n.getTextContext(t.getElementsByTagName("StaticResource")[0]),this.iframeResource=n.getTextContext(t.getElementsByTagName("IFrameResource")[0]),this.htmlResource=n.getTextContext(t.getElementsByTagName("HTMLResource")[0]),this.clickThrough=n.getTextContext(t.getElementsByTagName("CompanionClickThrough")[0]),this.renderingMode=t.getAttribute("renderingMode")||"default";const e=t.getAttribute("width");this.width=e?parseInt(e):0;const i=t.getAttribute("height");this.height=i?parseInt(i):0;const r=t.getAttribute("adSlotId");r&&(this.adSlotId=r)}getRenderingMode(){return this.renderingMode}getStaticResource(){return this.staticResource}getIFrameResource(){return this.iframeResource}getHTMLResource(){return this.htmlResource}getTrackers(){return this.trackers}getClick(){return this.clickThrough}getClickTracker(){return this.clickTracking}getSlotId(){return this.adSlotId}_trackersWorker(t){return t.forEach((t=>{const e=t.getAttribute("event");if(e&&t.textContent){const i=e.toLowerCase();this.trackers.push({event:i,link:t.textContent.trim()})}})),[]}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SessionVerification=void 0;const n=i(4),r=i(7),s=i(5);e.SessionVerification=class{constructor(t,e,i,r){this.globalSessionClient=t,this.verifications=e,this.parentTag=i,this.adServingId=r,this.verificationResources=[],this.remove$=new n.ReplaySubject,this.runBySessionStart=[];const o=window.OMID_PARTNER,a=window.OMID_APP_VERSION;s.Logger.Trace(`SessionVerification.. Catch global partner ${o}. Catch global App version ${a}`),this.partnerName=o||"admixerus.com-omadnroid",this.appVersion=a||"1.1.3",this.init()}remove(){this.remove$.next(),this.remove$.complete()}init(){s.Logger.Trace("SessionVerification.. init");let t=!1;n.combineLatest([this.parentTag.mediaTypeStream,this.parentTag.adContainersStream]).pipe(r.take(1)).subscribe((([e,i])=>{if(!t){let n;s.Logger.Log(`SessionVerification.. Media type is ${e}. Container is ${i}`),this.mediaType=e,i.main?(t=!0,this.parentTag.options.verification&&this.parentTag.options.verification.omid&&this.parentTag.options.verification.omid.sessionClient?(s.Logger.Trace(`SessionVerification.. session client version set from options. Vers ${this.parentTag.options.verification.omid.sessionClient}`),this.sessionClient=this.globalSessionClient[this.parentTag.options.verification.omid.sessionClient]):window.OMID_SESSION_VERSION&&(s.Logger.Trace(`SessionVerification.. session client version set from global. Vers ${window.OMID_SESSION_VERSION}`),this.sessionClient=this.globalSessionClient[window.OMID_SESSION_VERSION]),this.sessionClient?(this.playerEvents(),this.initVerificationsResource(),this.parentTag.options.verification&&this.parentTag.options.verification.omid&&(this.parentTag.options.verification.omid.name&&(this.partnerName=this.parentTag.options.verification.omid.name,s.Logger.Trace(`SessionVerification.. Partner name from option ${this.partnerName}`)),this.parentTag.options.verification.omid.version&&(this.appVersion=this.parentTag.options.verification.omid.version,s.Logger.Trace(`SessionVerification.. App version from option ${this.appVersion}`))),this.partner=new this.sessionClient.Partner(this.partnerName,this.appVersion),this.verificationResources.length>0?this.context=new this.sessionClient.Context(this.partner,this.verificationResources):s.Logger.Warning("Verification resources is not initialise",{group:"SessionVerification",closeGroup:!0}),n=i.main.getElementsByTagName("video")[0],this.containerTag=n||i.main,"video"===e||"audio"===e?this.context.setVideoElement(this.containerTag):this.context.setSlotElement(this.containerTag),this.initAdSession(),this.createPublisherEvent(),this.visiblePlayerStateWorker(),s.Logger.Log(`SessionVerification.. Set in context element ${this.containerTag}`),this.registerAdSessionEvent()):s.Logger.Error("SessionVerification.. Cant find session version")):s.Logger.Warning("SessionVerification.. Not found main container")}}))}playerEvents(){s.Logger.Trace("SessionVerification.. playerEvents"),this.parentTag.on("error",(t=>{this.isSessionStarted?this.adSession.error("VIDEO",t):this.runBySessionStart.push((()=>this.adSession.error("VIDEO",t)))})),this.parentTag.on("start",(()=>{"video"!==this.mediaType&&"audio"!==this.mediaType||(this.isSessionStarted?this.mediaEvents.start(this.parentTag.getDuration(),this.parentTag.getVolume()):this.runBySessionStart.push((()=>this.mediaEvents.start(this.parentTag.getDuration(),this.parentTag.getVolume()))))})),this.parentTag.on("firstquartile",(()=>{this.isSessionStarted?this.mediaEvents.firstQuartile():this.runBySessionStart.push((()=>this.mediaEvents.firstQuartile()))})),this.parentTag.on("midpoint",(()=>{this.isSessionStarted?this.mediaEvents.midpoint():this.runBySessionStart.push((()=>this.mediaEvents.midpoint()))})),this.parentTag.on("thirdquartile",(()=>{this.isSessionStarted?this.mediaEvents.thirdQuartile():this.runBySessionStart.push((()=>this.mediaEvents.thirdQuartile()))})),this.parentTag.on("complete",(()=>{this.isSessionStarted?this.mediaEvents.complete():this.runBySessionStart.push((()=>this.mediaEvents.complete()))})),this.parentTag.on("resume",(t=>{t&&t.userInitiated&&(this.isSessionStarted?this.mediaEvents.resume():this.runBySessionStart.push((()=>this.mediaEvents.resume())))})),this.parentTag.on("pause",(t=>{t&&t.userInitiated&&(this.isSessionStarted?this.mediaEvents.pause():this.runBySessionStart.push((()=>this.mediaEvents.pause())))})),this.parentTag.on("volumechange",(()=>{this.isSessionStarted?this.mediaEvents.volumeChange(this.parentTag.getVolume()):this.runBySessionStart.push((()=>this.mediaEvents.volumeChange(this.parentTag.getVolume())))})),this.parentTag.on("skip",(()=>{this.isSessionStarted?this.mediaEvents.skipped():this.runBySessionStart.push((()=>this.mediaEvents.skipped()))})),this.parentTag.on("click",(()=>{this.isSessionStarted?this.mediaEvents.adUserInteraction("click"):this.runBySessionStart.push((()=>this.mediaEvents.adUserInteraction("click")))})),this.parentTag.on("readystatechange",(t=>{"number"===typeof t&&this.isSessionStarted&&(t<=2?this.mediaEvents.bufferStart():this.mediaEvents.bufferFinish())}))}visiblePlayerStateWorker(){s.intersection(this.containerTag,25).pipe(r.takeUntil(this.remove$)).subscribe((t=>{t?this.mediaEvents.playerStateChange("normal"):this.mediaEvents.playerStateChange("minimized")}))}registerAdSessionEvent(){s.Logger.Trace("SessionVerification.. registerAdSessionEvent"),this.adSession.registerSessionObserver((t=>{"sessionStart"===t.type?(s.Logger.Trace("SessionVerification.. catch sessionStart event"),"definedByJavaScript"===t.data.creativeType&&this.adSession.setCreativeType("video"),"definedByJavaScript"===t.data.impressionType&&this.adSession.setImpressionType("beginToRender"),this.adEvents.loaded(),this.isSessionStarted=!0,s.Logger.Log("SessionVerification.. Send impression"),this.adEvents.impressionOccurred(),this.runBySessionStart.forEach((t=>t()))):"sessionError"===t.type?(s.Logger.Trace("SessionVerification.. catch sessionError event"),this.verifications.forEach((t=>{if(t.trackingEvents){const e=t.trackingEvents.find((t=>"verificationNotExecuted"==t.event));e&&((new Image).src=e.content)}})),this.remove()):"sessionFinish"===t.type&&(s.Logger.Trace("SessionVerification.. catch sessionFinish event"),this.remove())}))}initVerificationsResource(){s.Logger.Trace("SessionVerification.. initVerificationsResource"),this.verifications.forEach((t=>{s.Logger.Trace(`SessionVerification.. init verification ${t.javascriptResource.content}`),this.verificationResources.push(new this.sessionClient.VerificationScriptResource(t.javascriptResource.content,t.vendor,t.verificationsParameters))}))}initAdSession(){s.Logger.Trace("SessionVerification.. initAdSession"),this.context?this.adSession=new this.sessionClient.AdSession(this.context):s.Logger.Warning("Context is undefined",{group:"SessionVerification",closeGroup:!0})}createPublisherEvent(){s.Logger.Trace("SessionVerification.. createPublisherEvent"),this.adEvents=new this.sessionClient.AdEvents(this.adSession),this.mediaEvents=new this.sessionClient.MediaEvents(this.adSession)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XmlToAd=void 0;e.XmlToAd=class{constructor(t){const e=t;this.inline=t.getElementsByTagName("InLine")[0],this.wrapper=t.getElementsByTagName("Wrapper")[0],this.id=parseInt(e.getAttribute("Id")||"0"),this.sequence=parseInt(e.getAttribute("Sequence")||"0"),this.adType=e.getAttribute("AdType")||"video"}getInLine(){return this.inline}getWrapper(){return this.wrapper}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Wrapper=void 0;i(5);const n=i(4),r=i(185),s=i(23),o=i(49),a=i(99),c=i(87);class u extends s.Base{constructor(){super(),this.itemsStream=new n.ReplaySubject(1)}setData(t,e){return this.itemsStream.next(new r.XmlToWrapper(t)),this.itemsStream.subscribe((t=>{this._event(t);const i=t.getVASTAdTagURI();i&&(this._nextAdManager=new o.AdManager(i,e),this._nextAdManager.initAdStream().subscribe((t=>{this.childAdUnitStream.next(t)}),(t=>{this.childAdUnitStream.error(t)}))),t.adVerifications&&t.adVerifications.length>0&&(new a.AdVerification(t.adVerifications,this),this.adVerifications=t)})),this}adVerificationManager(t){t.forEach((t=>{new c.CustomVerification(t,this)}))}play(){return new Promise(((t,e)=>{this.childAdUnit&&this.childAdUnit.play().then((()=>t())).catch((t=>e(t)))}))}pause(){return this.childAdUnit&&this.childAdUnit.pause(),this}mute(){return this.childAdUnit&&this.childAdUnit.mute(),this}unmute(){return this.childAdUnit&&this.childAdUnit.unmute(),this}getProgress(){return this.childAdUnit?this.childAdUnit.getCurrentTime():0}remove(){return this.childAdUnit&&this.childAdUnit.remove(),this}_event(t){const e=t.getTrackers();this.on("impression",(()=>t.getImpression().forEach((t=>this.sendEvent(t))))),this.on("start",(()=>this.findAndSendTracker(e,"start"))),this.on("creativeview",(()=>this.findAndSendTracker(e,"creativeview"))),this.on("firstquartile",(()=>this.findAndSendTracker(e,"firstquartile"))),this.on("midpoint",(()=>this.findAndSendTracker(e,"midpoint"))),this.on("thirdquartile",(()=>this.findAndSendTracker(e,"thirdquartile"))),this.on("complete",(()=>this.findAndSendTracker(e,"complete"))),this.on("skip",(()=>this.findAndSendTracker(e,"skip"))),this.on("error",(t=>this.findAndSendTracker(e,"error"))),this.on("resume",(()=>this.findAndSendTracker(e,"resume"))),this.on("pause",(()=>this.findAndSendTracker(e,"pause"))),this.on("mute",(()=>this.findAndSendTracker(e,"mute"))),this.on("unmute",(()=>this.findAndSendTracker(e,"unmute"))),this.clickStream.subscribe((()=>{t.getClickTracker().forEach((t=>{this.sendEvent(t)}))}))}}e.Wrapper=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XmlToWrapper=void 0;const n=i(5),r=i(97);e.XmlToWrapper=class{constructor(t){this.adVerifications=[],this.creatives=[],this.extensions=[],this.impressions=[],this.clickTracker=[],this.trackers=[];const e=t.getElementsByTagName("VASTAdTagURI"),i=t.getElementsByTagName("DAASTAdTagURI"),s=e.length>0?e:i.length>0?i:null;s&&this._getVASTAdTagURI([].slice.call(s)),[].slice.call(t.getElementsByTagName("Impression")).forEach((t=>this.impressions.push(t.textContent&&t.textContent.trim()||""))),this.error=n.getTextContext(t.getElementsByTagName("Error")[0]);[].slice.call(t.getElementsByTagName("Extension")).forEach((t=>this.extensions.push({type:t.getAttribute("type"),content:n.getTextContext(t),tag:t})));[].slice.call(t.getElementsByTagName("Creative")).forEach((t=>this.creatives.push(t)));[].slice.call(t.getElementsByTagName("Verification")).forEach((t=>this.adVerifications.push(new r.XmlToVerification(t))));const o=t.getElementsByTagName("Pricing")[0];o&&(this.pricing={model:o.getAttribute("model")||"",currency:o.getAttribute("currency")||"",content:n.getTextContext(o)}),this.trackers.push(...this._trackersWorker([].slice.call(t.getElementsByTagName("Tracking")))),[].slice.call(t.getElementsByTagName("ClickTracking")).forEach((t=>{this.clickTracker.push(n.getTextContext(t))}))}getVASTAdTagURI(){return this.VASTAdTagURI}getCreatives(){return this.creatives}getError(){return this.error}getExtensions(){return this.extensions}getClickTracker(){return this.clickTracker}getImpression(){return this.impressions}getTrackers(){return this.trackers}_getVASTAdTagURI(t){t.forEach((t=>this.VASTAdTagURI=t.textContent&&t.textContent.trim()||""))}_trackersWorker(t){return t.forEach((t=>{const e=t.getAttribute("event");if(e&&t.textContent){const i=e.toLowerCase();this.trackers.push({event:i,link:t.textContent.trim()})}})),[]}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoAd=void 0;i(5);const n=i(23),r=i(28);class s extends n.Base{constructor(){super(),setTimeout((()=>{this.emit("error","noad"),this.stateStream.next(r.EAdState.error)}),250)}}e.NoAd=s},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(e,"__esModule",{value:!0}),e.Ima=e.EnumImaErrorCode=void 0;const r=i(28),s=i(4),o=i(5),a=i(188),c=i(189),u=i(23),h=i(7);var l;!function(t){t[t.ADSLOT_NOT_VISIBLE=-1]="ADSLOT_NOT_VISIBLE",t[t.ADS_REQUEST_NETWORK_ERROR=1012]="ADS_REQUEST_NETWORK_ERROR",t[t.ASSET_FALLBACK_FAILED=1021]="ASSET_FALLBACK_FAILED",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED",t[t.Bg=2002]="Bg",t[t.COMPANION_AD_LOADING_FAILED=-1]="COMPANION_AD_LOADING_FAILED",t[t.CONSENT_MANAGEMENT_PROVIDER_NOT_READY=1300]="CONSENT_MANAGEMENT_PROVIDER_NOT_READY",t[t.DEPRECATED_ERROR_CODE=-1]="DEPRECATED_ERROR_CODE",t[t.FAILED_TO_REQUEST_ADS=1005]="FAILED_TO_REQUEST_ADS",t[t.INVALID_AD_TAG=1013]="INVALID_AD_TAG",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.Lg=503]="Lg",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=-1]="OVERLAY_AD_LOADING_FAILED",t[t.OVERLAY_AD_PLAYING_FAILED=500]="OVERLAY_AD_PLAYING_FAILED",t[t.STREAM_INITIALIZATION_FAILED=1020]="STREAM_INITIALIZATION_FAILED",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_MALFORMED_RESPONSE=-1]="VAST_MALFORMED_RESPONSE",t[t.VAST_MEDIA_ERROR=-1]="VAST_MEDIA_ERROR",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VIDEO_ELEMENT_REQUIRED=-1]="VIDEO_ELEMENT_REQUIRED",t[t.VIDEO_ELEMENT_USED=-1]="VIDEO_ELEMENT_USED",t[t.VIDEO_PLAY_ERROR=400]="VIDEO_PLAY_ERROR",t[t.VPAID_ERROR=901]="VPAID_ERROR"}(l=e.EnumImaErrorCode||(e.EnumImaErrorCode={}));let d=class extends u.Base{constructor(){let t;super(),this.isInited=!1,this.testVideoTag=document.createElement("video"),this.stateStream=new s.BehaviorSubject(r.EAdState.notready),this.createElement(),this.containerSizeChecker=new o.SizeChange(this.containerForGoogle,(t=>{s.interval(),setTimeout((()=>{o.Logger.Trace(`IMA.. Parent container size change to w-${t.width}, h-${t.height}`),this._googleContainerResize(t.width,t.height)}),500)})),this.stateStream.subscribe((t=>{t!==r.EAdState.complete&&t!==r.EAdState.error||this.remove()})),document.body.addEventListener("click",(()=>{this.initGoogle()}));try{window.parent&&window.parent.document&&(t=window.parent.document)}catch(t){o.Logger.Warning("IMA.. Catch error on get parent document.")}t&&t.body.addEventListener("click",(()=>{this.initGoogle()})),this.skipable=!1,this.emit("skipstatechange",r.ESkipStatus.notallowed),this.stateStream.subscribe((t=>{t===r.EAdState.ready&&(this.getMediaTag(),this.defineMediaType(),this.stateStream.next(r.EAdState.progress)),t===r.EAdState.start&&this.preInitGoogle()}))}preInitGoogle(){let t=!1;this.testVideoTag.play().catch((e=>{"NotAllowedError"==e.name&&(t=!0)})),setTimeout((()=>{t?setTimeout((()=>this.preInitGoogle()),100):this.initGoogle()}))}createElement(){this.containerForGoogle=document.createElement("div"),this.containerForGoogle.className="bplayer-ima-container",this.containerForGoogle.appendChild(this.createStyle())}createStyle(){const t=document.createElement("style"),e=document.createTextNode("\n        .bplayer-ima-container{\n            position:absolute;\n            width:100%;\n            height:100%;\n            left:50%;\n            top:50%;\n            transform:translate(-50%,-50%);\n                \n        }\n        .bplayer-ima-container div{\n            width:100%;\n            height:100%;\n        }\n        ");return t.appendChild(e),t}setData(t){return this._googleData=t,this}load(){return this._loadGoogleSDK().then((()=>{window.google?this.stateStream.next(r.EAdState.initialize):(o.Logger.Warning("Google global is undefined"),this.stateStream.next(r.EAdState.error))})),this}start(){return this.stateStream.next(r.EAdState.start),this}defineMediaType(){if(this._googleAdManager&&this._googleAdManager.getCurrentAd()){const t=this._googleAdManager.getCurrentAd().getContentType();/audio/.test(t)?(this.mediaTypeStream.next("audio"),this.hideIFrame(),this.clickable=!1):(this.mediaTypeStream.next("video"),this.showIFrame(),this.clickable=!0),this.parametersUpdate$.next({key:"clickable",value:this.clickable})}else setTimeout((()=>{this.defineMediaType()}),100)}getMediaTag(){const t=this.containerForGoogle.getElementsByTagName("video");t.length>0?this.mediaTag=t[0]:setTimeout((()=>{this.getMediaTag()}),100)}showIFrame(){const t=this.containerForGoogle.getElementsByTagName("iframe");t.length>0&&"absolute"!=t[0].style.position?(this.iframe=t[0],this.iframe.style.position="absolute",this.iframe.style.top="0",this.containerForGoogle.style.zIndex="9",a.ImaHtml(this.containerForGoogle,this)):setTimeout((()=>{this.showIFrame()}),100)}hideIFrame(){this.containerForGoogle.style.display="none";const t=this.containerForGoogle.getElementsByTagName("iframe");t.length>0?(this.iframe=t[0],this.iframe.style.display="none"):setTimeout((()=>{this.getMediaTag()}),100)}initGoogle(){this.isInited||(this.isInited=!0,this.stateStream.pipe(h.takeUntil(this.remove$)).subscribe((t=>{if(t===r.EAdState.initialize)try{o.Logger.Trace("IMA.. INIT ima service"),this.adContainersStream.next({main:this.containerForGoogle,options:{urgentlyAppendMain:!0}}),this._googleInitDisplayManager(),this._googleInitLoader(),this._googleAdLoadedEvent(),this._googleInitAdRequest(),this._googleInitRequest(this._googleData),this._googleAdDisplayManager.initialize(),this.stateStream.next(r.EAdState.ready)}catch(t){this._googleOnAdError(t),o.Logger.Error(`IMA.. Catch error on init. Ex ${o.stringify(t)}`)}})))}getCurrentTime(){let t=0;return this.mediaTag?t=this.mediaTag&&this.mediaTag.currentTime:this._googleAdManager&&this._googleAdManager.getRemainingTime()&&(t=this.getDuration()-this._googleAdManager.getRemainingTime()),t}getDuration(){let t=0;return this.mediaTag?t=this.mediaTag&&this.mediaTag.duration:this._googleAdManager&&this._googleAdManager.getCurrentAd()&&this._googleAdManager.getCurrentAd().getDuration()&&(t=this._googleAdManager.getCurrentAd().getDuration()),t}remove(){return this.stateStream.next(r.EAdState.remove),this.containerSizeChecker.destroy(),this.adContainersStream.subscribe((t=>{t.main&&t.main.parentElement&&t.main.parentElement.removeChild(t.main)})),this.dispose(),super.remove(),this}play(){return new Promise(((t,e)=>{this._googleAdManager&&this.isInited?(this._googleAdManager.resume(),t()):e()}))}pause(){return this._googleAdManager&&this.isInited&&this._googleAdManager.pause(),this}skip(){return new Promise(((t,e)=>{this._googleAdManager?(this._googleAdManager.skip(),t()):e()}))}getVolume(){let t=0;return this._googleAdManager&&this._googleAdManager.getVolume&&(t=this._googleAdManager.getVolume()),t}mute(){return this._googleAdManager&&(this._googleAdManager.setVolume?this._googleAdManager.setVolume(0):this._googleAdManager.setAdVolume?this._googleAdManager.setAdVolume(0):o.Logger.Warning("ima cant mute video")),this}unmute(){return this._googleAdManager&&(this._googleAdManager.setVolume?this._googleAdManager.setVolume(1):this._googleAdManager.setAdVolume?this._googleAdManager.setAdVolume(1):o.Logger.Warning("ima cant unMute video")),this}getState(){return{paused:this.mediaTag&&this.mediaTag.paused,muted:this.mediaTag&&this.mediaTag.muted}}_googleInitAdRequest(){o.Logger.Trace("IMA.. Init AdRequest"),this._googleAdRequest=new window.google.ima.AdsRequest}_googleInitDisplayManager(){o.Logger.Trace("IMA.. Init Display Manager"),this._googleAdDisplayManager=new window.google.ima.AdDisplayContainer(this.containerForGoogle)}_googleInitLoader(){o.Logger.Trace("IMA.. Init Loader"),this._googleAdLoader=new window.google.ima.AdsLoader(this._googleAdDisplayManager)}_googleAdLoadedEvent(){o.Logger.Trace("IMA.. Init AdLoader event"),this._googleAdLoader.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(t=>{this._googleOnAdsManagerLoaded(t)}),!1),this._googleAdLoader.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,(t=>this._googleOnAdError(t)),!1)}_googleAdManagerEvent(){o.Logger.Trace("IMA.. Init AdManager event"),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.IMPRESSION],(()=>{o.Logger.Trace("IMA.. Impression"),this.emit("impression",void 0)}),!1),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.CLICK],(()=>this.emit("click",void 0)),!1),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.FIRST_QUARTILE],(()=>this.emit("firstquartile",void 0)),!1),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.MIDPOINT],(()=>this.emit("midpoint",void 0)),!1),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.THIRD_QUARTILE],(()=>this.emit("thirdquartile",void 0)),!1),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.PAUSED],(()=>{this.emit("pause",void 0),this.paused=!0,this.parametersUpdate$.next({key:"paused",value:this.paused})}),!1),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.RESUMED],(()=>{this.emit("resume",void 0),this.paused=!1,this.parametersUpdate$.next({key:"paused",value:this.paused})})),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.COMPLETE],(()=>{this.emit("complete",void 0),this.containerForGoogle.style.display="none",this.stateStream.next(r.EAdState.complete)}),!1),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.STARTED],(()=>{this.emit("start",void 0),this.paused=!1,this.parametersUpdate$.next({key:"paused",value:this.paused}),this.skipable=this._googleAdManager.getAdSkippableState(),this.emit("skipstatechange",this.skipable?r.ESkipStatus.allowed:r.ESkipStatus.notallowed),this.parametersUpdate$.next({key:"skipable",value:this.skipable})})),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.SKIPPABLE_STATE_CHANGED],(t=>{this.skipable=this._googleAdManager.getAdSkippableState(),this.emit("skipstatechange",this.skipable?r.ESkipStatus.allowed:r.ESkipStatus.notallowed),this.parametersUpdate$.next({key:"skipable",value:this.skipable})})),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.LOG],(t=>{let e;t.getAdData&&t.getAdData().adError&&(t.getAdData().adError.getErrorCode&&(e=t.getAdData().adError.getErrorCode()),this._googleOnAdError(e),o.Logger.Error(`IMA.. Error. ErrCode: ${e} Ex ${t.getAdData().adError.getMessage()}`)),o.Logger.Log(`IMA.. Log event ${t}`)})),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.AD_BREAK_READY],(t=>{o.Logger.Log(`IMA.. AdBreakReady event ${t}`)})),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.VOLUME_CHANGED],(t=>{const e=this._googleAdManager.getVolume();e<=0?(this.emit("mute",void 0),this.muted=!0):1===e&&(this.emit("unmute",void 0),this.muted=!1),this.parametersUpdate$.next({key:"muted",value:this.muted}),o.Logger.Trace(`IMA.. Volume change ${e}`)})),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.SKIPPED],(()=>{o.Logger.Trace("IMA.. Skipped event"),this.emit("skip",void 0)})),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.AD_PROGRESS],(()=>{this.emit("fixedtimeupdate",void 0)})),this._googleAdManager.addEventListener(window.google.ima.AdEvent.Type[c.EGAEvent.AD_METADATA],(()=>{this.emit("loadedmetadata",void 0)}))}_googleInitRequest(t){o.Logger.Trace(`IMA.. Init Request ${t}`),this._googleAdRequest.adTagUrl=t,this._googleAdLoader.requestAds(this._googleAdRequest)}_googleOnAdsManagerLoaded(t){o.Logger.Trace("IMA.. OnAdsManager loaded"),this._googleAdManager=t.getAdsManager(this.containerForGoogle),this._googleAdManager.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,(t=>{this._googleOnAdError(t)}));try{this._googleAdManager.init("0","0",window.google.ima.ViewMode.NORMAL),this._googleAdManager.start()}catch(t){o.Logger.Error(`IMA.. Catch error on adManager init. Ex ${t}`),this.stateStream.next(r.EAdState.error)}this._googleAdManagerEvent()}_googleContainerResize(t,e){this._googleAdManager&&this._googleAdManager.resize(t,e,window.google.ima.ViewMode.NORMAL)}_googleOnAdError(t){if(t===l.VIDEO_PLAY_ERROR)return!1;try{o.Logger.Error(`IMA.. AdError event. errCode ${o.stringify(t)}`)}catch(t){}this.emit("error",t),this.stateStream.next(r.EAdState.error),this._googleAdLoader&&this._googleAdLoader.destroy()}_loadGoogleSDK(){return new Promise(((t,e)=>{const i=document.createElement("script");i.onload=()=>{t()},i.src="https://imasdk.googleapis.com/js/sdkloader/ima3.js",i.type="text/javascript",document.body.appendChild(i)}))}};d=n([o.Emitter],d),e.Ima=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ImaHtml=void 0;const n=i(4),r=i(7);e.ImaHtml=function(t,e){const i=document.createElement("style"),s=document.createElement("div");s.className="control-container";const o=document.createElement("div"),a=document.createElement("div");o.className="controls mute",n.fromEvent(o,"click").subscribe((()=>e.mute())),a.className="controls unmute",n.fromEvent(a,"click").subscribe((()=>e.unmute())),n.interval(100).pipe(r.takeUntil(e.remove$)).subscribe((()=>{0==e.getVolume()?(o.style.display="none",a.style.display="block"):(o.style.display="block",a.style.display="none")})),s.appendChild(a),s.appendChild(o),t.className=t.className+" adm-google-ima",i.appendChild(document.createTextNode("\n       \n        .adm-google-ima div{width:100%;height:100%;position:absolute;}\n        .adm-google-ima .controls{\n            position:relative;\n            font-family: Roboto, sans-serif;\n            font-size: 14px;\n            color:white;\n            background:rgba(0, 0, 0, 0.4);\n            border-radius:50%;\n            padding:5px;\n            margin:5px;\n            z-index:2;\n            display:inline-block;\n            cursor:pointer;\n            width:25px;\n            height:25px;\n        }\n        .adm-google-ima .controls.mute{\n            background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' version='1.1' viewBox='0 0 200 200' fill='white' xml:space='preserve'%3E%3Cpath d='M122.2,2.6v22.9c32.1,9.6,55.6,39.3,55.6,74.5s-23.4,64.9-55.6,74.5v22.9c44.5-10.1,77.8-49.8,77.8-97.4S166.7,12.7,122.2,2.6z' style='display: block;'%3E%3C/path%3E%3Cpath d='M150,100c0-19.6-11.3-36.6-27.8-44.7v89.5C138.7,136.6,150,119.6,150,100z' style='display: block;'%3E%3C/path%3E%3Cpath d='M0,66.7v66.6h44.4l55.6,55.6V11.1L44.4,66.7H0z'%3E%3C/path%3E%3C/svg%3E\");\n        }\n        .adm-google-ima .controls.unmute{\n            background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' version='1.1' viewBox='0 0 200 200' fill='white' xml:space='preserve'%3E%3Cpath d='M150,100c0-19.6-11.3-36.6-27.8-44.7v24.6l27.3,27.3C149.8,104.8,150,102.4,150,100z M177.8,100c0,10.4-2.3,20.3-6,29.3 l16.8,16.8c7.2-13.8,11.4-29.5,11.4-46.2c0-47.6-33.3-87.3-77.8-97.4v22.9C154.3,35.1,177.8,64.8,177.8,100z M100,11.1L76.8,34.3 L100,57.6V11.1z M14.2,0L0,14.2l52.5,52.5H0v66.7h44.4L100,189v-74.7l47.3,47.3c-7.4,5.7-15.8,10.3-25.1,13.1v22.9 c15.3-3.5,29.2-10.5,40.9-20.1l22.7,22.6l14.2-14.2l-100-100L14.2,0z'%3E%3C/path%3E%3C/svg%3E\");\n        }\n         .adm-google-ima .control-container{\n             position:absolute;\n             bottom:30px;\n             left:30px;\n             z-index:9;\n             width:30px;\n             height:30px;\n         }\n        ")),t.appendChild(i),t.appendChild(s)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EGAMMethod=e.EGAEvent=void 0,function(t){t.AD_BREAK_READY="AD_BREAK_READY",t.AD_BUFFERING="AD_BUFFERING",t.AD_METADATA="AD_METADATA",t.AD_PROGRESS="AD_PROGRESS",t.ALL_ADS_COMPLETED="ALL_ADS_COMPLETED",t.CLICK="CLICK",t.COMPLETE="COMPLETE",t.CONTENT_PAUSE_REQUESTED="CONTENT_PAUSE_REQUESTED",t.CONTENT_RESUME_REQUESTED="CONTENT_RESUME_REQUESTED",t.DURATION_CHANGE="DURATION_CHANGE",t.FIRST_QUARTILE="FIRST_QUARTILE",t.IMPRESSION="IMPRESSION",t.INTERACTION="INTERACTION",t.LINEAR_CHANGED="LINEAR_CHANGED",t.LOADED="LOADED",t.LOG="LOG",t.MIDPOINT="MIDPOINT",t.PAUSED="PAUSED",t.RESUMED="RESUMED",t.SKIPPABLE_STATE_CHANGED="SKIPPABLE_STATE_CHANGED",t.SKIPPED="SKIPPED",t.STARTED="STARTED",t.THIRD_QUARTILE="THIRD_QUARTILE",t.USER_CLOSE="USER_CLOSE",t.VOLUME_CHANGED="VOLUME_CHANGED",t.VOLUME_MUTED="VOLUME_MUTED"}(e.EGAEvent||(e.EGAEvent={})),function(t){t.collapse="collapse",t.destroy="destroy",t.discardAdBreak="discardAdBreak",t.expand="expand",t.getAdSkippableState="getAdSkippableState",t.getCuePoints="getCuePoints",t.getRemainingTime="getRemainingTime",t.getVolume="getVolume",t.init="init",t.isCustomClickTrackingUsed="isCustomClickTrackingUsed",t.isCustomPlaybackUsed="isCustomPlaybackUsed",t.pause="pause",t.resize="resize",t.resume="resume",t.setVolume="setVolume",t.skip="skip",t.start="start",t.stop="stop",t.updateAdsRenderingSettings="updateAdsRenderingSettings"}(e.EGAMMethod||(e.EGAMMethod={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdTimingRules=void 0;const n=i(5);class r extends n.TimingRules{constructor(t){super(t)}addAd(t,e){}}e.AdTimingRules=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.containersMatch=void 0;i(4),i(7);e.containersMatch=function(t,e){const i=[];return t.forEach((t=>{const n=function(t,e){const i=t.adMatchRule.size,n=[];return i?i.forEach((t=>{e.forEach((e=>{const i=e.adMatchRule.size;i&&i.forEach((i=>{i[0]===t[0]&&i[1]===t[1]&&n.push(e)}))}))})):n.push(...e.filter((t=>!t.adMatchRule.size))),n}(r=t,function(t,e){const i=[],n=t.adMatchRule.renderingMode;return n&&"default"!==n&&"concurrent"!==n?i.push(...e.filter((t=>t.adMatchRule.renderingMode===n))):i.push(...e.filter((({adMatchRule:{renderingMode:t="default"}})=>"default"===t||"concurrent"===t))),i}(r,function(t,e){const i=[];return t.adMatchRule.adSlotId?(i.push(...e.filter((e=>e.adMatchRule.adSlotId===t.adMatchRule.adSlotId))),0===i.length&&i.push(...e.filter((t=>!t.adMatchRule.adSlotId)))):i.push(...e.filter((t=>!t.adMatchRule.adSlotId))),i}(r,e)));var r;n.length>0&&i.push([t,n])})),i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NewUi=void 0;const n=i(193),r=i(194),s=i(195),o=i(196),a=i(12);class c extends n.UiManager{constructor(t,e){super(t,e),this.adsManager=t,this.pubContainer=e}initTemplates(){this.mainTP=new a.TemplatePanel(r.toString(),this.adsManager,this.childMainContainer.get()),this.mainTP.appendTo(this.parentMainContainer.get()),this.companionLandTP=new a.TemplatePanel(s.toString(),this.adsManager,this.childCompanionLandscape.get()),this.companionLandTP.appendTo(this.parentCompanionLandscape.get()),this.companionPortTP=new a.TemplatePanel(o.toString(),this.adsManager,this.childCompanionPortrait.get()),this.companionPortTP.appendTo(this.parentCompanionPortrait.get())}}e.NewUi=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UiManager=void 0;const n=i(4),r=i(7),s=i(5);e.UiManager=class{constructor(t,e){this.adsManager=t,this.pubContainer=e,this.remove$=new n.Subject,this.parentMainContainer=s.$$("div").hide().appendTo(this.pubContainer).attr("is-parent",""),this.parentCompanionLandscape=s.$$("div").hide().appendTo(this.pubContainer).attr("is-parent",""),this.parentCompanionPortrait=s.$$("div").hide().appendTo(this.pubContainer).attr("is-parent",""),this.childMainContainer=s.$$("div").attr("is-child",""),this.childCompanionLandscape=s.$$("div").attr("is-child",""),this.childCompanionPortrait=s.$$("div").attr("is-child",""),t.currentAd$.subscribe((t=>{t.adContainersStream.pipe(r.takeUntil(this.remove$),r.debounceTime(200)).subscribe((t=>{if(t.main&&0==this.childMainContainer.get().children.length&&this.childMainContainer.append(t.main),t.additional&&t.additional.length>0)if(this.hasCompanion=!0,t.additional.length>1)t.additional.forEach((t=>{if(t.adMatchRule&&t.adMatchRule.size){const e=t.adMatchRule.size[0];e[0]>e[1]?this.childCompanionLandscape.append(t.element):e[0]<=e[1]&&this.childCompanionPortrait.append(t.element)}}));else{this.childCompanionLandscape.append(t.additional[0].element);const e=t.additional[0].element.cloneNode(!0);this.childCompanionPortrait.append(e)}}))})),this.initTemplates()}showCompanion(t=!0){return this.hasCompanion&&(t?(this.parentCompanionPortrait.show(),this.parentCompanionLandscape.hide()):(this.parentCompanionPortrait.hide(),this.parentCompanionLandscape.show())),this}setSkipText(t){if(t.length>=15&&(t=t.slice(0,10)),this.mainTP.childContainer&&this.mainTP.childContainer.parentElement){const e=document.createElement("style");e.appendChild(document.createTextNode(`\n                .skip-button:before{\n                content: "${t}";\n                \n            }\n               `)),this.mainTP.childContainer.parentElement.appendChild(e)}else setTimeout((()=>{this.setSkipText(t)}),250)}showSkipButton(){if(this.mainTP.childContainer&&this.mainTP.childContainer.parentElement){const t=this.findWrapper(this.mainTP.childContainer);t.classList.remove("hide-skip-controls"),t.classList.add("show-skip-controls")}else setTimeout((()=>{this.showSkipButton()}),250)}hideSkipButton(){if(this.mainTP.childContainer&&this.mainTP.childContainer.parentElement){const t=this.findWrapper(this.mainTP.childContainer);t.classList.remove("show-skip-controls"),t.classList.add("hide-skip-controls")}else setTimeout((()=>{this.hideSkipButton()}),250)}hideMuteButton(){if(this.mainTP.childContainer&&this.mainTP.childContainer.parentElement){const t=this.findWrapper(this.mainTP.childContainer);t.classList.add("hide-controls"),t.classList.remove("show-controls")}else setTimeout((()=>{this.hideMuteButton()}),250)}showMuteButton(){if(this.mainTP.childContainer&&this.mainTP.childContainer.parentElement){const t=this.findWrapper(this.mainTP.childContainer);t.classList.add("show-controls"),t.classList.remove("hide-controls")}else setTimeout((()=>{this.showMuteButton()}),250)}setLearnMoreText(t){if(t.length>=50&&(t=t.slice(0,50)),this.mainTP.childContainer&&this.mainTP.childContainer.parentElement){const e=document.createElement("style");e.appendChild(document.createTextNode(`.learn-text:before{\n                content:"${t}"; \n                }\n               `)),this.mainTP.childContainer.parentElement.appendChild(e)}else setTimeout((()=>{this.setLearnMoreText(t)}),250)}showLearnMoreButton(){if(this.mainTP.childContainer&&this.mainTP.childContainer.parentElement){const t=this.findWrapper(this.mainTP.childContainer);t.classList.remove("hide-learn-more"),t.classList.add("show-learn-more")}else setTimeout((()=>{this.showLearnMoreButton()}),250)}hideLearnMoreButton(){if(this.mainTP.childContainer&&this.mainTP.childContainer.parentElement){const t=this.findWrapper(this.mainTP.childContainer);t.classList.add("hide-learn-more"),t.classList.remove("show-learn-more")}else setTimeout((()=>{this.hideLearnMoreButton()}),250)}setBackgroudColor(t){if(this.mainTP.childContainer&&this.mainTP.childContainer.parentElement){const e=document.createElement("style");e.appendChild(document.createTextNode(`.wrapper{\n                background:${t} !important; \n                }\n               `)),this.mainTP.childContainer.parentElement.appendChild(e)}else setTimeout((()=>{this.setBackgroudColor(t)}),250)}hideCompanion(){return this.parentCompanionLandscape.hide(),this.parentCompanionPortrait.hide(),this}show(){return this.parentMainContainer.show(),this}hide(){return this.parentMainContainer.hide(),this}initTemplates(){}remove(){return this.parentMainContainer.remove(),this.parentCompanionPortrait.remove(),this.parentCompanionLandscape.remove(),this.remove$.next(),this.remove$.complete(),this}findWrapper(t){if(this._wrapperContainer)return this._wrapperContainer;let e=t;for(;e.parentElement;)e=e.parentElement;const i=e.getElementsByClassName("wrapper");return i.length>0&&(this._wrapperContainer=i[0]),this._wrapperContainer}}},function(t,e){t.exports='<template> <div shadow> <style>.wrapper{position:absolute;width:100%;height:100%;z-index:1;background:#000;overflow:hidden}.video-container{position:relative;width:auto;height:auto;transform:translate(-50%,-50%);object-fit:contain;left:50%;top:50%}.video-container video{position:relative;width:100%;height:auto;resize:horizontal}@media screen and (orientation:landscape){.video-container{position:relative;width:182vh;height:auto;max-width:100%}}.click-container{position:absolute;width:auto;height:auto;right:11px;top:18px;padding:2px 7px;color:#000;font-family:Roboto,sans-serif;font-size:16px;z-index:1;cursor:pointer;background:rgba(255,255,255,.7);display:none}.click-container .i-element{font-family:Roboto,sans-serif;width:16px;position:relative;display:inline-block;height:16px;font-size:16px;font-weight:700;line-height:17px;text-align:center;top:2px}.progress-container{position:absolute;bottom:0;width:calc(100% - 5px);height:3px;margin:2px}.progress{position:relative;width:100%;height:100%;box-sizing:border-box}.progress .progress-tracker{-webkit-transition:width .2s linear;-moz-transition:width .2s linear;-ms-transition:width .2s linear;-o-transition:width .2s linear;transition:width .2s linear}.progress-tracker{position:absolute;left:0;height:3px;border-radius:3px;width:var(--current-time-percent);background:#fff;box-sizing:border-box}.progress-fill{position:relative;width:100%;height:3px;border-radius:3px;background:grey;box-sizing:border-box;top:50%;margin-top:-2px}.drag-currenttime{position:absolute;width:100%;height:100%;cursor:pointer;left:0}.drag-currenttime:before{content:attr(drag-time-hms);opacity:0;position:absolute;width:30px;height:14px;text-align:center;border-radius:2px;background:#fff;color:#131313;margin-left:-15px;left:var(--drag-x);top:50%;margin-top:-22px;font-size:12px;font-family:Roboto,sans-serif}.drag-currenttime[dragged]:before{opacity:1}.drag-currenttime:after{content:"";width:10px;height:10px;border-radius:5px;top:50%;margin-top:-5px;margin-left:-5px;background:#c8c2c5;position:absolute;left:var(--drag-x);opacity:0;transition:opacity .2s}.drag-currenttime[dragged]:after{opacity:1}.wrapper.show-learn-more .click-container{display:block}.wrapper.hide-learn-more .click-container{display:none}.wrapper.show-skip-controls .skip-controls{display:inline-block}.wrapper.hide-skip-controls .skip-controls{display:none}.wrapper.show-controls .controls{display:block}.wrapper.hide-controls .controls{display:none}.controls{position:absolute;width:75px;height:24px;bottom:18px;left:11px;background:rgba(0,0,0,.5);display:none}.sound-controls{position:relative;width:20px;height:20px;top:2px;left:5px;display:inline-block;cursor:pointer;z-index:1}.time-controls{position:absolute;color:#fff;font-family:Roboto,sans-serif;font-style:normal;font-weight:400;font-size:14px;right:9px;top:4px;align-items:center}.skip-controls{position:absolute;right:11px;bottom:12px;width:auto;height:36px;background:rgba(0,0,0,.5);font-family:Roboto,sans-serif;font-style:normal;font-weight:400;font-size:16px;line-height:36px;color:rgba(255,255,255,.4);align-content:center;text-align:center;z-index:9;padding:0 5px;display:none}.skip-time{position:absolute;bottom:0;right:0;background:#fff;height:3px;width:var(--skip-time-remain-prec)}.skip-button[skipable]{color:#fff}.skip-button[skipable] svg{fill:#fff!important}.skip-button{color:rgba(255,255,255,.4)}.skip-button svg{fill:rgba(255,255,255,.4)}.mute-unmute{position:absolute;width:100%;height:100%}bp-mute{display:block}bp-mute[muted]{display:none}bp-unmute{display:none}bp-unmute[muted]{display:block}.controls svg{fill:rgba(255,255,255,.8);stroke:rgba(255,255,255,.8)}.wrapper.show-skip .skip{display:block}.skip{display:none;position:absolute;width:auto;height:auto;right:0;left:initial;bottom:5%;cursor:pointer;padding:10px;z-index:1;border:1px solid;background:rgba(0,0,0,.4);color:#fff;font-family:sans-serif}.skip[skip-state=allowed]{display:block}.skip[skip-state=notallowed]{display:none}.time-counter:after{content:attr(ad-time-remain-mm-ss);display:block}.controls-wrapper{position:absolute;width:100%;left:50%;top:50%;transform:translate(-50%,-50%)}@media screen and (orientation:landscape){.controls-wrapper{height:100%}}@media screen and (orientation:portrait){.controls-wrapper:after{display:block;content:"";padding-top:56.6%}}</style> <div class="wrapper"> <div class="video-container"> <bp-container></bp-container> </div> <div class="controls-wrapper"> <ad-element is-clickable class="go-to"> <div class="click-container"> <span class="i-element"> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M9 4C9 4.55228 8.55228 5 8 5C7.44772 5 7 4.55228 7 4C7 3.44772 7.44772 3 8 3C8.55228 3 9 3.44772 9 4Z" fill="black"/> <path d="M7 7C7 6.44772 7.44772 6 8 6C8.55228 6 9 6.44772 9 7V12C9 12.5523 8.55228 13 8 13C7.44772 13 7 12.5523 7 12V7Z" fill="black"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8Z" fill="black"/> </svg> </span> <span class="learn-text"></span> </div> </ad-element> <div class="controls"> <div class="sound-controls"> <bp-mute class="mute-unmute"> <svg version="1.1" viewBox="0 0 200 200" xml:space="preserve"> <path d="M122.2,2.6v22.9c32.1,9.6,55.6,39.3,55.6,74.5s-23.4,64.9-55.6,74.5v22.9c44.5-10.1,77.8-49.8,77.8-97.4S166.7,12.7,122.2,2.6z" style="display:block"></path> <path d="M150,100c0-19.6-11.3-36.6-27.8-44.7v89.5C138.7,136.6,150,119.6,150,100z" style="display:block"></path> <path d="M0,66.7v66.6h44.4l55.6,55.6V11.1L44.4,66.7H0z"></path></svg>  </bp-mute> <bp-unmute class="mute-unmute"> <svg version="1.1" viewBox="0 0 200 200" xml:space="preserve"> <path d="M150,100c0-19.6-11.3-36.6-27.8-44.7v24.6l27.3,27.3C149.8,104.8,150,102.4,150,100z M177.8,100c0,10.4-2.3,20.3-6,29.3\r\n\tl16.8,16.8c7.2-13.8,11.4-29.5,11.4-46.2c0-47.6-33.3-87.3-77.8-97.4v22.9C154.3,35.1,177.8,64.8,177.8,100z M100,11.1L76.8,34.3\r\n\tL100,57.6V11.1z M14.2,0L0,14.2l52.5,52.5H0v66.7h44.4L100,189v-74.7l47.3,47.3c-7.4,5.7-15.8,10.3-25.1,13.1v22.9\r\n\tc15.3-3.5,29.2-10.5,40.9-20.1l22.7,22.6l14.2-14.2l-100-100L14.2,0z"></path> </svg> </bp-unmute> </div> <div class="time-controls"> <ad-element class="time-counter"></ad-element> </div> </div> <div class="skip-controls"> <ad-skip class="skip-button"> <svg width="12" height="10" viewBox="0 0 12 10" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M11 0C11.5523 0 12 0.447715 12 1V9C12 9.55229 11.5523 10 11 10C10.4477 10 10 9.55229 10 9V1C10 0.447715 10.4477 0 11 0Z"/> <path d="M7.3216 4.57601L0.764999 0.478131C0.685534 0.428465 0.59371 0.40213 0.5 0.40213C0.223858 0.40213 0 0.625988 0 0.90213V9.09788C0 9.19159 0.0263348 9.28342 0.0760009 9.36288C0.222356 9.59705 0.530831 9.66824 0.764999 9.52188L7.3216 5.42401C7.38599 5.38376 7.44036 5.32939 7.4806 5.26501C7.62696 5.03084 7.55577 4.72236 7.3216 4.57601Z"/> </svg> </ad-skip> <ad-element class="skip-time"></ad-element> </div> </div> </div> </div> </template> '},function(t,e){t.exports='<template> <div shadow> <div class="companion-container"> <style>.companion-container{width:100%;height:100%;position:absolute;background:#000}img{width:100%;height:100%;position:relative;object-fit:contain}</style> <div container-placeholder></div> </div> </div> </template> '},function(t,e){t.exports='<template> <div shadow> <div class="companion-container"> <style>.companion-container{width:100%;height:100%;position:absolute;background:#000}img{width:100%;height:100%;position:relative;object-fit:contain}</style> <div container-placeholder></div> </div> </div> </template> '},function(t,e,i){"use strict";i.r(e),i.d(e,"ajax",(function(){return S})),i.d(e,"AjaxResponse",(function(){return g})),i.d(e,"AjaxError",(function(){return v})),i.d(e,"AjaxTimeoutError",(function(){return w}));var n=i(0),r=i(22),s=i(3),o=i(1),a=i(11);function c(t,e){return void 0===e&&(e=null),new m({method:"GET",url:t,headers:e})}function u(t,e,i){return new m({method:"POST",url:t,body:e,headers:i})}function h(t,e){return new m({method:"DELETE",url:t,headers:e})}function l(t,e,i){return new m({method:"PUT",url:t,body:e,headers:i})}function d(t,e,i){return new m({method:"PATCH",url:t,body:e,headers:i})}var p=Object(a.a)((function(t,e){return t.response}));function f(t,e){return p(new m({method:"GET",url:t,responseType:"json",headers:e}))}var m=function(t){function e(e){var i=t.call(this)||this,n={async:!0,createXHR:function(){return this.crossDomain?function(){if(r.a.XMLHttpRequest)return new r.a.XMLHttpRequest;if(r.a.XDomainRequest)return new r.a.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(r.a.XMLHttpRequest)return new r.a.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=0;i<3;i++)try{if(t=e[i],new r.a.ActiveXObject(t))break}catch(t){}return new r.a.ActiveXObject(t)}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"===typeof e)n.url=e;else for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);return i.request=n,i}return n.a(e,t),e.prototype._subscribe=function(t){return new b(t,this.request)},e.create=function(){var t=function(t){return new e(t)};return t.get=c,t.post=u,t.delete=h,t.put=l,t.patch=d,t.getJSON=f,t}(),e}(s.a),b=function(t){function e(e,i){var n=t.call(this,e)||this;n.request=i,n.done=!1;var s=i.headers=i.headers||{};return i.crossDomain||n.getHeader(s,"X-Requested-With")||(s["X-Requested-With"]="XMLHttpRequest"),n.getHeader(s,"Content-Type")||r.a.FormData&&i.body instanceof r.a.FormData||"undefined"===typeof i.body||(s["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),i.body=n.serializeBody(i.body,n.getHeader(i.headers,"Content-Type")),n.send(),n}return n.a(e,t),e.prototype.next=function(t){this.done=!0;var e,i=this,n=i.xhr,r=i.request,s=i.destination;try{e=new g(t,n,r)}catch(t){return s.error(t)}s.next(e)},e.prototype.send=function(){var t=this.request,e=this.request,i=e.user,n=e.method,r=e.url,s=e.async,o=e.password,a=e.headers,c=e.body;try{var u=this.xhr=t.createXHR();this.setupEvents(u,t),i?u.open(n,r,s,i,o):u.open(n,r,s),s&&(u.timeout=t.timeout,u.responseType=t.responseType),"withCredentials"in u&&(u.withCredentials=!!t.withCredentials),this.setHeaders(u,a),c?u.send(c):u.send()}catch(t){this.error(t)}},e.prototype.serializeBody=function(t,e){if(!t||"string"===typeof t)return t;if(r.a.FormData&&t instanceof r.a.FormData)return t;if(e){var i=e.indexOf(";");-1!==i&&(e=e.substring(0,i))}switch(e){case"application/x-www-form-urlencoded":return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&");case"application/json":return JSON.stringify(t);default:return t}},e.prototype.setHeaders=function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setRequestHeader(i,e[i])},e.prototype.getHeader=function(t,e){for(var i in t)if(i.toLowerCase()===e.toLowerCase())return t[i]},e.prototype.setupEvents=function(t,e){var i=e.progressSubscriber;function n(t){var e,i=n,r=i.subscriber,s=i.progressSubscriber,o=i.request;s&&s.error(t);try{e=new w(this,o)}catch(t){e=t}r.error(e)}if(t.ontimeout=n,n.request=e,n.subscriber=this,n.progressSubscriber=i,t.upload&&"withCredentials"in t){var s,o;if(i)s=function(t){s.progressSubscriber.next(t)},r.a.XDomainRequest?t.onprogress=s:t.upload.onprogress=s,s.progressSubscriber=i;o=function(t){var e,i=o,n=i.progressSubscriber,r=i.subscriber,s=i.request;n&&n.error(t);try{e=new v("ajax error",this,s)}catch(t){e=t}r.error(e)},t.onerror=o,o.request=e,o.subscriber=this,o.progressSubscriber=i}function a(t){}function c(t){var e=c,i=e.subscriber,n=e.progressSubscriber,r=e.request;if(4===this.readyState){var s=1223===this.status?204:this.status,o="text"===this.responseType?this.response||this.responseText:this.response;if(0===s&&(s=o?200:0),s<400)n&&n.complete(),i.next(t),i.complete();else{n&&n.error(t);var a=void 0;try{a=new v("ajax error "+s,this,r)}catch(t){a=t}i.error(a)}}}t.onreadystatechange=a,a.subscriber=this,a.progressSubscriber=i,a.request=e,t.onload=c,c.subscriber=this,c.progressSubscriber=i,c.request=e},e.prototype.unsubscribe=function(){var e=this.done,i=this.xhr;!e&&i&&4!==i.readyState&&"function"===typeof i.abort&&i.abort(),t.prototype.unsubscribe.call(this)},e}(o.a),g=function(){return function(t,e,i){this.originalEvent=t,this.xhr=e,this.request=i,this.status=e.status,this.responseType=e.responseType||i.responseType,this.response=y(this.responseType,e)}}(),v=function(){function t(t,e,i){return Error.call(this),this.message=t,this.name="AjaxError",this.xhr=e,this.request=i,this.status=e.status,this.responseType=e.responseType||i.responseType,this.response=y(this.responseType,e),this}return t.prototype=Object.create(Error.prototype),t}();function y(t,e){switch(t){case"json":return function(t){return"response"in t?t.responseType?t.response:JSON.parse(t.response||t.responseText||"null"):JSON.parse(t.responseText||"null")}(e);case"xml":return e.responseXML;case"text":default:return"response"in e?e.response:e.responseText}}var w=function(t,e){return v.call(this,"ajax timeout",t,e),this.name="AjaxTimeoutError",this},S=function(){return m.create}()}]);
//# sourceMappingURL=player-sdk-bundle.js.map